<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="打怪升级日常">
<meta property="og:url" content="http://yoursite.com/page/8/index.html">
<meta property="og:site_name" content="打怪升级日常">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="打怪升级日常">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/8/">





  <title>打怪升级日常</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>
    <a href="https://github.com/T0UGH" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">打怪升级日常</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">两星炸弹人(╯‵□′)╯炸弹！•••</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/02/linux-1-vim命令/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="T0UGH(GuiPing Wang)">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://i.loli.net/2020/03/21/WAKimNUecFR64uo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="打怪升级日常">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/02/linux-1-vim命令/" itemprop="url">[linux][1][vim命令]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-02T11:15:48+08:00">
                2019-07-02
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/vim/" itemprop="url" rel="index">
                    <span itemprop="name">vim</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/07/02/linux-1-vim命令/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/07/02/linux-1-vim命令/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-vim-命令说明"><a href="#1-vim-命令说明" class="headerlink" title="1 vim 命令说明"></a>1 vim 命令说明</h3><h4 id="1-1-移动光标"><a href="#1-1-移动光标" class="headerlink" title="1.1 移动光标"></a>1.1 移动光标</h4><table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>h / ←</td>
<td>左移一个字符</td>
</tr>
<tr>
<td>j / ↓</td>
<td>下移一个字符</td>
</tr>
<tr>
<td>k / ↑</td>
<td>上移一个字符</td>
</tr>
<tr>
<td>j / →</td>
<td>右移一个字符</td>
</tr>
<tr>
<td>30j</td>
<td>右移30个字符</td>
</tr>
<tr>
<td>ctrl + f</td>
<td>下移一页</td>
</tr>
<tr>
<td>ctrl + f</td>
<td>上移一页</td>
</tr>
<tr>
<td>20 + space</td>
<td>向右移动20</td>
</tr>
<tr>
<td>0</td>
<td>移动到这一行开头</td>
</tr>
<tr>
<td>$</td>
<td>移动到这一行的最后字符</td>
</tr>
<tr>
<td>H</td>
<td>移动到屏幕最上方一行</td>
</tr>
<tr>
<td>M</td>
<td>移动到屏幕中央一行</td>
</tr>
<tr>
<td>L</td>
<td>移动到屏幕最下方一行</td>
</tr>
<tr>
<td>G</td>
<td><strong>移动到这个文件的最后一行</strong></td>
</tr>
<tr>
<td>20G</td>
<td>移动到这个文件的第20行</td>
</tr>
<tr>
<td>gg</td>
<td>移动到这个文件的第1行</td>
</tr>
<tr>
<td>20 + enter</td>
<td>下移20行</td>
</tr>
</tbody>
</table>
<h4 id="1-2-搜索替换"><a href="#1-2-搜索替换" class="headerlink" title="1.2 搜索替换"></a>1.2 搜索替换</h4><table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>/word</td>
<td>向后寻找名称为word的字符串</td>
</tr>
<tr>
<td>?word</td>
<td>向前寻找名称为word的字符串</td>
</tr>
<tr>
<td>n</td>
<td>向后移动到下一个名称为word的字符串</td>
</tr>
<tr>
<td>N</td>
<td>向前移动到下一个名称为word的字符串</td>
</tr>
</tbody>
</table>
<h4 id="1-3-删除、复制和粘贴"><a href="#1-3-删除、复制和粘贴" class="headerlink" title="1.3 删除、复制和粘贴"></a>1.3 删除、复制和粘贴</h4><table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>x, X</td>
<td>x向后删除一个字符, X向前删除一个字符</td>
</tr>
<tr>
<td>10x</td>
<td>向后删除10个字符</td>
</tr>
<tr>
<td>dd</td>
<td>删除整行</td>
</tr>
<tr>
<td>10dd</td>
<td>删除向下10行</td>
</tr>
<tr>
<td>d$</td>
<td>删除游标所在行，到该行的最后一个字符</td>
</tr>
<tr>
<td>d0</td>
<td>删除游标所在行，到该行的最前面一个字符</td>
</tr>
<tr>
<td>yy</td>
<td>复制游标所在的那一行</td>
</tr>
<tr>
<td>20yy</td>
<td>复制光标所在的向下20行</td>
</tr>
<tr>
<td>y1G</td>
<td>复制游标所在行到第一行的所有数据</td>
</tr>
<tr>
<td>yG</td>
<td>复制游标所在行到最后一行的所有数据</td>
</tr>
<tr>
<td>y$</td>
<td>复制游标所在行，到该行的最后一个字符</td>
</tr>
<tr>
<td>y0</td>
<td>复制游标所在行，到该行的最前面一个字符</td>
</tr>
<tr>
<td>p,P</td>
<td>粘贴</td>
</tr>
<tr>
<td>J</td>
<td>将光标所在行和下一行的数据结合为同一行</td>
</tr>
<tr>
<td>u</td>
<td>复原上一个动作</td>
</tr>
<tr>
<td>ctrl + r</td>
<td>重做上一个动作</td>
</tr>
<tr>
<td>.</td>
<td>重复前一个动作</td>
</tr>
</tbody>
</table>
<h4 id="1-4-一般模式切换到编辑模式"><a href="#1-4-一般模式切换到编辑模式" class="headerlink" title="1.4 一般模式切换到编辑模式"></a>1.4 一般模式切换到编辑模式</h4><table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>i</td>
<td>进入输入模式</td>
</tr>
<tr>
<td>a</td>
<td>进入输入模式</td>
</tr>
<tr>
<td>o,O</td>
<td>从下一行或上一行进入输入模式</td>
</tr>
<tr>
<td>r,R</td>
<td>进入取代模式, r会取代一次, R会一直取代</td>
</tr>
<tr>
<td>esc</td>
<td>退出编辑模式，回到一般模式</td>
</tr>
</tbody>
</table>
<h4 id="1-5-命令模式下的常用命令"><a href="#1-5-命令模式下的常用命令" class="headerlink" title="1.5 命令模式下的常用命令"></a>1.5 命令模式下的常用命令</h4><table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>:w</td>
<td>报错</td>
</tr>
<tr>
<td>:w!</td>
<td>若文件属性为只读，强制写入</td>
</tr>
<tr>
<td>:q</td>
<td>退出</td>
</tr>
<tr>
<td>:q!</td>
<td>不保存退出</td>
</tr>
<tr>
<td>:wq</td>
<td>报错后退出</td>
</tr>
<tr>
<td>:w [filename]</td>
<td>另存为</td>
</tr>
<tr>
<td>:r [filename]</td>
<td>在编辑的数据中，读入另一个档案的数据</td>
</tr>
<tr>
<td>:! command</td>
<td>调用系统命令，如<code>:! ls</code></td>
</tr>
<tr>
<td>:set nu</td>
<td>显示行号</td>
</tr>
<tr>
<td>:set nonu</td>
<td>不显示行号</td>
</tr>
</tbody>
</table>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/01/vue-2-vue组件/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="T0UGH(GuiPing Wang)">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://i.loli.net/2020/03/21/WAKimNUecFR64uo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="打怪升级日常">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/01/vue-2-vue组件/" itemprop="url">[vue][2][vue组件]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-01T23:13:10+08:00">
                2019-07-01
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/vue/" itemprop="url" rel="index">
                    <span itemprop="name">vue</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/07/01/vue-2-vue组件/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/07/01/vue-2-vue组件/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="2-Vue组件"><a href="#2-Vue组件" class="headerlink" title="2 Vue组件"></a>2 Vue组件</h2><p>组件是什么</p>
<ul>
<li>组件是一段独立的，代表了页面的一个部分的代码片段。</li>
<li>它拥有自己的数据、JavaScript脚本，以及样式标签。</li>
<li>组件可以包含其他的组件，井且它们之间可以相互通信。</li>
<li>组件可以是按钮或者图标这样很小的元素，也可以是一个更大的元素</li>
</ul>
<p>组件的好处</p>
<ul>
<li>将代码从页面中分离到组件中的主要优势是，负责页面每一部分的代码都很靠近该组件中的其余代码。</li>
<li>因此当你想要知道哪个元素有添加事件监听器，不必再在一堆JavaScript文件中搜索相应的选择器，因为JavaScript代码就在对应的HTML旁边</li>
<li>而且由于组件是独立的，还可以确保组件中的代码不会影响任何其他组件或产生任何副作用。</li>
</ul>
<h3 id="2-1-组件基础"><a href="#2-1-组件基础" class="headerlink" title="2.1 组件基础"></a>2.1 组件基础</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">custom-button</span>&gt;</span><span class="tag">&lt;/<span class="name">custom-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> CustomButton = &#123;</span></span><br><span class="line"><span class="xml">    template: '<span class="tag">&lt;<span class="name">button</span>&gt;</span>自定义按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span>'</span></span><br><span class="line"><span class="undefined">&#125;;</span></span><br><span class="line"><span class="javascript"><span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">    el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">    components: &#123;</span></span><br><span class="line"><span class="undefined">        CustomButton</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这样自定义的按钮就会在页面上显示了</p>
<h3 id="2-2-数据、方法和计算属性"><a href="#2-2-数据、方法和计算属性" class="headerlink" title="2.2 数据、方法和计算属性"></a>2.2 数据、方法和计算属性</h3><ul>
<li>每个组件可以拥有它们自己的数据、方法和计算属性，以及所有在前面章节中出现过的属性就像<code>Vue</code>实例一样。</li>
<li>定义组件的对象与我们用来定义<code>Vue</code>实例的对象相似，它们在很多地方可以互用。</li>
</ul>
<h4 id="2-2-1-组件和Vue实例之间的一个细微差别"><a href="#2-2-1-组件和Vue实例之间的一个细微差别" class="headerlink" title="2.2.1 组件和Vue实例之间的一个细微差别"></a>2.2.1 组件和Vue实例之间的一个细微差别</h4><p>Vue实例中的<code>data</code>属性是一个对象，然而组件中的<code>data</code>属性是一个函数。这是因为一个组件可以在同一个页面上被多次引用，你大概不希望它们共享一个<code>data</code>对象</p>
<h3 id="2-3-传递数据"><a href="#2-3-传递数据" class="headerlink" title="2.3 传递数据"></a>2.3 传递数据</h3><ul>
<li><p>当你开始传递数据到它内部时，组件才真正地展示出力量。可以使用<code>props</code>属性来传递数据</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color-preview</span> <span class="attr">color</span>=<span class="string">"red"</span>&gt;</span><span class="tag">&lt;/<span class="name">color-preview</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color-preview</span> <span class="attr">color</span>=<span class="string">"blue"</span>&gt;</span><span class="tag">&lt;/<span class="name">color-preview</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">Vue.compoent(<span class="string">'color-preview'</span>, &#123;</span></span><br><span class="line"><span class="xml">    template: '<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"color-preview"</span> <span class="attr">:style</span>=<span class="string">"stype"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>',</span></span><br><span class="line"><span class="javascript">    props: [<span class="string">'color'</span>],</span></span><br><span class="line"><span class="undefined">    computed: &#123;</span></span><br><span class="line"><span class="undefined">        style()&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> &#123;<span class="attr">backgroundColor</span>: <span class="keyword">this</span>.color&#125;;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">    el: <span class="string">'#app'</span></span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Props</code>是通过HTML属性传入组件的,之后在组件内部,<code>props</code>属性的值表示可以传入组件的属性的名称</p>
</li>
</ul>
<h4 id="2-3-1-Prop-验证"><a href="#2-3-1-Prop-验证" class="headerlink" title="2.3.1 Prop 验证"></a>2.3.1 Prop 验证</h4><ul>
<li><p><code>prop</code> 可以传递一个简单的数组，来表示组件可以接收的属性的名称，也可以传递一个对象，来描述属性的信息，比如:类型、是否必须、默认值以及用于高级验证的自定义验证函数</p>
</li>
<li><p>例如:</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">'price-display'</span>,&#123;</span><br><span class="line">    props:&#123;</span><br><span class="line">        price: <span class="built_in">Number</span>,</span><br><span class="line">        unit: <span class="built_in">String</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>如果<code>price</code>不是一个数字， 或者<code>unit</code>不是一个字符串，<code>Vue</code>就会抛出一个警告。</li>
</ul>
</li>
</ul>
<h4 id="2-3-2-响应式"><a href="#2-3-2-响应式" class="headerlink" title="2.3.2 响应式"></a>2.3.2 响应式</h4><p>在父级实例中设定<code>prop</code>的值时，可以使用<code>v-bind</code>指令将该<code>prop</code>与某个值绑定。那么无论何时只要这个值发生变化， 在组件内任何使用该<code>prop</code>的地方都会更新。</p>
<h4 id="2-3-3-数据流和-sync修饰符"><a href="#2-3-3-数据流和-sync修饰符" class="headerlink" title="2.3.3 数据流和.sync修饰符"></a>2.3.3 数据流和<code>.sync</code>修饰符</h4><ul>
<li><p>通常情况下, 数据通过<code>prop</code>从父级组件传递到子组件中，当父级组件中的数据更新时，传递给子组件的<code>prop</code>也会更新。但是不可以在子组件中修改<code>prop</code>，这就是所谓的单向下行绑定，防止子组件无意中改变父级组件的状态</p>
</li>
<li><p>双向数据绑定: 如果使用<code>.sync</code>修饰符，可以实现子组件向父组件传递变化</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">count-from-number</span> <span class="attr">:number.sync</span>=<span class="string">"numberToDisplay"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">count-from-number</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>如果仅仅想要更新从<code>prop</code>传入的值，而不关心父级组件的值的更新，可以在一开始的<code>data</code>函数中通过<code>this</code>来引用<code>prop</code>的值，将它复制到<code>data</code>对象中</p>
</li>
</ul>
<h3 id="2-4-使用插槽-slot-将内容传递给组件"><a href="#2-4-使用插槽-slot-将内容传递给组件" class="headerlink" title="2.4 使用插槽(slot)将内容传递给组件"></a>2.4 使用插槽(slot)将内容传递给组件</h3><p>除了将数据作为<code>prop</code>传入到组件中,<code>Vue</code>也允许传入HTML，可以使用<code>&lt;slot&gt;</code>标签</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">custom-button</span>&gt;</span>单击我<span class="tag">&lt;/<span class="name">custom-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    Vue.component(<span class="string">'custom-button'</span>,&#123;</span></span><br><span class="line"><span class="xml">        template: '<span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"custom-button"</span>&gt;</span><span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span>'</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>具名插槽: 它允许你在同一个组件中拥有多个插槽</li>
</ul>
<h4 id="2-4-1-作用域插槽"><a href="#2-4-1-作用域插槽" class="headerlink" title="2.4.1 作用域插槽"></a>2.4.1 作用域插槽</h4><p>可以将数据传回slot组件，使父组件中的元素可以访问子组件中的数据</p>
<ol>
<li><p>创建一个获取用户信息的组件，而数据的显示则留给父级组件来处理</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">'user-data'</span>, &#123;</span><br><span class="line">    template: <span class="string">'&lt;div class="user"&gt;&lt;slot :user="user"&gt;&lt;/slot&gt;&lt;/div&gt;'</span></span><br><span class="line">    data: <span class="function"><span class="params">()</span> =&gt;</span>&#123;</span><br><span class="line">        user: undifined</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>传递给<code>&lt;slot&gt;</code>的属性可以用<code>&lt;slot-scope&gt;</code>属性中定义的变量来获取</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;user-data slot-scope=&quot;user&quot;&gt;</span><br><span class="line">        &lt;p v-if=&quot;user&quot;&gt;用户名:&#123;% raw %&#125;&#123;&#123; user.name &#125;&#125;&#123;% endraw %&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/user-data&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="2-5-自定义事件"><a href="#2-5-自定义事件" class="headerlink" title="2.5 自定义事件"></a>2.5 自定义事件</h3><h3 id="2-6-混入"><a href="#2-6-混入" class="headerlink" title="2.6 混入"></a>2.6 混入</h3><h3 id="2-7-vue-loader和-vue文件"><a href="#2-7-vue-loader和-vue文件" class="headerlink" title="2.7 vue-loader和.vue文件"></a>2.7 vue-loader和<code>.vue</code>文件</h3><h3 id="2-8-非Prop属性"><a href="#2-8-非Prop属性" class="headerlink" title="2.8 非Prop属性"></a>2.8 非<code>Prop</code>属性</h3><h3 id="2-9-组件和v-for指令"><a href="#2-9-组件和v-for指令" class="headerlink" title="2.9 组件和v-for指令"></a>2.9 组件和<code>v-for</code>指令</h3>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/01/java中的几种对象解释/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="T0UGH(GuiPing Wang)">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://i.loli.net/2020/03/21/WAKimNUecFR64uo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="打怪升级日常">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/01/java中的几种对象解释/" itemprop="url">java中的几种对象解释</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-01T21:59:18+08:00">
                2019-07-01
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/07/01/java中的几种对象解释/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/07/01/java中的几种对象解释/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="java的几种对象解释"><a href="#java的几种对象解释" class="headerlink" title="java的几种对象解释"></a>java的几种对象解释</h3><h4 id="1-PO-持久对象"><a href="#1-PO-持久对象" class="headerlink" title="1 PO(持久对象)"></a>1 PO(持久对象)</h4><ul>
<li>PO(persistant object, 持久对象)，可以看成是与数据库中的表相映射的java对象</li>
<li>最形象的理解就是一个PO就是数据库中的一条记录，多个记录可以用PO的集合</li>
<li>PO中应不包含任何对数据库的操作</li>
</ul>
<h4 id="2-VO-值对象"><a href="#2-VO-值对象" class="headerlink" title="2 VO(值对象)"></a>2 VO(值对象)</h4><ul>
<li>VO(value object, 值对象)，通常用于业务层之间的数据传递，仅仅包含数据，是抽象出来的业务对象</li>
<li>根据业务需要，VO可以和数据库表对应，也可以不对应</li>
<li>主要对应界面显示的数据对象。对于一个WEB页面，或者SWT、SWING的一个界面，用一个VO对象对应整个界面的值。</li>
</ul>
<h4 id="3-DAO-数据访问对象"><a href="#3-DAO-数据访问对象" class="headerlink" title="3 DAO(数据访问对象)"></a>3 DAO(数据访问对象)</h4><ul>
<li>DAO(data access object, 数据访问对象)对象用于访问数据库。</li>
<li>DAO包含了各种数据库的操作方法，结合PO对数据库进行相关操作，提供数据库的CRUD操作</li>
</ul>
<h4 id="4-BO-业务对象"><a href="#4-BO-业务对象" class="headerlink" title="4 BO(业务对象)"></a>4 BO(业务对象)</h4><ul>
<li>BO(business object, 业务对象)是封装业务逻辑的java对象</li>
<li>通过调用DAO方法，结合PO，VO进行业务操作</li>
<li>这个对象可以包括一个或其他的对象，例如: 一个简历，包括教育经历、工作经历、关系等等，教育经历对应一个PO，工作经历对应一个PO，关系对应一个PO，此时工作简历可以作为一个BO，每个BO包含这些PO</li>
</ul>
<h4 id="5-POJO"><a href="#5-POJO" class="headerlink" title="5 POJO"></a>5 POJO</h4><ul>
<li>plain ordinary java object 简单无规则的java对象</li>
<li>VO和PO应该都属于POJO</li>
<li>一个POJO用于持久化就是PO，直接用它传递、传递过程中就是DTO，直接用来对应表示层就是VO</li>
</ul>
<h4 id="6-DTO-数据传输对象"><a href="#6-DTO-数据传输对象" class="headerlink" title="6 DTO(数据传输对象)"></a>6 DTO(数据传输对象)</h4><ul>
<li>DTO(Data Transfer Object, 数据传输对象)是一组需要跨进程或网络边界传输的聚合数据的简单容器</li>
<li>它不应该包含业务逻辑，并将其行为限制为诸如内部一致性检查和基本验证之类的活动，主要用于远程调用等需要大量传输对象的地方。</li>
<li>比如我们一张表有100个字段，那么对应的PO就有100个属性。但是我们界面上只要显示10个字段，客户端用WEB service来获取数据，没有必要把整个PO对象传递到客户端，这时我们就可以用只有这10个属性的DTO来传递结果到客户端，这样也不会暴露服务端表结构.到达客户端以后，如果用这个对象来对应界面显示，那此时它的身份就转为VO</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/27/微服务设计-4-集成/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="T0UGH(GuiPing Wang)">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://i.loli.net/2020/03/21/WAKimNUecFR64uo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="打怪升级日常">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/27/微服务设计-4-集成/" itemprop="url">[微服务设计][4][集成]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-06-27T17:16:59+08:00">
                2019-06-27
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/微服务设计/" itemprop="url" rel="index">
                    <span itemprop="name">微服务设计</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/06/27/微服务设计-4-集成/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/06/27/微服务设计-4-集成/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="4-集成"><a href="#4-集成" class="headerlink" title="4 集成"></a>4 集成</h2><p>集成是微服务相关技术中最重要的一个。做的好的话，微服务可以保持自治性，可以独立地修改和发布它们。做的不好，会带来灾难</p>
<h3 id="4-1-寻找理想地集成技术"><a href="#4-1-寻找理想地集成技术" class="headerlink" title="4.1 寻找理想地集成技术"></a>4.1 寻找理想地集成技术</h3><h4 id="4-1-1-避免破坏性修改"><a href="#4-1-1-避免破坏性修改" class="headerlink" title="4.1.1 避免破坏性修改"></a>4.1.1 避免破坏性修改</h4><p>有时候，对某个服务做的一些修改会导致该服务的消费方也随之发生改变。后面会讨论如何处理这种情形，但是我们希望选用的技术可以尽量避免这种情况的发生。比如，如果一个微服务在一个响应中添加了一个字段，那么已有的消费方不应该受到影响</p>
<h4 id="4-1-2-保证API的技术无关性"><a href="#4-1-2-保证API的技术无关性" class="headerlink" title="4.1.2 保证API的技术无关性"></a>4.1.2 保证API的技术无关性</h4><p>在IT中，唯一不变的就是变化。新的工具、框架、语言层出不穷。</p>
<p>保持开放，也是引入微服务的原因。保证微服务之间通信方式的技术无关性很重要。这意味着，不应该选择那种对微服务的具体实现技术有限制的集成方式</p>
<h4 id="4-1-3-使你的服务易于消费者使用"><a href="#4-1-3-使你的服务易于消费者使用" class="headerlink" title="4.1.3 使你的服务易于消费者使用"></a>4.1.3 使你的服务易于消费者使用</h4><p>消费者应该可以很容易地使用服务。理想情况下，消费方应该可以使用任何技术来实现。另一方面，提供一个客户端库也可以简化消费方的使用</p>
<h4 id="4-1-4-隐藏内部实现细节"><a href="#4-1-4-隐藏内部实现细节" class="headerlink" title="4.1.4 隐藏内部实现细节"></a>4.1.4 隐藏内部实现细节</h4><p>与细节绑定意味着，如果想要改变服务内部的一些实现，消费者就需要跟着做出改变。这会增加修改的成本。所有倾向于暴露内部实现细节的技术都不应该被采用</p>
<h3 id="4-3-共享数据库"><a href="#4-3-共享数据库" class="headerlink" title="4.3 共享数据库"></a>4.3 共享数据库</h3><p>最常用的集成形式是数据库集成。使用这种方式，如果其他服务想要从一个服务获取信息，可以直接访问数据库。如果想要修改，也可以直接在数据库中修改。这种方式很简单，可能是最快的集成方式</p>
<p><img src="/2019/06/27/微服务设计-4-集成/0624_4.png" alt=""></p>
<p>但实践起来却有很大的问题</p>
<ol>
<li>外部系统对内部细节完全可见<ul>
<li>存储在数据库中的数据结构对所有人平等给</li>
<li>如果我决定修改表结构，消费方就无法进行工作</li>
</ul>
</li>
<li>消费方与特定的技术绑定在一起<ul>
<li>消费方被迫只能使用关系型数据库，无法轻易替换</li>
</ul>
</li>
<li>行为问题<ul>
<li>对数据库操作的相似逻辑出现在了多个服务中。当修复一个bug时，可以需要修改多个不同的地方</li>
</ul>
</li>
</ol>
<p>使用数据库集成无法实现高内聚和低耦合。服务之间很容易通过数据库集成来共享数据，但是无法共享行为。</p>
<h3 id="4-4-同步与异步"><a href="#4-4-同步与异步" class="headerlink" title="4.4 同步与异步"></a>4.4 同步与异步</h3><p>首先介绍同步和异步</p>
<ul>
<li>同步: 发起一个远程调用后，调用方会阻塞自己并等待整个操作的完成</li>
<li>异步: 调用方不需要等待操作的完成就可以返回，甚至不需要关心整个操作完成与否</li>
</ul>
<p>两种客户端/服务器协作风格</p>
<ul>
<li>请求/响应式<ul>
<li>客户端发起一个请求，然后等待响应</li>
<li>这种模式既可以用于同步通信又可以用于异步通信</li>
<li>对于异步通信，我发起一个请求，然后注册一个回调，当服务端操作结束之后，会调用整个回调</li>
</ul>
</li>
<li>基于事件<ul>
<li>客户端不是发起请求，而是发布一个事件，然后期待其他的写作者接收到该消息，并且知道该怎么做</li>
<li>基于事件的系统天生就是异步的</li>
<li>客户端发布一个事件，但并不需要知道谁或者什么会对此做出响应，这也意味着，可以在不影响客户端的情况下对该事件添加新的订阅者</li>
</ul>
</li>
</ul>
<h3 id="4-5-编排与协同"><a href="#4-5-编排与协同" class="headerlink" title="4.5 编排与协同"></a>4.5 编排与协同</h3><p>有两种架构风格可以采用</p>
<ul>
<li>使用编排(orchestration)的话，我们会依赖于某个中心大脑来指导并驱动整个流程，就像管弦乐队中的指挥一样</li>
<li>使用协同(choreography)的话，我们仅仅会告知系统中各个部分各自的职责，而把具体怎么做的细节留给它们自己，就像芭蕾舞中每个舞者都有自己的方式，同时也会响应周围其他人</li>
</ul>
<p>编排方式的缺点</p>
<ul>
<li>某个服务作为中心控制点承担了太多职责，它成为网状结构的中心枢纽及很多逻辑的起点</li>
<li>会导致出现少量上帝，而与其打交道的那些服务都会沦为贫血的，基于CRUD的服务</li>
</ul>
<p>协同</p>
<ul>
<li>如果使用协同，仅仅从某个服务中使用异步的方式触发一个事件。其他服务可以订阅这个事件并做出相应的处理，这种方式可以消除耦合</li>
<li>但是需要做一些额外的工作来控制流程，保证其正确地进行。处理该问题的一种方法是，构建一个监控系统。实际的监控活动是针对每个服务的，但最终需要把监控的结果映射到业务流程中</li>
<li>协同的方式可以降低系统耦合度，并且可以更加灵活地对现有系统进行修改。但是需要额外地工作来对业务流程做跨服务地监控</li>
</ul>
<h3 id="4-6-远程方法调用"><a href="#4-6-远程方法调用" class="headerlink" title="4.6 远程方法调用"></a>4.6 远程方法调用</h3><p>远程方法调用使用本地调用的方式和远程进行交互</p>
<p>RPC的实现会帮忙快速生成服务端和客户端的桩代码，易于使用</p>
<p>RPC的问题</p>
<ol>
<li>技术的耦合，如Java RMI，与平台绑定太紧密</li>
<li>本地调用和远程调用并不相同<ul>
<li>RPC会花大量的时间对负荷进行封装、解封装以及网络通信</li>
<li>网络本身不可靠</li>
</ul>
</li>
<li>脆弱性<ul>
<li>若服务端对RPC接口进行了修改，客户端也不得不重新生成桩</li>
<li>而为了应对这些修改，需要同时对服务端和客户端进行部署，由此引发了问题: 服务端和客户端无法分离</li>
</ul>
</li>
</ol>
<p>使用RPC时要注意</p>
<ol>
<li>不要对远程调用过度抽象，以致于网络因素完全被隐藏</li>
<li>确保你可以独立地升级服务端的接口而不用强迫客户端升级</li>
</ol>
<p>相比于使用数据库做集成的方式，RPC显然是一个巨大的进步</p>
<h3 id="4-7-REST"><a href="#4-7-REST" class="headerlink" title="4.7 REST"></a>4.7 REST</h3><p>REST是受Web启发而产生的一种架构风格。</p>
<p>REST最重要的概念是资源，一个资源的对外显示方式和内部存储方式之间没有什么耦合</p>
<p>REST本身没有提到底层使用什么协议，但事实上最常用HTTP</p>
<h4 id="4-7-1-REST和HTTP"><a href="#4-7-1-REST和HTTP" class="headerlink" title="4.7.1 REST和HTTP"></a>4.7.1 REST和HTTP</h4><p>HTTP本身提供了很多功能，这些功能对于实现REST风格非常有用</p>
<p>HTTP的动词可以和资源的CRUD一起使用，REST制订了对所有资源的一套标准。对于一个资源，例如Customer，访问接口只有一个，即<code>Customer</code>，但可以通过HTTP协议的不同动词对其进行不同的操作</p>
<ol>
<li>GET: 使用幂等的方式获取资源</li>
<li>POST: 创建资源</li>
<li>PUT: 更新资源</li>
<li>DELETE: 删除资源</li>
</ol>
<p>HTTP的状态码必须精确</p>
<ul>
<li>1xx：相关信息</li>
<li>2xx：操作成功</li>
<li>3xx：重定向</li>
<li>4xx：客户端错误</li>
<li>5xx：服务器错误</li>
</ul>
<h4 id="4-7-2-超媒体作为程序状态的引擎"><a href="#4-7-2-超媒体作为程序状态的引擎" class="headerlink" title="4.7.2 超媒体作为程序状态的引擎"></a>4.7.2 超媒体作为程序状态的引擎</h4><p>REST引入的用来避免客户端和服务端之间产生耦合的另一个原则是”HATEOAS”(Hypermedia As The Engine Of Application State, 超媒体作为程序状态的引擎)</p>
<p>超媒体的概念是: 有一块内容，该内容包含了指向其他内容的链接，而这些内容的格式可以不同(如文本、图像、声音等)</p>
<p>HATEOAS背后的想法是，客户端应该与服务端通过那些指向其他资源的链接进行交互，而这些交互有可能造成状态转移。它不需要知道资源在服务端的URI，相反客户端根据链接导航到它想要的东西</p>
<p>举一个例子</p>
<ul>
<li>考虑Amazon这个站点，随着时间的推移，购物车的位置、链接、图像都有可能发生变化。但是我们人类足够聪明，无论确切的形式和底层的控件怎么变化，我们依然知道想要浏览购物车应该去点哪个按钮。</li>
<li>在网页上做出的一些增量更改，只要这些客户和站点之间的隐式约定仍然满足，这些修改就不会破坏站点的功能</li>
</ul>
<p>举一个更现实的例子</p>
<ul>
<li>使用超媒体控制时，我们希望作为客户端的其他服务也可以达到同样的聪明程度</li>
<li><p>首先看看MusicCorp可能用到的超媒体控制有哪些</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">album</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>Give Blood<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">'/artist'</span> <span class="attr">href</span>=<span class="string">'/artist/theBrakes'</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Awesome, short, brutish, funny and loud, Must buy!<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">'/instantpurchase'</span> <span class="attr">href</span>=<span class="string">'/instantPurchase/1234'</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">album</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>这个文档中存在两个超媒体控制，读取该文档的客户端服务需要知道，应该从rel为artist的链接中获取作者信息，而从rel为instantpurchase中获取购买链接</p>
</li>
<li>作为一个客户端服务，我们不需要知道购买专辑的URI，只需要访问专辑资源，找到其购买链接，然后访问它即可。购买🐕链接的位置可能会改变，URI也可能会改变，URI也可能会变。但是客户端不会在意这些，这会使得客户端和服务端之间实现了松耦合</li>
<li>这样底层细节就被很快地隐藏起来，我们可以随意改变链接的展现形式，只要客户端服务仍然能够通过特定的协议找到它即可</li>
<li>使用这些链接来对客户端和服务端进行解耦，从长期来看有着很显著的好处，因为你不需要一再调整客户端代码来匹配服务端的修改</li>
</ul>
<p>这种方式有一个缺点</p>
<ul>
<li>客户端和服务端之间的通信次数会变多，因为客户端需要不断地发现链接、请求、再发现链接，直到找到自己想要进行的那个操作</li>
</ul>
<h4 id="4-7-3-JSON、XML还是其他"><a href="#4-7-3-JSON、XML还是其他" class="headerlink" title="4.7.3 JSON、XML还是其他"></a>4.7.3 JSON、XML还是其他</h4><p>基于HTTP的REST主要提供两种响应形式，一种是XML的，另一种是JSON的</p>
<p>JSON更加简单，内容更紧凑</p>
<p>XML可以使用链接进行超媒体控制</p>
<h4 id="4-7-4-留心过多的约定"><a href="#4-7-4-留心过多的约定" class="headerlink" title="4.7.4 留心过多的约定"></a>4.7.4 留心过多的约定</h4><p>由于REST越来越流行，帮助我们构建RESTFul Web服务的框架也随之流行起来。然而有些工具内在的耦合性所带来的痛苦会远远大于从一开始就消除概念之间的耦合所需要的代价</p>
<p>一种比较很有效的模式是先设计外部接口，等到外部接口稳定以后再实现微服务内部的数据持久化。在此期间，简单地将实体持久化到本地磁盘的文件上。这样做可以保证服务的接口是由消费者的需求驱动出现的，从而避免数据存储方式对外部接口的影响。</p>
<h4 id="4-7-5-基于HTTP的REST的缺点"><a href="#4-7-5-基于HTTP的REST的缺点" class="headerlink" title="4.7.5 基于HTTP的REST的缺点"></a>4.7.5 基于HTTP的REST的缺点</h4><ol>
<li>易用性: 实现超媒体控制基本靠自己</li>
<li>性能上的问题</li>
<li>HTTP对于低延迟通信来说不是好的选择</li>
<li>不支持高级的序列化和反序列化机制</li>
</ol>
<h3 id="4-8-实现基于事件的异步协作方式"><a href="#4-8-实现基于事件的异步协作方式" class="headerlink" title="4.8 实现基于事件的异步协作方式"></a>4.8 实现基于事件的异步协作方式</h3><h4 id="4-8-1-技术选择"><a href="#4-8-1-技术选择" class="headerlink" title="4.8.1 技术选择"></a>4.8.1 技术选择</h4><p>主要有两个部分要考虑: 微服务发布事件机制和消费者接收事件机制</p>
<p>一种实现方式是使用像RabbitMQ这样的消息代理</p>
<ul>
<li>生产者(producer)使用API向代理发布事件</li>
<li>代理也可以向消费者提供订阅服务，并在事件发生时通知消费者</li>
<li>这种代理甚至可以跟踪消费者的状态，比如标记哪些消息是被消费者已经消费过的</li>
<li>这种系统通常具有很好的伸缩性和松耦合</li>
<li>但是会增加开发流程的复杂度，因为需要一个额外的消息代理系统才能开发及测试服务</li>
</ul>
<p>另一种方法是使用HTTP来传播事件</p>
<ul>
<li>ATOM是一个符合REST规范的协议</li>
<li>可以通过它提供资源聚合(feed)的发布服务，而且有很多现成的客户端库可以用来消费该聚合</li>
<li>当客户服务发生改变时，只需要简单地向该聚合发布一个事件即可，消费者会轮询该聚合以查看变化</li>
</ul>
<h4 id="4-8-2-异步架构的复杂性"><a href="#4-8-2-异步架构的复杂性" class="headerlink" title="4.8.2 异步架构的复杂性"></a>4.8.2 异步架构的复杂性</h4><p>事件驱动的系统耦合度很低而且伸缩性很好，但是这种编程风格会导致一定的复杂性</p>
<ul>
<li>需要考虑响应返回时需要怎么处理</li>
<li>该响应是否成功返回到发送消息的节点，如果是的话，节点服务停止了怎么办，如果不是，是否需要把消息事先存储在某个其他地方，以便做相应处理</li>
</ul>
<h3 id="4-9-服务即状态机"><a href="#4-9-服务即状态机" class="headerlink" title="4.9 服务即状态机"></a>4.9 服务即状态机</h3><p>服务应该根据限界上下文进行划分，我们的<code>Costomer</code>微服务应该拥有与这个上下文中行为相关的所有逻辑</p>
<p>当消费者想对<code>Costomer</code>进行修改时，它会向<code>Costomer</code>服务发送一个合适的请求。<code>Costomer</code>服务根据自己的逻辑决定是否接收该请求。<code>Costomer</code>服务控制了所有与<code>Costomer</code>生命周期相关的事件。我们想要避免简单地对CRUO进行封装的贫血服务。如果出现了在<code>Costomer</code>服务之外与其进行相关的修改的情况，就失去了内聚性</p>
<h3 id="4-10-响应式扩展"><a href="#4-10-响应式扩展" class="headerlink" title="4.10 响应式扩展"></a>4.10 响应式扩展</h3><p>响应式扩展(Reactive extensions, Rx)提供了一种机制，在此之上，你可以把多个调用的结果组装起来并在此基础上执行操作。调用本身可以是阻塞的或者非阻塞的。Rx改变了传统的流程，以往我们会获取一些数据，然后基于此进行操作，现在你可以做的是简单的对操作的结果进行观察，结果会根据相关数据的改变自动更新</p>
<h3 id="4-11-微服务世界中的DRY和代码重用的危险"><a href="#4-11-微服务世界中的DRY和代码重用的危险" class="headerlink" title="4.11 微服务世界中的DRY和代码重用的危险"></a>4.11 微服务世界中的DRY和代码重用的危险</h3><p>Don’t Repeat Yourself.虽然从字面上看DRY是避免重复代码，但其更精确的定义是避免系统行为和知识的重复。这是很合理的建议，如果想要修改的部分在系统中有重复的话，就很容易漏掉某些部分的修改，从而导致bug</p>
<p>使用DRY可以得到重用性比较好的代码。把重复代码抽取出来，然后就可以在多个地方调用。但这种方法在微服务架构中是很危险的</p>
<p>建议是在微服务内部不要违反DRY，在跨服务的情况下可以适当违反DRY</p>
<p>Netflix对客户端库的处理方式是: 客户端库处理类似服务发现、故障模式、日志等方面的工作，而这些工作与服务本身的职责没有什么关系</p>
<h3 id="4-12-按引用访问"><a href="#4-12-按引用访问" class="headerlink" title="4.12 按引用访问"></a>4.12 按引用访问</h3><p>传递实体时，无法保证其他人是否对资源做了修改，导致此实体已失效，所以要传递引用来进行验证</p>
<h3 id="4-13-版本管理"><a href="#4-13-版本管理" class="headerlink" title="4.13 版本管理"></a>4.13 版本管理</h3><p>微服务的版本管理比较复杂。大家担心服务的接口难免发生变化，那么如何管理这些变化呢</p>
<h4 id="4-13-1-尽可能延迟"><a href="#4-13-1-尽可能延迟" class="headerlink" title="4.13.1 尽可能延迟"></a>4.13.1 尽可能延迟</h4><p>减少破坏性修改影响的最好办法是尽量不做这样的修改。比如数据库集成很容易引入破坏性的修改，但是REST就好的多</p>
<p>另一个延迟破坏性修改的关键是客户端要灵活地响应服务端，客户端尽可能灵活地相应服务端这点符合Postel法则(鲁棒性法则)。该法则认为，系统中地每个模块都应该”宽进严出”，即对自己发送的东西要严格，对接受的东西要宽容</p>
<h4 id="4-13-2-及早发现破坏性修改"><a href="#4-13-2-及早发现破坏性修改" class="headerlink" title="4.13.2 及早发现破坏性修改"></a>4.13.2 及早发现破坏性修改</h4><p>即使使用最好的技术，也难以避免破坏性修改的出现。建议使用消费者驱动的契约来及早定位这些问题</p>
<h4 id="4-13-3-使用语义化的版本管理"><a href="#4-13-3-使用语义化的版本管理" class="headerlink" title="4.13.3 使用语义化的版本管理"></a>4.13.3 使用语义化的版本管理</h4><p>如果一个客户端能够仅仅通过查看服务的版本号，就知道它是否能够与之进行集成，那就太棒了。语义化版本管理就是一种能够支持这种方式的规则说明</p>
<p>语义化版本管理的每个版本号遵循这样的格式</p>
<ul>
<li>MAJOR: 包含向后不兼容的修改</li>
<li>MINOR: 有新功能增加，但是向后兼容</li>
<li>PATCH: 对已有功能的缺陷修复</li>
</ul>
<h4 id="4-13-4-不同的接口共存"><a href="#4-13-4-不同的接口共存" class="headerlink" title="4.13.4 不同的接口共存"></a>4.13.4 不同的接口共存</h4><p>我们不想强迫客户端随着服务器一起升级，因为希望微服务可以独立于彼此进行发布。所以可以在同一个服务上使新接口和老接口同时存在</p>
<h4 id="4-13-5-同时使用多个版本的服务"><a href="#4-13-5-同时使用多个版本的服务" class="headerlink" title="4.13.5 同时使用多个版本的服务"></a>4.13.5 同时使用多个版本的服务</h4><p>可以同时运行不同版本的服务，然后把老用户路由到老版本的服务，而新用户可以看到新版本的服务</p>
<h3 id="4-14-用户界面"><a href="#4-14-用户界面" class="headerlink" title="4.14 用户界面"></a>4.14 用户界面</h3><p>用户界面是连接各个微服务的工具，而只有把各个服务集成起来才能真正为用户创造价值</p>
<h4 id="4-14-1-API组合"><a href="#4-14-1-API组合" class="headerlink" title="4.14.1 API组合"></a>4.14.1 API组合</h4><p>假设我们的服务彼此之间已经通过XML或者JSON通信了，那么可以让用户界面直接与这个API进行交互</p>
<p><img src="/2019/06/27/微服务设计-4-集成/0627_0.png" alt=""></p>
<p>这种方式的问题是</p>
<ol>
<li>很难为不同的设备定制不同的响应</li>
<li>谁来创建用户界面，如果UI是另一个团队创建的，那么可能会退回到以前那种分层合作模式</li>
</ol>
<h4 id="4-14-2-UI片段的组合"><a href="#4-14-2-UI片段的组合" class="headerlink" title="4.14.2 UI片段的组合"></a>4.14.2 UI片段的组合</h4><p>另一种方法是直接让服务暴露一部分UI，然后只需要简单地将这些片段组合在一起就可以创建出整体UI</p>
<p><img src="/2019/06/27/微服务设计-4-集成/0627_1.png" alt=""></p>
<p>这种方法的关键优势是，修改服务的团队同时可以维护这些UI片段，允许我们快速完成修改</p>
<p>这种方式的问题是</p>
<ol>
<li>无法保证用户体验的一致性</li>
<li>原生应用和胖客户端可能无法消费服务端提供的UI组件。解决方式是在原生应用中嵌入HTML来重用这些服务端组件</li>
<li>有时候服务提供概念的能力难以嵌入到小部件或界面中</li>
</ol>
<h4 id="4-14-3-为后端服务的前端"><a href="#4-14-3-为后端服务的前端" class="headerlink" title="4.14.3 为后端服务的前端"></a>4.14.3 为后端服务的前端</h4><p>使用服务端的聚合接口或API入口，该入口可以对多个后端调用进行编排，并为不同设备提供定制化内容</p>
<p><img src="/2019/06/27/微服务设计-4-集成/0627_2.png" alt=""></p>
<p>一种更好的方法是保证这样的后端只为一个应用或用户界面服务</p>
<p><img src="/2019/06/27/微服务设计-4-集成/0627_3.png" alt=""></p>
<p>这种模式叫做BFF(Backends For Frontends, 为前端服务的后端)。这一层专门为前端提供服务，它也是用户界面的一部分，尽管它位于服务器端，但是业务逻辑不要泄漏到这一层中</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/21/微服务设计-3-如何建模服务/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="T0UGH(GuiPing Wang)">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://i.loli.net/2020/03/21/WAKimNUecFR64uo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="打怪升级日常">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/21/微服务设计-3-如何建模服务/" itemprop="url">[微服务设计][3][如何建模服务]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-06-21T17:22:00+08:00">
                2019-06-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/微服务设计/" itemprop="url" rel="index">
                    <span itemprop="name">微服务设计</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/06/21/微服务设计-3-如何建模服务/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/06/21/微服务设计-3-如何建模服务/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="3-如何建模服务"><a href="#3-如何建模服务" class="headerlink" title="3 如何建模服务"></a>3 如何建模服务</h2><blockquote>
<p>对手的论证让我想到了异教徒。当别人问异教徒世界是由什么支撑时，他说:”一只乌龟。”别人再问他:”那乌龟是由什么支撑呢?”他回答:”另一只乌龟。”</p>
</blockquote>
<h3 id="3-1-什么样的服务是好服务"><a href="#3-1-什么样的服务是好服务" class="headerlink" title="3.1 什么样的服务是好服务"></a>3.1 什么样的服务是好服务</h3><h4 id="3-1-1-松耦合"><a href="#3-1-1-松耦合" class="headerlink" title="3.1.1 松耦合"></a>3.1.1 松耦合</h4><p>如果做到服务之间的松耦合，那么修改一个服务就不需要修改另一个服务。使用微服务最重要的一点就是，能够独立修改及部署单个服务而不需要修改系统的其他部分</p>
<p>什么会导致解耦合呢？一个典型的错误是，使用紧耦合的方式做服务之间的集成，从而使得一个服务的修改会招致其消费者的修改</p>
<p>一个松耦合的服务应该尽可能少地知道与之协作地那些服务地信息，这也意味着，应该限制两个服务之间不同调用形式的数量，因为除了潜在的性能问题之外，过度的通信可能会导致紧耦合</p>
<h4 id="3-1-2-高内聚"><a href="#3-1-2-高内聚" class="headerlink" title="3.1.2 高内聚"></a>3.1.2 高内聚</h4><p>我们希望把相关的行为聚集在一起，把不相关的行为放到别处。如果要改变某一个行为的话，最好能够只在一个地方进行修改，然后就可以尽快地发布。如果需要在很多不同地地方做这些修改，那么可能需要同时发布多个微服务才能交付这个功能。在多个不同的地方进行修改会很慢，同时部署多个服务的风险也很高</p>
<h3 id="3-2-限界上下文"><a href="#3-2-限界上下文" class="headerlink" title="3.2 限界上下文"></a>3.2 限界上下文</h3><p>Eric Evans认为:”任何一个给定的领域都包含多个限界上下文，每个限界上下文中的模型分为两部分，一部分不需要与外界通信，另一部分需要，每个限界上下文都有明确的接口，该接口决定了它会暴露哪些模型给其他的上下文。”</p>
<p>微服务应该清晰的与限定上下文保持一致</p>
<p><img src="/2019/06/21/微服务设计-3-如何建模服务/0621_1.png" alt=""></p>
<h4 id="3-2-1-共享的隐藏模型"><a href="#3-2-1-共享的隐藏模型" class="headerlink" title="3.2.1 共享的隐藏模型"></a>3.2.1 共享的隐藏模型</h4><p>不应该盲目地将一个模型全部暴露出去，所以对于某个模型，存在内部和外部两种表示方式</p>
<h4 id="3-2-1-模块和服务"><a href="#3-2-1-模块和服务" class="headerlink" title="3.2.1 模块和服务"></a>3.2.1 模块和服务</h4><p>在同一个进程内使用模块可以减少耦合，所以一旦你发现领域内部的限界上下文(服务)，一定要使用模块对其进行建模。</p>
<h4 id="3-2-3-过早划分"><a href="#3-2-3-过早划分" class="headerlink" title="3.2.3 过早划分"></a>3.2.3 过早划分</h4><p>将一个已有的代码块划分为微服务，要比从头开始构建微服务简单很多，所以不建议过早划分</p>
<h3 id="3-3-业务功能"><a href="#3-3-业务功能" class="headerlink" title="3.3 业务功能"></a>3.3 业务功能</h3><p>当思考组织内的限界上下文时，应该从这些上下文能够提供的功能考虑。比如，仓库的一个功能是提供当前的库存清单，财务上下文能提供月末账单或者为一个新招的员工创建工资单。为了实现这些功能，可能需要交换存储信息的模型</p>
<h3 id="3-4-逐步划分上下文"><a href="#3-4-逐步划分上下文" class="headerlink" title="3.4 逐步划分上下文"></a>3.4 逐步划分上下文</h3><p>一开始你会识别一些粗粒度的限界上下文，而这些限界上下文可能又包含一些嵌套的限界上下文。例如，可以将仓库分解为:订单管理、库存管理、货物接受等</p>
<p>可以使嵌套上下文不直接对外可见。对于外界，它们用的还是仓库的功能，但发出的请求其实被透明地映射到了两个或多个服务上。</p>
<p><img src="/2019/06/21/微服务设计-3-如何建模服务/0621_3.png" alt=""></p>
<h3 id="3-5-关于业务概念的沟通"><a href="#3-5-关于业务概念的沟通" class="headerlink" title="3.5 关于业务概念的沟通"></a>3.5 关于业务概念的沟通</h3><p>如果把系统分解为限界上下文的话，对于某个功能所做的修改，更倾向于局限在一个单独的微服务边界之内，这样就减少了修改的范围，并能够更快地进行部署</p>
<h3 id="3-6-技术边界"><a href="#3-6-技术边界" class="headerlink" title="3.6 技术边界"></a>3.6 技术边界</h3><p>按照地理位置或者技术接缝对单块系统进行划分是不合理的，例如下图</p>
<p><img src="/2019/06/21/微服务设计-3-如何建模服务/0621_2.png" alt=""></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/21/微服务设计-2-演化式架构师/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="T0UGH(GuiPing Wang)">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://i.loli.net/2020/03/21/WAKimNUecFR64uo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="打怪升级日常">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/21/微服务设计-2-演化式架构师/" itemprop="url">[微服务设计][2][演化式架构师]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-06-21T16:03:46+08:00">
                2019-06-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/微服务设计/" itemprop="url" rel="index">
                    <span itemprop="name">微服务设计</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/06/21/微服务设计-2-演化式架构师/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/06/21/微服务设计-2-演化式架构师/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="2-演化式架构师"><a href="#2-演化式架构师" class="headerlink" title="2 演化式架构师"></a>2 演化式架构师</h2><p>在微服务架构下，我们需要做一些决定，比如</p>
<ol>
<li>应该使用多少种不同的技术</li>
<li>不同的团队是否应该使用不同的编码规范</li>
<li>是应该合并多个服务还是把一个服务拆分为多个</li>
</ol>
<h3 id="2-1-不准确的比较"><a href="#2-1-不准确的比较" class="headerlink" title="2.1 不准确的比较"></a>2.1 不准确的比较</h3><ul>
<li><p>架构师的重要职责</p>
<ol>
<li>确保团队有相同的技术愿景，以帮助我们向客户交付他们想要的系统</li>
<li>保证该系统适合开发人员在其上工作</li>
</ol>
</li>
<li><p>我们把自己称为软件工程师(engineer)或者架构师(architect)，但是对我们来说，工程师和架构师的精确度和纪律性是遥不可及的。建筑和桥梁倒塌的次数要比我们的程序崩溃的次数少的多</p>
</li>
<li><p>我们要创造的东西从设计上说就是要足够灵活，有很好的适应性，并且能够根据客户的需求进行演化</p>
</li>
<li><p>在我们这个行业。这种建筑师的视角会导致一些很糟糕的实践，人们视图通过大量的图表和文档创建出一个完美的方案，而忽略了很多基础性的未知因素。使用这种方式会导致人们很难真正理解实现起来的难度，甚至不知道这个设计能否奏效，想要对系统了解更多之后再对设计进行修改就更不可能了</p>
</li>
</ul>
<h3 id="2-2-架构师的演化视角"><a href="#2-2-架构师的演化视角" class="headerlink" title="2.2 架构师的演化视角"></a>2.2 架构师的演化视角</h3><ul>
<li><p>我们应该设计出一个合理的框架，在这个框架下可以慢慢演化出正确的系统，并且一旦我们学到了更多知识，应该可以很容易地应用到系统中</p>
</li>
<li><p>一个可以和IT架构师类比的角色: 城市规划师</p>
</li>
<li><p>当用户对软件提出变更需求时，我们需要对其进行响应并作出相应的改变。未来的变化很难预见，所以与其对所有变化的可能性进行预测，不如做一个允许变化的计划。为此，应该避免对所有事情进行过于详尽的设计</p>
</li>
</ul>
<h3 id="2-3-分区"><a href="#2-3-分区" class="headerlink" title="2.3 分区"></a>2.3 分区</h3><ul>
<li><p>区域的概念: 区域是我们的服务边界，或者是一些粗粒度的服务群组</p>
</li>
<li><p>我们应该考虑不同的服务之间怎么交互，或者说保证我们能够对整个系统的健康状态进行监控。不应过度介入细节</p>
</li>
<li><p>很多组织采用微服务是为了使团队的自治性最大化</p>
</li>
<li><p>每个服务内部可以允许团队自己选择不同的技术栈或者数据存储技术，但是也不会无限制地允许团队选择任意技术栈</p>
</li>
<li><p>但是我们要保证服务之间的交互是可控的，比如一个服务决定通过<code>HTTP</code>暴露<code>REST</code>接口，另一个用的是<code>protocol buffers</code>，第三个用的是<code>Java RMI</code>，这种设计就是糟糕的</p>
</li>
</ul>
<h3 id="2-4-一个原则性的方法"><a href="#2-4-一个原则性的方法" class="headerlink" title="2.4 一个原则性的方法"></a>2.4 一个原则性的方法</h3><blockquote>
<p>规划对于智者来说是指导，对于愚蠢者来说是遵从</p>
</blockquote>
<h4 id="2-4-1-战略目标"><a href="#2-4-1-战略目标" class="headerlink" title="2.4.1 战略目标"></a>2.4.1 战略目标</h4><ul>
<li>通常我们不需要定义战略目标，战略目标层次一般很高，关心的是团队的走向问题</li>
</ul>
<h4 id="2-4-2-原则"><a href="#2-4-2-原则" class="headerlink" title="2.4.2 原则"></a>2.4.2 原则</h4><ul>
<li>为了和更大的目标保持一致，我们会提出一些具体的规则，称之为原则</li>
<li>例如，如果组织的一个目标是在其他国家快速增长业务，我们需要使用的原则可能是，整个系统必须能够方便的部署在相应的国家</li>
</ul>
<h4 id="2-4-3-实践"><a href="#2-4-3-实践" class="headerlink" title="2.4.3 实践"></a>2.4.3 实践</h4><ul>
<li><p>我们通过相应的实践来保证原则能够得到实施，这些实践能够指导我们如何完成任务</p>
</li>
<li><p>通常这些实践都是技术相关的，而且都是比较底层的，所以任何一个开发人员都能够理解</p>
</li>
<li><p>这些实践包括</p>
<ol>
<li>代码规范</li>
<li>日志数据集中捕获</li>
<li>或者<code>HTTP/REST</code>作为标准集成风格等</li>
</ol>
</li>
</ul>
<h4 id="2-4-4-一个例子"><a href="#2-4-4-一个例子" class="headerlink" title="2.4.4 一个例子"></a>2.4.4 一个例子</h4><p><img src="/2019/06/21/微服务设计-2-演化式架构师/0621_0.png" alt=""></p>
<h3 id="2-5-要求的标准"><a href="#2-5-要求的标准" class="headerlink" title="2.5 要求的标准"></a>2.5 要求的标准</h3><ul>
<li>我们需要给出一个好服务的特点<ul>
<li>它需要有什么样的能力才能保证系统是可控的</li>
<li>并且它除了问题不会导致系统瘫痪</li>
</ul>
</li>
</ul>
<h4 id="2-5-1-监控"><a href="#2-5-1-监控" class="headerlink" title="2.5.1 监控"></a>2.5.1 监控</h4><ul>
<li>建议确保所有的服务使用先沟通的方式报告健康状况及其与监控相关的数据</li>
</ul>
<h4 id="2-5-2-接口"><a href="#2-5-2-接口" class="headerlink" title="2.5.2 接口"></a>2.5.2 接口</h4><ul>
<li>选用少数几种明确的接口技术有助于新消费者的集成。使用一种标准方式很好，两种也不太坏，但是20种不同的集成技术就太糟糕了</li>
</ul>
<h4 id="2-5-3-架构安全性"><a href="#2-5-3-架构安全性" class="headerlink" title="2.5.3 架构安全性"></a>2.5.3 架构安全性</h4><ul>
<li><p>一个运行异常的服务可能会毁了整个系统，而这种后果是我们无法承担的，所以，必须保证每个服务都可以应对下游服务的错误请求</p>
</li>
<li><p>你可以至少保证每个下游服务使用它们自己的连接池，进一步让每个服务使用一个断路器</p>
</li>
<li><p>我们应该对以下几种请求做不同的处理可以帮助系统及时失败</p>
<ol>
<li>正常并且被正常处理的请求</li>
<li>错误请求，并且服务识别了它是错误的，但什么都没做</li>
<li>被访问的服务宕机了，所以无法判断请求</li>
</ol>
</li>
</ul>
<h3 id="2-6-代码治理"><a href="#2-6-代码治理" class="headerlink" title="2.6 代码治理"></a>2.6 代码治理</h3><ul>
<li>在各个服务中引入标准的做法是提供范例和服务代码模板</li>
</ul>
<h4 id="2-6-1-范例"><a href="#2-6-1-范例" class="headerlink" title="2.6.1 范例"></a>2.6.1 范例</h4><ul>
<li><p>开发人员更喜欢可以查看和运行的代码，如果你有一些很好的实践希望别人采纳，那么给出一系列的代码范例会很有帮助</p>
</li>
<li><p>如果在系统中人们有比较好的代码范例可以模仿，那么他们就不会错的太离谱</p>
</li>
</ul>
<h4 id="2-6-2-服务代码模板"><a href="#2-6-2-服务代码模板" class="headerlink" title="2.6.2 服务代码模板"></a>2.6.2 服务代码模板</h4><ul>
<li><p>当开发人员想要实现一个新功能时，所有实现核心属性的那些代码都应该是现成的</p>
</li>
<li><p><code>Dropwizard</code>和<code>Karyon</code>是两个基于<code>JVM</code>的开源微容器。它们会自动下载一系列第三方库，这些库提供一些特性，比如健康检查、HTTP服务、提供指标数据接口等</p>
</li>
<li><p>针对自己的开发实践裁剪出一个服务代码模板，不但可以提高k开发速度，还可以保证服务的质量</p>
</li>
</ul>
<h3 id="2-7-技术债务"><a href="#2-7-技术债务" class="headerlink" title="2.7 技术债务"></a>2.7 技术债务</h3><ul>
<li>我们的技术愿景本身有其道理，所以偏离了这个愿景短期可能会带来利益。但是长期来开是要付出代价的。可以使用技术债务的概念来帮助我们理解这种取舍</li>
</ul>
<h3 id="2-8-例外管理"><a href="#2-8-例外管理" class="headerlink" title="2.8 例外管理"></a>2.8 例外管理</h3><ul>
<li><p>有时，我们会决定针对某个规则破一次例，并把它记录下来，这就是例外管理</p>
</li>
<li><p>如果这样的例外出现了很多次，就可以通过修改原则和实践的方式把我们的理解固化下来</p>
</li>
<li><p>例如: 我们有个实践论述是”总是使用mysql做数据存储”，但是后来有足够的证据证明在海量存储的场景下应使用Cassandra，这时就可以进行修改:”在大部分场景下用Mysql存储，如果数据快速增长，则用Cassandra”</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/20/vue-1-vue基础/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="T0UGH(GuiPing Wang)">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://i.loli.net/2020/03/21/WAKimNUecFR64uo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="打怪升级日常">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/20/vue-1-vue基础/" itemprop="url">[vue][1][vue基础]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-06-20T13:12:26+08:00">
                2019-06-20
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/vue/" itemprop="url" rel="index">
                    <span itemprop="name">vue</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/06/20/vue-1-vue基础/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/06/20/vue-1-vue基础/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-Vue-js-基础"><a href="#1-Vue-js-基础" class="headerlink" title="1 Vue.js 基础"></a>1 Vue.js 基础</h2><p>参考</p>
<ol>
<li>《Vue.js快跑构建触手可及的高性能Web应用》</li>
<li><a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener">vue官方文档</a></li>
</ol>
<h3 id="1-1-为什么选择Vue-js"><a href="#1-1-为什么选择Vue-js" class="headerlink" title="1.1 为什么选择Vue.js"></a>1.1 为什么选择Vue.js</h3><h4 id="1-1-1-简介"><a href="#1-1-1-简介" class="headerlink" title="1.1.1 简介"></a>1.1.1 简介</h4><ul>
<li>Vue是一套用于构建用户界面的渐进式框架</li>
<li>Vue被设计为可以自底向上逐层应用</li>
<li>Vue的核心库只关注视图层<ol>
<li>便于与第三方库或既有项目整合</li>
<li>当与现代化的工具链以及各种支持类库结合使用时，Vue也完全能够为复杂的单页应用提供驱动</li>
</ol>
</li>
<li>vue实现了应用逻辑和视图逻辑的完全隔离</li>
</ul>
<h4 id="1-1-2-相同的功能用jquery和vue分别实现"><a href="#1-1-2-相同的功能用jquery和vue分别实现" class="headerlink" title="1.1.2 相同的功能用jquery和vue分别实现"></a>1.1.2 相同的功能用jquery和vue分别实现</h4><ol>
<li><p><code>vue</code>实现</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">”</span> <span class="attr">js-items</span>”&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-if</span>=<span class="string">"!items.length"</span>&gt;</span>Sorry, there are no items.<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">" item in items"</span> <span class="attr">:class</span>=<span class="string">"&#123;'is-blue':item.includes('blue')&#125;"</span>&gt;</span></span><br><span class="line">        &#123;% raw %&#125;&#123;&#123; item &#125;&#125;&#123;% endraw %&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el: <span class="string">'.js-items'</span>,</span></span><br><span class="line"><span class="undefined">        data: &#123;</span></span><br><span class="line"><span class="undefined">            items: []</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        created()&#123;</span></span><br><span class="line"><span class="javascript">            fetch(<span class="string">'https://example.com/items.json'</span>)</span></span><br><span class="line"><span class="javascript">            .then(<span class="function"><span class="params">res</span> =&gt;</span> res.json())</span></span><br><span class="line"><span class="javascript">            .then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">this</span>.items = data.items;</span></span><br><span class="line"><span class="undefined">            &#125;);</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>jquery</code>实现</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">”</span> <span class="attr">js-items</span> ”&gt;</span><span class="tag">&lt;/<span class="name">Ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        $.get (<span class="string">'https://example.com/items.json'</span>)</span></span><br><span class="line"><span class="javascript">        .then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> $itemsUl = $(<span class="string">'.js-items'</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (!data.items.length) &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> $noitems = $(<span class="string">'li'</span>);</span></span><br><span class="line"><span class="javascript">                $noitems.text(<span class="string">'Sorry, there are no items.'</span>);</span></span><br><span class="line"><span class="undefined">                $itemUI.append($noitems);</span></span><br><span class="line"><span class="javascript">            &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="javascript">                data.items.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> $newItem = $(<span class="string">'li'</span>);</span></span><br><span class="line"><span class="undefined">                    $newItem.text(item);</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">if</span>(item.includes(<span class="string">'blue'</span>))&#123;</span></span><br><span class="line"><span class="javascript">                        $newItem.addClass(<span class="string">'is-blue'</span>);</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                    $itemUI.append($newItem);</span></span><br><span class="line"><span class="undefined">                &#125;)</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="1-2-安装和设置"><a href="#1-2-安装和设置" class="headerlink" title="1.2 安装和设置"></a>1.2 安装和设置</h3><ul>
<li>vue-loader:是一个 <code>webpack</code> 的加载器，允许你将一个组件的所有 <code>HTML</code> 、<code>JavaScript</code> 和<code>CSS</code>代码编写到同一个文件中</li>
</ul>
<h3 id="1-3-模板-Template-、数据-Data-和指令-Directive"><a href="#1-3-模板-Template-、数据-Data-和指令-Directive" class="headerlink" title="1.3 模板(Template)、数据(Data)和指令(Directive)"></a>1.3 模板(Template)、数据(Data)和指令(Directive)</h3><ul>
<li><code>Vue</code>的核心是将数据显示在页面上，这一功能通过模板实现。为正常的<code>HTML</code>添加特殊的属性-被称作指令-借助它来告诉<code>Vue</code>我们想要实现的效果以及如何处理提供给它数据。  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">"hours &lt; 12"</span>&gt;</span>早上好！<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">"hours &gt;= 12 &amp;&amp; hours &lt; 18"</span>&gt;</span>中午好！<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">"hours &gt;= 18"</span>&gt;</span>晚上好！<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">        data: &#123;</span></span><br><span class="line"><span class="javascript">            hours: <span class="keyword">new</span> <span class="built_in">Date</span>().getHours()</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="1-4-v-if-vs-v-show"><a href="#1-4-v-if-vs-v-show" class="headerlink" title="1.4 v-if vs v-show"></a>1.4 v-if vs v-show</h3><ul>
<li><p><code>v-if</code>: 假如取值为假，则DOM不会生成</p>
</li>
<li><p><code>v-show</code>: 假如取值为假，DOM会生成只是此DOM被隐藏</p>
</li>
<li><p>使用 <code>v-if</code> 会有性能开销。每次插入或者移除元素时都必须要生成元素内部的 <code>DOM</code> 树，这在某些时候是非常大的工作量。而 <code>v-show</code> 除了在初始创建开销时之外没有额外的开销。如果希望频繁地切换某些内容，那么<code>v-show</code>会是最好的选择。</p>
</li>
</ul>
<h3 id="1-5-模板中的循环-v-for"><a href="#1-5-模板中的循环-v-for" class="headerlink" title="1.5 模板中的循环(v-for)"></a>1.5 模板中的循环(v-for)</h3><ul>
<li><p><code>v-for</code>指令通过遍历一个数组或者对象，将指令所绑定的元素循环输出到页面上</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span> =<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"dog in dogs"</span>&gt;</span>&#123;% raw %&#125;&#123;&#123; dog &#125;&#125;&#123;% endraw %&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">    el :<span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">    data: &#123;</span></span><br><span class="line"><span class="javascript">        dogs: [<span class="string">'Rex'</span>, <span class="string">'Rove'</span>, <span class="string">'Hen'</span>, <span class="string">'Alan'</span>］</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>v-for</code>中键值的参数顺序是(value, key)</p>
</li>
</ul>
<h3 id="1-6-属性绑定-v-bind"><a href="#1-6-属性绑定-v-bind" class="headerlink" title="1.6 属性绑定(v-bind)"></a>1.6 属性绑定(v-bind)</h3><ul>
<li><p><code>v-bind</code>用于将一个值绑定在一个HTML属性上</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-bind:disabled</span>=<span class="string">"buttonDisabled"</span>&gt;</span>Test button<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el :<span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">        data: &#123;</span></span><br><span class="line"><span class="javascript">            buttonDisabled: <span class="literal">true</span></span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>v-bind</code>可以简写，直接用<code>:</code>代替</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">:disabled</span>=<span class="string">"buttonDisabled"</span>&gt;</span>Test Button<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="1-7-响应式"><a href="#1-7-响应式" class="headerlink" title="1.7 响应式"></a>1.7 响应式</h3><p>Vue监控<code>data</code>对象的变化，井在数据变化时更新DOM。</p>
<h3 id="1-8-双向数据绑定-v-model"><a href="#1-8-双向数据绑定-v-model" class="headerlink" title="1.8 双向数据绑定(v-model)"></a>1.8 双向数据绑定(v-model)</h3><ul>
<li><code>v-model</code>作用于输入框元素，将输入框的值绑定到<code>data</code>对象的对应属性上，</li>
<li>因此输入框不但会接收<code>data</code>的初始值，而且当输入内容更新时,<code>data</code>上的属性值也会更新</li>
<li>使用 <code>v-model</code> 时一定要记住，如果设置了<code>value</code>、<code>checked</code>和<code>selected</code>属性，这些属性会被忽略。如果想设置输入元素的初始值， 应该在<code>data</code>对象中设置</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"inputText"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>inputText: &#123;% raw %&#125;&#123;&#123; inputText &#125;&#125;&#123;% endraw %&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="1-9-动态设置HTML"><a href="#1-9-动态设置HTML" class="headerlink" title="1.9 动态设置HTML"></a>1.9 动态设置HTML</h3><p>如果想将HTML渲染到页面上，可以像下面这样使用<code>v-html</code>指令：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-html</span>=<span class="string">'yourHtml'</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="1-9-方法-methods"><a href="#1-9-方法-methods" class="headerlink" title="1.9 方法(methods)"></a>1.9 方法(methods)</h3><ul>
<li><p>在Vue的模板里，只要将一个函数存储为<code>methods</code>对象的一个属性，就可以在模板中使用它</p>
</li>
<li><p>关于方法中的<code>this</code></p>
<ul>
<li>在方法中，<code>this</code>指向该方怯所属的组件</li>
<li>可以使用<code>this</code>访问<code>data</code>对象的属性和其他方法</li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>当前状态: &#123;% raw %&#125;&#123;&#123; statusFromId(status) &#125;&#125;&#123;% endraw %&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">        data:&#123;</span></span><br><span class="line"><span class="undefined">            status: 2</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        methods:&#123;</span></span><br><span class="line"><span class="undefined">            statusFromId(id) &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">const</span> status= (&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="number">0</span> : <span class="string">'吃包子'</span>,</span></span><br><span class="line"><span class="javascript">                    <span class="number">1</span> : <span class="string">'睡觉'</span>,</span></span><br><span class="line"><span class="javascript">                    <span class="number">2</span> : <span class="string">'打包子'</span></span></span><br><span class="line"><span class="undefined">                &#125;)[id];</span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> status || <span class="string">'未知状态'</span> + id;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="1-10-计算属性-computed"><a href="#1-10-计算属性-computed" class="headerlink" title="1.10 计算属性(computed)"></a>1.10 计算属性(computed)</h3><h4 id="1-10-1-计算属性"><a href="#1-10-1-计算属性" class="headerlink" title="1.10.1 计算属性"></a>1.10.1 计算属性</h4><ul>
<li>计算属性介于<code>data</code>和<code>method</code>两者之间：可以像访问<code>data</code>对象的属性那样访问它，但需要以函数的方式定义它。</li>
<li>计算属性会被缓存<ul>
<li>如果在模板中多次调用一个方法，方法中的代码在每一次调用时都会执行一遍</li>
<li>但如果计算属性被多次调用，其中的代码只会执行一次，之后的每次调用都会使用被缓存的值</li>
<li>只有当计算属性的依赖、发生变化时，代码才会被再次执行<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">“</span> <span class="attr">app</span>”&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>数字的总和是:&#123;% raw %&#125;&#123;&#123; numberTotal&#125;&#125;&#123;% endraw %&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">new</span> Vue (&#123;</span></span><br><span class="line"><span class="javascript">        el:<span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">        data:&#123;</span></span><br><span class="line"><span class="undefined">            numbers: [5, 8, 3]</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        computed: &#123;</span></span><br><span class="line"><span class="undefined">            numberTotal() &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> numbers.reduce(<span class="function">(<span class="params">sum, val</span>) =&gt;</span> sum + val) ;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h4 id="1-10-2-使用data对象、方法还是计算属性"><a href="#1-10-2-使用data对象、方法还是计算属性" class="headerlink" title="1.10.2 使用data对象、方法还是计算属性"></a>1.10.2 使用data对象、方法还是计算属性</h4><ul>
<li><code>data</code> 对象最适合纯粹的数据：如果想将数据放在某处，然后在模板、方法或者计算属性中使用，那么可以把它放在<code>data</code>对象中。后面也许还会更新它。</li>
<li>当你希望为模板添加函数功能时，最好使用方法: 给方法传递数据，然后它们会对数据进行处理，最终可能返回不同的数据结果。</li>
<li>计算属性达用于执行更加复杂的表达式，这些表达式往往太长或者需要频繁地重复使用，所以不想在模板中直接使用。计算属性往往和其他计算属性或者 <code>data</code> 对象一起使用，基本上就像是 <code>data</code> 对象的一个扩展和增强版本</li>
</ul>
<h3 id="1-11-侦听器-watch"><a href="#1-11-侦听器-watch" class="headerlink" title="1.11 侦听器(watch)"></a>1.11 侦听器(watch)</h3><ul>
<li>侦听器可以监听 <code>data</code> 对象属性或者计算属性的变化。</li>
<li>侦听器使用起来很简单： 只要设置要监听的属性名就可以。</li>
<li>侦听器很适合用于处理异步操作<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">"#app"</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">        count: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    watch: &#123;</span><br><span class="line">        count()&#123;</span><br><span class="line">            <span class="comment">//变化时会调用此处</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="1-11-1-监听data对象中某个对象的属性"><a href="#1-11-1-监听data对象中某个对象的属性" class="headerlink" title="1.11.1 监听data对象中某个对象的属性"></a>1.11.1 监听data对象中某个对象的属性</h4><p>有些时候会将一整个对象存储在 <code>data</code> 对象中。为了监听这个对象的属性变化，可以在侦听器的名称中使用<code>.</code>操作符，就像访问这个对象属性一样：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    data: &#123;</span><br><span class="line">        formData: &#123;</span><br><span class="line">            username: <span class="string">""</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    watch: &#123;</span><br><span class="line">        <span class="string">'formData.username'</span>()&#123;</span><br><span class="line">            <span class="comment">//变化时会调用此处</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h4 id="1-11-2-获取旧值"><a href="#1-11-2-获取旧值" class="headerlink" title="1.11.2 获取旧值"></a>1.11.2 获取旧值</h4><p>当监听的属性发生变化时，侦听器会被传入两个参数：所监听属性的当前值和原来的旧值。这一特性可以用来了解到底发生了什么变化<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">    inputValue( val, oldVal) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(val, oldVal);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="1-11-3-深度监听"><a href="#1-11-3-深度监听" class="headerlink" title="1.11.3 深度监听"></a>1.11.3 深度监听</h4><ul>
<li>当监听一个对象时，可能想监听整个对象的变化，而不仅仅是某个属性。</li>
<li>但在默认情况下，如果你正在监听<code>formData</code>对象井且修改了<code>formData.username</code> ，对应的侦听器井不会触发，它只在<code>formData</code>对象被整个替换时触发。</li>
<li>监听整个对象被称作深度监听，通过将<code>deep</code>选项设置为<code>true</code>来开启这一特性</li>
</ul>
<h3 id="1-12-过滤器-fliter"><a href="#1-12-过滤器-fliter" class="headerlink" title="1.12 过滤器(fliter)"></a>1.12 过滤器(fliter)</h3><h4 id="1-12-1-过滤器"><a href="#1-12-1-过滤器" class="headerlink" title="1.12.1 过滤器"></a>1.12.1 过滤器</h4><ul>
<li>过滤器是一种在模板中处理数据的便捷方式</li>
<li>它们特别适合对字符串和数字进行简单的显示变化：例如，将字符串变为正确的大小写格式，或者用更容易阅读的格式显示数字。</li>
<li>可以用链式调用的方式在一个表达式中使用多个过滤器。<code>{{productOneCost | round |formatCost}}</code></li>
<li>除了在插值中使用，还可以在<code>v-bind</code> 中使用过滤器（当绑定数值到属性时）</li>
<li>也可以使用<code>Vue.filter()</code>来注册一个全局的过滤器， 而不是将过滤器逐一注册到各个组件上</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>商品一花费了：&#123;% raw %&#125;&#123;&#123;productOneCost | formatCost &#125;&#125;&#123;% endraw %&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>商品二花费了：&#123;% raw %&#125;&#123;&#123;productTwoCost | formatCost &#125;&#125;&#123;% endraw %&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>商品三花费了：&#123;% raw %&#125;&#123;&#123;productThreeCost | formatCost &#125;&#125;&#123;% endraw %&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">    el :<span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">    data: &#123;</span></span><br><span class="line"><span class="undefined">        productOneCost: 998,</span></span><br><span class="line"><span class="undefined">        productTwoCost: 2399,</span></span><br><span class="line"><span class="undefined">        productThreeCost: 5300</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    filters: &#123;</span></span><br><span class="line"><span class="undefined">        formatCost(value) &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> <span class="string">'$'</span> + (value / <span class="number">100</span>).toFixed(<span class="number">2</span>);</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="1-12-2-使用过滤器有两个注意事项。"><a href="#1-12-2-使用过滤器有两个注意事项。" class="headerlink" title="1.12.2 使用过滤器有两个注意事项。"></a>1.12.2 使用过滤器有两个注意事项。</h4><ol>
<li>过滤器是组件中唯一不能使用<code>this</code> 来访问数据或者方法的地方。</li>
<li>只可以在插值和<code>v-bind</code>指令中使用过滤器</li>
</ol>
<h3 id="1-13-使用-ref-直接访问元素-ref"><a href="#1-13-使用-ref-直接访问元素-ref" class="headerlink" title="1.13 使用 ref 直接访问元素(ref)"></a>1.13 使用 ref 直接访问元素(ref)</h3><ul>
<li>有时你会发现需要直接访问一个<code>DOM</code>元素</li>
<li>也许你正在使用一个不支持<code>Vue</code>的第三方库，或者希望做一些<code>Vue</code>自身不能完全处理的事情</li>
<li>可以使用 <code>ref</code> 直接访问元素，而不需要使用<code>querySelector</code>或者其他选择<code>DOM</code>节点的原生方法。</li>
</ul>
<h4 id="1-13-1-ref的用法"><a href="#1-13-1-ref的用法" class="headerlink" title="1.13.1 ref的用法"></a>1.13.1 ref的用法</h4><ol>
<li><p>在<code>HTML</code>中绑定<code>ref</code>属性</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">ref</span>=<span class="string">"myCanvas"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>然后在<code>js</code>中通过<code>this.$ref</code>取得DOM元素</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> canvas = <span class="keyword">this</span>.$refs.myCanvas;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="1-14-输入和事件-v-on"><a href="#1-14-输入和事件-v-on" class="headerlink" title="1.14 输入和事件(v-on)"></a>1.14 输入和事件(v-on)</h3><ul>
<li>可以使用 <code>v-on</code> 指令将事件侦听器绑定到元素上。这个指令将事件名称作为参数，然后将事件侦听器作为传入值</li>
<li><code>v-on</code> 指令同样有一个简写方式。可以将<code>v-on:click</code> 简写为<code>＠click</code> </li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app-5"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;% raw %&#125;&#123;&#123; message &#125;&#125;&#123;% endraw %&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">"reverseMessage"</span>&gt;</span>逆转消息<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> app5 = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">    el: <span class="string">'#app-5'</span>,</span></span><br><span class="line"><span class="undefined">    data: &#123;</span></span><br><span class="line"><span class="javascript">        message: <span class="string">'Hello Vue.js!'</span></span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    methods: &#123;</span></span><br><span class="line"><span class="javascript">        reverseMessage: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">this</span>.message = <span class="keyword">this</span>.message.split(<span class="string">''</span>).reverse().join(<span class="string">''</span>)</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="1-15-生命周期钩子"><a href="#1-15-生命周期钩子" class="headerlink" title="1.15 生命周期钩子"></a>1.15 生命周期钩子</h3><p><img src="/2019/06/20/vue-1-vue基础/0620_0.png" alt=""></p>
<ul>
<li><p>简介: 生命周期钩子是一系列会在组件生命周期(从组件被创建并添加到DOM到组件被销毁的整个过程的各个阶段)被调用的函数</p>
</li>
<li><p>八大生命周期钩子</p>
<ul>
<li><code>beforeCreate</code>在实例初始化前被触发。</li>
<li><code>created</code>会在实例初始化之后、被添加到DOM之前触发。</li>
<li><code>beforeMount</code>会在元素已经准备好被添加到DOM，但还没有添加的时候触发。</li>
<li><code>mounted</code>会在元素创建后触发(但并不一定已经添加到了DOM,可以用<code>nextTick</code>来保证这一点)。</li>
<li><code>beforeUpdate</code>会在由于数据更新将要对<code>DOM</code>做一些更改时触发。</li>
<li><code>updated</code>会在<code>DOM</code>的更改已经完成后触发。</li>
<li><code>beforeDestroy</code> 会在组件即将被销毁井且从DOM上移除时触发。</li>
<li><code>destroyed</code> 会在组件被销毁后触发</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/19/SSM-1-认识SSM框架和Redis/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="T0UGH(GuiPing Wang)">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://i.loli.net/2020/03/21/WAKimNUecFR64uo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="打怪升级日常">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/19/SSM-1-认识SSM框架和Redis/" itemprop="url">[SSM][1][认识SSM框架和Redis]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-06-19T00:37:54+08:00">
                2019-06-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/SSM/" itemprop="url" rel="index">
                    <span itemprop="name">SSM</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/06/19/SSM-1-认识SSM框架和Redis/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/06/19/SSM-1-认识SSM框架和Redis/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="第-1-章-认识SSM框架和Redis"><a href="#第-1-章-认识SSM框架和Redis" class="headerlink" title="第 1 章 认识SSM框架和Redis"></a>第 1 章 认识SSM框架和Redis</h2><h3 id="1-1-Spring框架"><a href="#1-1-Spring框架" class="headerlink" title="1.1 Spring框架"></a>1.1 Spring框架</h3><ul>
<li><p>Spring框架是Java应用最广的框架，它的成功来源于理念而不是技术本身</p>
</li>
<li><p>它的理念包括IoC(Inversion of Control, 反转控制)和AOP(Aspect Oriented Programming, 面向切面编程)</p>
</li>
</ul>
<h4 id="1-1-1-Spring-Ioc-简介"><a href="#1-1-1-Spring-Ioc-简介" class="headerlink" title="1.1.1 Spring Ioc 简介"></a>1.1.1 Spring Ioc 简介</h4><ul>
<li><p>IoC定义: IoC是一个容器，在Spring中，它认为所有Java资源都是JavaBean，容器的目标就是管理这些Bean和它们之间的关系</p>
</li>
<li><p>控制反转: Spring是依靠描述来完成对象的创建及其依赖关系的。这是一种被动的行为，需要的资源通过描述信息就可以得到，其中的控制权在Spring IoC容器中，它会根据描述找到使用者需要的资源，这就是控制反转的含义</p>
</li>
<li><p>好处</p>
<ul>
<li>这样做的好处是Socket接口不再依赖于某个实现类，需要使用某个实现类时我们通过配置信息就可以完成了。</li>
<li>这样想修改或者加入其他资源就可以通过配置信息完成，不需要再用<code>new</code>关键字创建对象，依赖关系也可以通过配置完成，从而完全可以即插即用地管理它们之间的关系</li>
</ul>
</li>
<li><p>Spring IoC的理念</p>
<ul>
<li>你不需要去找资源，只要向IoC容器描述所需资源，IoC自己会找到你所需要的资源，这就是Spring IoC的理念</li>
<li>这样就把Bean之间的依赖关系解耦了，更容易写出结构清晰的程序</li>
</ul>
</li>
</ul>
<h4 id="1-1-2-Spring-AOP"><a href="#1-1-2-Spring-AOP" class="headerlink" title="1.1.2 Spring AOP"></a>1.1.2 Spring AOP</h4><ul>
<li>只用OOP并不完善，还需要面向切面的编程，通过它去管理在切面上的某些对象的协作</li>
<li><p>AOP(面向切面编程)常用于数据库事务的编程</p>
<ul>
<li>在默认情况下，只要Spring接收到了异常消息，它就会将数据路的事务回滚，从而保障数据的一致性</li>
<li>一些复杂的数据库代码、try..catch等被Spring隐藏了，只需要关注业务代码，知道只要发生了异常情况，Spring就会回滚事务即可</li>
</ul>
</li>
<li><p>AOP举例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* Spring AOP 处理订单伪代码</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> order 订单</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">proceed</span><span class="params">(Order order)</span></span>&#123;</span><br><span class="line">    <span class="keyword">boolean</span> pflag = productionDept.isPass(order);</span><br><span class="line">    <span class="keyword">if</span>(pflag)&#123;</span><br><span class="line">        <span class="keyword">if</span>(financialDept.isOverBudget(order))&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"预算超额!!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="1-2-MyBatis简介"><a href="#1-2-MyBatis简介" class="headerlink" title="1.2 MyBatis简介"></a>1.2 MyBatis简介</h3><ul>
<li><p>MyBatis的优势在于灵活，它几乎可以代替JDBC，同时提供了接口编程。</p>
</li>
<li><p>目前MyBatis的数据访问层DAO(Data Access Objects)是不需要实现类的，它只需要一个接口和XML</p>
</li>
<li><p>MyBatis提供自动映射、动态SQL、级联、缓存、注解、代码和SQL分离等特性，使用方便，同时也可以对SQL进行优化</p>
</li>
<li><p>Pojo: Plain Ordinary Java Object</p>
</li>
<li><p>无论是MyBatis还是Hibernate都是依靠某种方式，将数据库的表和POJO映射起来的，这样程序员就可以操作POJO来完成相关的逻辑了</p>
</li>
</ul>
<h4 id="1-2-1-Hibernate简介"><a href="#1-2-1-Hibernate简介" class="headerlink" title="1.2.1 Hibernate简介"></a>1.2.1 Hibernate简介</h4><ul>
<li><p>要将POJO和数据库映射起来需要给这些框架提供映射规则</p>
</li>
<li><p>在MyBatis或Hibernate中可以通过XML或者通过注解来提供映射规则</p>
</li>
<li><p>ORM: 我们把POJO对象和数据库表相互映射的框架称为对象关系映射(Object Relational Mapping, ORM)框架，无论Mybatis还是Hibernate都是ORM框架</p>
</li>
<li><p>Hibernate基本不再需要编写SQL就可以通过映射关系来操作数据库，是一种全表映射的体现;MyBatis不同，它需要我们提供SQL去运行</p>
</li>
<li><p>Hibernate是将POJO和数据库表对应的映射文件，如下所示</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">!</span> <span class="attr">DOCTYPE</span> <span class="attr">hibernate-mapping</span> <span class="attr">PUBLIC</span> "<span class="attr">-</span>//<span class="attr">Hibernate</span>/<span class="attr">Hibernate</span> <span class="attr">Mapping</span> <span class="attr">DTD</span> <span class="attr">3.0</span>//<span class="attr">EN</span>" "<span class="attr">http:</span>//<span class="attr">www.hibernate.org</span>/<span class="attr">dtd</span>/<span class="attr">hibernate-mapping-3.0.dtd</span>"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"com.learn.chapter1.pojo.Role"</span> <span class="attr">table</span>=<span class="string">"t_role"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">type</span>=<span class="string">"java.lang.Integer"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"identity"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"roleName"</span> <span class="attr">type</span>=<span class="string">"string"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"role_name"</span> <span class="attr">length</span>=<span class="string">"60"</span> <span class="attr">not-null</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"note"</span> <span class="attr">type</span>=<span class="string">"string"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"note"</span> <span class="attr">length</span>=<span class="string">"512"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>首先对POJO和表t_role进行了映射配置，把两者映射起来。</li>
<li>然后，对POJO进行操作，从而影响t_role表的数据</li>
</ul>
</li>
<li><p>如何使用Hibernate操作数据库数据</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Session session = <span class="keyword">null</span>;</span><br><span class="line">Transaction tx = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="comment">//打开会话</span></span><br><span class="line">    session = HibernateUtil.getSessionFactory().openSession();</span><br><span class="line">    <span class="comment">//打开事务</span></span><br><span class="line">    tx = session.beginTransaction();</span><br><span class="line">    Role role = <span class="keyword">new</span> Role();</span><br><span class="line">    role.setId(<span class="number">1</span>);</span><br><span class="line">    role.setRoleName(<span class="string">"rolename1"</span>);</span><br><span class="line">    role.setNote(<span class="string">"note1"</span>);</span><br><span class="line">    session.save(role);<span class="comment">//保存</span></span><br><span class="line">    Role role2 = (Role)session.get(Role.class, <span class="number">1</span>);</span><br><span class="line">    role2.setNote(<span class="string">"修改备注"</span>);</span><br><span class="line">    session.update(role2);</span><br><span class="line">    System.out.println(role2.getRoleName());</span><br><span class="line">    session.delete(role2);</span><br><span class="line">    tx.commit();</span><br><span class="line">&#125;<span class="keyword">catch</span>(Exception ex)&#123;</span><br><span class="line">    <span class="keyword">if</span>(tx != <span class="keyword">null</span> &amp;&amp; tx.isActive())&#123;</span><br><span class="line">        tx.rollback();</span><br><span class="line">    &#125;</span><br><span class="line">    ex.printStackTrace();</span><br><span class="line">&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(session != <span class="keyword">null</span> &amp;&amp; session.isOpen())&#123;</span><br><span class="line">        session.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="1-2-2-MyBatis"><a href="#1-2-2-MyBatis" class="headerlink" title="1.2.2 MyBatis"></a>1.2.2 MyBatis</h4><ul>
<li><p>简介</p>
<ul>
<li>Mybatis不屏蔽SQL</li>
<li>不屏蔽SQL的优势在于，程序员可以自己指定SQL规则，无需Hibernate自动生成规则，这样可以更加精确地定义SQL，从而优化性能。</li>
<li>它更符合移动互联网高并发、大数据、高性能、高响应的要求</li>
</ul>
</li>
<li><p>MyBatis需要一个映射文件把POJO和数据库的表对应起来</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">!</span> <span class="attr">DOCTYPE</span> <span class="attr">mapper</span> <span class="attr">PUBLIC</span> "<span class="attr">-</span>//<span class="attr">mybatis.org</span>//<span class="attr">DTD</span> <span class="attr">Mapper</span> <span class="attr">3.0</span>//<span class="attr">EN</span>" "<span class="attr">http:</span>//<span class="attr">mybatis.org</span>/<span class="attr">dtd</span>/<span class="attr">mybatis-3-mapper.dtd</span>"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"roleMap"</span> <span class="attr">type</span>=<span class="string">"com.learn.chapter1.pojo.Role"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"roleName"</span> <span class="attr">column</span>=<span class="string">"role_name"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"note"</span> <span class="attr">column</span>=<span class="string">"note"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getRole"</span> <span class="attr">resultMap</span>=<span class="string">"roleMap"</span>&gt;</span></span><br><span class="line">        select id, role_name, note from t_role where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"deleteRole"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span>&gt;</span></span><br><span class="line">        select form t_role where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insertRole"</span> <span class="attr">parameterType</span>=<span class="string">"com.learn.chapter1.pojo.Role"</span>&gt;</span></span><br><span class="line">        update t_role set</span><br><span class="line">        role_name = #&#123;roleName&#125;</span><br><span class="line">        note = #&#123;note&#125;</span><br><span class="line">        where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>这里的resultMap元素用于定义映射规则</li>
<li>增删改查对应着insert、delete、select、update四大元素，十分明了</li>
</ul>
</li>
<li><p>mapper元素中的namespace属性，它要和一个接口的全限定名一致，而里面的SQL的id也需要和接口定义的方法完全一致。Mybatis接口文件如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.learn.chapter1.mapper;</span><br><span class="line"><span class="keyword">import</span> com.learn.chapter1.pojo.Role;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">RoleMapper</span></span>&#123;</span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="keyword">public</span> Role <span class="title">getRole</span><span class="params">(Integer id)</span></span>;</span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">deleteRole</span><span class="params">(Integer id)</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">insertRole</span><span class="params">(Role role)</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">updateRole</span><span class="params">(Role role)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>定义完这个MyBatis映射文件后，并不需要定义一个实现类</li>
</ul>
</li>
<li><p>MyBatis如何操作数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">SqlSession sqlSession = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    sqlSession = MyBatisUtil.getSqlSession();</span><br><span class="line">    RoleMapper roleMapper = sqlSession.getMapper(RoleMapper.class);</span><br><span class="line">    Role role = roleMapper.getRole(<span class="number">1</span>);<span class="comment">//查询</span></span><br><span class="line">    System.out.printlen(role.getRoleName());</span><br><span class="line">    role.setRoleName(<span class="string">"update_role_name"</span>);</span><br><span class="line">    roleMapper.updateRole(role);</span><br><span class="line">    Role role2 = <span class="keyword">new</span> Role();</span><br><span class="line">    role2.setNote(<span class="string">"note2"</span>);</span><br><span class="line">    role2.setRoleName(<span class="string">"role2"</span>);</span><br><span class="line">    roleMapper.insertRole(role);</span><br><span class="line">    roleMapper.deleteRole(<span class="number">5</span>);</span><br><span class="line">    sqlSession.commit();</span><br><span class="line">&#125;<span class="keyword">catch</span>(Exception ex)&#123;</span><br><span class="line">    ex.printStackTrace();</span><br><span class="line">    <span class="keyword">if</span>(sqlSession != <span class="keyword">null</span>)&#123;</span><br><span class="line">        sqlSession.rollback();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(sqlSession != <span class="keyword">null</span>)&#123;</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="1-2-3-比较Hibernate和MyBatis"><a href="#1-2-3-比较Hibernate和MyBatis" class="headerlink" title="1.2.3 比较Hibernate和MyBatis"></a>1.2.3 比较Hibernate和MyBatis</h4><ul>
<li><p>Hibernate优缺点</p>
<ul>
<li>优点<ol>
<li>不需要编写大量的SQL，就可以完成映射</li>
<li>同时提供了日志、缓存、级联等特性</li>
<li>此外提供了HQL(Hibernate Query Language)对POJO进行操作，十分方便</li>
</ol>
</li>
<li>缺点<ol>
<li>由于无须SQL，当多表关联超过3个的时候，通过Hibernate的级联会造成太多性能的丢失</li>
<li>遇到存储过程，Hibernate只能就此作罢</li>
<li>不适用性能要求苛刻的系统</li>
</ol>
</li>
</ul>
</li>
<li><p>MyBatis优缺点</p>
<ul>
<li>优点<ol>
<li>MyBatis可以自由书写SQL、支持动态SQL、处理列表、动态生成表名、支持存储过程</li>
<li>可以灵活的定义查询语句，满足各类需求和性能优化的需要</li>
</ol>
</li>
<li>缺点<ol>
<li>要编写SQL和映射规则，其工作量大于Hibernate</li>
<li>它支持的工具也很有限，不能像Hibernate那样有许多的插件可以帮助生成映射代码和关联关系</li>
</ol>
</li>
</ul>
</li>
<li><p>使用场景</p>
<ul>
<li>对于性能要求不太严苛的系统，比如管理系统、ERP等推荐使用Hibernate</li>
<li>对于性能要求高、响应快、灵活的系统推荐使用MyBatis</li>
</ul>
</li>
</ul>
<h3 id="1-3-SpringMVC-简介"><a href="#1-3-SpringMVC-简介" class="headerlink" title="1.3 SpringMVC 简介"></a>1.3 SpringMVC 简介</h3><ul>
<li><p>长期以来Struts2与Spring的结合一直存在很多问题，比如兼容性和类臃肿</p>
</li>
<li><p>SpringMVC结构层次清晰，类比较简单，并且与Spring的核心IoC和AOP无缝衔接</p>
</li>
<li><p>MVC模式把应用程序分成不同的方面，同时提供了这些元素之间的松耦合</p>
<ul>
<li>Model(模型): 封装了应用程序的数据和由它们组成的POJO</li>
<li>View(视图): 负责吧模型数据渲染到视图上，将数据以一定的形式展现给用户</li>
<li>Controller(控制器): 负责处理用户请求，并建立适当的模型把它传递给视图渲染</li>
</ul>
</li>
<li><p>SpringMVC的重点在于它的流程和一些重要的注解，包括控制器、视图解析器、视图等重要内容</p>
</li>
</ul>
<h3 id="1-4-NoSQL与Redis"><a href="#1-4-NoSQL与Redis" class="headerlink" title="1.4 NoSQL与Redis"></a>1.4 NoSQL与Redis</h3><ul>
<li><p>NoSQL(Not Only SQL)</p>
<ul>
<li>它具备一定持久层的功能<ul>
<li>它存储的数据是半结构化的，这就意味着计算机在读入内存中有更少的规则，读入速度更快</li>
</ul>
</li>
<li>也可以作为一种缓存工具<ul>
<li>它可以支持大数据存入内存中，只要命中率高，它就能快速响应</li>
</ul>
</li>
</ul>
</li>
<li><p>NoSQL的作用</p>
<ul>
<li>对于常见的数据，第一次从数据库读出，然后就存放到NoSQL中，这样以后就无须再访问数据库，只需从NoSQL中读出即可，可提高性能</li>
<li>对于一些高并发的操作，可以再NoSQL上先完成写入，等待某个时刻再批量写入数据库，这样就能满足系统的性能要求</li>
</ul>
</li>
<li><p>传统数据库的好处</p>
<ul>
<li>更好的规范性和数据完整性</li>
<li>功能更强大，作为持久层更完善，安全性更高</li>
</ul>
</li>
<li><p>Redis作为主要的NoSQL工具的优点</p>
<ul>
<li>响应快速</li>
<li>支持六种数据类型:字符串、哈希结构、列表、集合、可排序集合和基数</li>
<li>操作都是原子的</li>
<li>MultiUtility工具: Redis可以在如缓存、消息队列中使用，在应用程序如Web程序会话、网站页面点击数等任何短暂的数据中使用</li>
</ul>
</li>
<li><p>NoSQL的优势</p>
<ul>
<li>一方面，使用NoSQL从数据库中读取数据进入缓存，就可以从内存中读取数据，而不像数据库从磁盘读数据。现实是读操作远比写操作多得多，所以缓存很多常用的数据，提高其命中率有助于整体性能的提高，并且缓解数据库的压力，对互联网系统架构十分有用</li>
<li>另一方面，它能满足互联网高并发需要高速处理数据的场合，比如抢红包、商品秒杀等场景，这些场景需要高速处理，并保证并发数据安全和一致性</li>
</ul>
</li>
</ul>
<h3 id="1-5-SSM-Redis结构框图及概述"><a href="#1-5-SSM-Redis结构框图及概述" class="headerlink" title="1.5 SSM+Redis结构框图及概述"></a>1.5 SSM+Redis结构框图及概述</h3><ul>
<li><p>结构框图如下</p>
</li>
<li><p>各自承担的功能</p>
<ul>
<li>Spring IoC承担一个资源管理、整合、即插即用的功能</li>
<li>Spring AOP可以提供切面管理，特别是数据库事务管理的功能</li>
<li>SpringMVC可以把模型、视图和控制器分层，组合成一个有机灵活的系统</li>
<li>MyBatis提供了一个数据库访问的持久层，通过MyBatis-Spring项目，它便能和Spring无缝对接</li>
<li>Redis作为缓存工具，提供高速处理数据和缓存数据的功能，使得系统大部分是需要访问缓存，而无需从数据库磁盘中重复读/写</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/17/github-3-了解githubflow/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="T0UGH(GuiPing Wang)">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://i.loli.net/2020/03/21/WAKimNUecFR64uo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="打怪升级日常">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/17/github-3-了解githubflow/" itemprop="url">[github][3][了解githubflow]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-06-17T22:13:01+08:00">
                2019-06-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/GitHub/" itemprop="url" rel="index">
                    <span itemprop="name">GitHub</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/06/17/github-3-了解githubflow/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/06/17/github-3-了解githubflow/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="3-了解-Github-flow"><a href="#3-了解-Github-flow" class="headerlink" title="3 了解 Github flow"></a>3 了解 Github flow</h2><p><a href="https://guides.github.com/introduction/flow/" target="_blank" rel="noopener">原文地址</a></p>
<p>GitHub流程是一种轻量级，基于分支的工作流程，支持定期进行部署的团队和项目</p>
<h3 id="3-1-新建分支"><a href="#3-1-新建分支" class="headerlink" title="3.1 新建分支"></a>3.1 新建分支</h3><p><img src="/2019/06/17/github-3-了解githubflow/0617_1.png" alt=""></p>
<p>当你为一个项目工作时，你可能在任何特定时间产生一堆不同的功能或想法。其中一些深思熟虑，可以着手去做的，另一些只是雏形。分支可以帮助你管理这些工作流。</p>
<p>在项目中创建分支后，你就会拥有一个可以尝试新想法的环境。你在这个分支上做的更改不会影响到<code>master</code>分支，因此你可以安全而自由地进行<code>code</code>和<code>commit</code>，并且非常清楚地知道这些提交将不会影响到主分支。</p>
<p>分支是Git中的核心概念，整个GitHub流程都是基于它的。分支的唯一一条规律：<code>master</code>分支中的任何内容始终都是可部署的。</p>
<p>在开发新功能或修复bug时，创建新分支非常重要。你的分支名称应该是具有描述性的(如<code>refactor-authentication</code>，<code>user-content-cache-key</code>，<code>make-retina-avatars</code>)，以便其他人可以看到正在开发什么奇奇怪怪的功能。</p>
<h3 id="3-2-添加commit-Add-Commit"><a href="#3-2-添加commit-Add-Commit" class="headerlink" title="3.2 添加commit(Add Commit)"></a>3.2 添加commit(Add Commit)</h3><p><img src="/2019/06/17/github-3-了解githubflow/0617_2.png" alt=""></p>
<p>创建分支后，就可以开始进行更改了。无论何时添加，编辑或删除文件，你都需要进行提交。<code>add commit</code>的过程会在你处理功能分支时跟踪你的进度。</p>
<p><code>commit</code>还可以创建一份历史记录，以便其他人可以了解你都做了什么工作。每个<code>commit</code>都有一个与之关联的提交信息，该信息描述这次提交做了什么。</p>
<p>提交信息很重要，因为Git会跟踪你的更改和提交。通过编写清晰的提交消息，你可以更轻松地让其他人跟进并提供反馈。</p>
<h3 id="3-3-打开一个-pull-request"><a href="#3-3-打开一个-pull-request" class="headerlink" title="3.3 打开一个 pull request"></a>3.3 打开一个 pull request</h3><p><img src="/2019/06/17/github-3-了解githubflow/0617_3.png" alt=""></p>
<p><code>Pull Requests</code>会启动有关你的分支的讨论。你的队友可以确切地看到将合并什么改变</p>
<p>你可以在开发过程中的任何时候打开<code>Pull Request</code></p>
<ol>
<li>当你没有写代码但想要分享一些屏幕截图或不成熟想法</li>
<li>当你遇到困难并需要帮助或建议时</li>
<li>或者当你准备好某人时审查你的工作。</li>
</ol>
<p>通过在<code>Pull Request</code>消息中使用<code>GitHub</code>的<code>@mention</code>系统，你可以询问特定人员或团队的反馈，无论他们身处何方。</p>
<p><code>Pull Requests</code>对于贡献开源项目和管理对共享存储库的更改很有用。如果您使用的是共享存储库模型，则<code>Pull Requests</code>会在合并到主分支之前帮助启动关于代码审查的讨论。</p>
<h3 id="3-4-讨论并检查代码"><a href="#3-4-讨论并检查代码" class="headerlink" title="3.4 讨论并检查代码"></a>3.4 讨论并检查代码</h3><p><img src="/2019/06/17/github-3-了解githubflow/0617_4.png" alt=""></p>
<p>一旦发起了<code>Pull Request</code>，审核代码的人可能会有问题或意见。也许编码风格太差，或者缺少单元测试，又或者一切看起来都很棒。Pull Requests旨在鼓励和记录此类对话。</p>
<p>你还可以参考有关提交的讨论和反馈继续开发你的分支。如果有人提出了你代码中的问题，你可以在分支中修复它并<code>push</code>更改。GitHub将在统一的<code>Pull Request</code>视图中显示你的新<code>commit</code>以及其他人的评论。</p>
<h3 id="3-5-部署"><a href="#3-5-部署" class="headerlink" title="3.5 部署"></a>3.5 部署</h3><p><img src="/2019/06/17/github-3-了解githubflow/0617_5.png" alt=""></p>
<p>使用GitHub，你可以在合并到<code>master</code>之前从当前分支进行部署，来完成在生产中的最终测试。</p>
<p>一旦你的<code>Pull Request</code>被同伴检查完并通过了单元测试，你可以部署更改并在生产环境中验证它们。</p>
<h3 id="3-6-合并"><a href="#3-6-合并" class="headerlink" title="3.6 合并"></a>3.6 合并</h3><p><img src="/2019/06/17/github-3-了解githubflow/0617_6.png" alt=""></p>
<p>如果你的更改已在生产环境中得到验证，就可以将当前分支合并到主分支中了。</p>
<p>合并后，<code>Pull Request</code>会保留代码更改的历史记录，所以队友们都可以了解到你都完成了哪些新特性。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/16/微服务设计-1-微服务简介/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="T0UGH(GuiPing Wang)">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://i.loli.net/2020/03/21/WAKimNUecFR64uo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="打怪升级日常">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/16/微服务设计-1-微服务简介/" itemprop="url">[微服务设计][1][微服务简介]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-06-16T16:45:40+08:00">
                2019-06-16
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/微服务设计/" itemprop="url" rel="index">
                    <span itemprop="name">微服务设计</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/06/16/微服务设计-1-微服务简介/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/06/16/微服务设计-1-微服务简介/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-微服务"><a href="#1-微服务" class="headerlink" title="1 微服务"></a>1 微服务</h2><h3 id="1-1-什么是微服务"><a href="#1-1-什么是微服务" class="headerlink" title="1.1 什么是微服务"></a>1.1 什么是微服务</h3><p>简介: 微服务就是一些协同工作的小而自治的服务</p>
<h4 id="1-1-1-很小，专注于做好一件事"><a href="#1-1-1-很小，专注于做好一件事" class="headerlink" title="1.1.1 很小，专注于做好一件事"></a>1.1.1 很小，专注于做好一件事</h4><p>单一职责原则: 把因相同原因而变化的东西聚合到一起，而把因不同原因而变化的东西分离开来</p>
<p>微服务将单一职责原则应用于独立的服务中。根据业务的边界来确定服务的边界，这样就很容易确定某个功能代码应该方法哪里。由于该服务专注于某个边界之内，因此可以很多地避免由于代码库过大衍生出的很多相关问题</p>
<p>服务大小的权衡</p>
<ul>
<li>服务越小，微服务架构的优点和缺点也就约明显</li>
<li>使用的服务越小，独立性带来的好处就越多，但是管理大量服务也会越复杂</li>
</ul>
<h4 id="1-1-2-自治性"><a href="#1-1-2-自治性" class="headerlink" title="1.1.2 自治性"></a>1.1.2 自治性</h4><ol>
<li><p>一个微服务就是一个独立的实体:</p>
<ul>
<li>它可以独立的部署在PAAS平台上</li>
<li>也可以作为一个操作系统进程存在</li>
<li>我们要尽量避免把多个服务部署在同一机器上，这会大大简化分布式系统的构建</li>
</ul>
</li>
<li><p>服务之间通过网络调用通信，从而加强服务之间的隔离性，避免紧耦合</p>
</li>
<li><p>这些服务可以彼此间独立地进行修改，并且某一个服务地部署不应该引起该服务消费方地变动</p>
</li>
<li><p>服务会暴露出API，然后服务之间通过API通信</p>
<ul>
<li>API通常是技术无关的，以保证技术的选择不被限制</li>
</ul>
</li>
</ol>
<h3 id="1-2-主要好处"><a href="#1-2-主要好处" class="headerlink" title="1.2 主要好处"></a>1.2 主要好处</h3><p>微服务有很多好处，其中<strong>一些好处也适用于任何一个分布式系统</strong>，但相对于分布式系统或者面向服务的架构而言，微服务要更胜一筹，它会把这些好处推向极致</p>
<h4 id="1-2-1-技术异构性"><a href="#1-2-1-技术异构性" class="headerlink" title="1.2.1 技术异构性"></a>1.2.1 技术异构性</h4><ol>
<li><p>在一个由多个服务相互协作的系统中，可以在不同的服务中使用最适合该服务的技术</p>
<ul>
<li>例如: 如果系统中一部分需要做性能提升，额可以使用性能更好的技术栈重新构建该部分</li>
<li>再例如：系统的不同部分可以使用不同的存储技术，社交网络可以使用图数据库，而文本可以使用对象存储技术等等<br><img src="/2019/06/16/微服务设计-1-微服务简介/0616_0.png" alt=""></li>
</ul>
</li>
<li><p>微服务可以帮助我们更好的采用新技术</p>
<ul>
<li>在一个服务中采用新技术的风险要远远小于在整个系统中引入新技术</li>
</ul>
</li>
</ol>
<h4 id="1-2-2-弹性"><a href="#1-2-2-弹性" class="headerlink" title="1.2.2 弹性"></a>1.2.2 弹性</h4><p>舱壁:</p>
<ul>
<li>如果系统中的一个组件不可用，但并没有导致级联故障，那么系统的其他部分还可以正常运行</li>
<li>系统边界就是一个很显然的舱壁</li>
</ul>
<p>优点</p>
<ul>
<li>在单块系统中，如果服务不可用，那么所有的功能都会不可用</li>
<li>而微服务系统中，只会导致部分功能不可用</li>
</ul>
<h4 id="1-2-3-扩展-性能层面"><a href="#1-2-3-扩展-性能层面" class="headerlink" title="1.2.3 扩展(性能层面)"></a>1.2.3 扩展(性能层面)</h4><p>庞大的单块服务只能作为一个整体进行扩展。即使系统中只有一小部分存在性能问题，也需要对整个服务进行扩展。如果使用较小的多个服务，则可以只对需要扩展的服务进行扩展，这样就可以把那些不需要扩展的服务运行在更小的、性能稍差的硬件上</p>
<p>例如<br><img src="/2019/06/16/微服务设计-1-微服务简介/0616_1.png" alt=""></p>
<ul>
<li>图片部分需要进行性能提升，所以部署4个实例</li>
<li>而朋友部分不需要扩展，可以部署在比较差的硬件上</li>
</ul>
<h4 id="1-2-4-简化部署"><a href="#1-2-4-简化部署" class="headerlink" title="1.2.4 简化部署"></a>1.2.4 简化部署</h4><p>在微服务架构中，各个服务的部署是独立的，这样可以更快地对特定部分的代码进行部署。如果真的出现了问题，也只会影响一个服务，并且容易快速回滚</p>
<h4 id="1-2-5-与组织结构相匹配"><a href="#1-2-5-与组织结构相匹配" class="headerlink" title="1.2.5 与组织结构相匹配"></a>1.2.5 与组织结构相匹配</h4><p>微服务架构可以很好地将架构与组织结构相匹配，避免出现过大的代码库，从而获得理想的团队大小及生产力</p>
<h4 id="1-2-6-可组合性"><a href="#1-2-6-可组合性" class="headerlink" title="1.2.6 可组合性"></a>1.2.6 可组合性</h4><p>先略，没看懂</p>
<h4 id="1-2-7-对可替代性的优化"><a href="#1-2-7-对可替代性的优化" class="headerlink" title="1.2.7 对可替代性的优化"></a>1.2.7 对可替代性的优化</h4><p>使用微服务架构的团队可以在需要时轻易地重写服务，或者删除不再使用地服务。当一个代码块只有几百行时，人们也不会对它有太多感情地依赖，所以很容易替换它</p>
<h3 id="1-3-面向服务的架构"><a href="#1-3-面向服务的架构" class="headerlink" title="1.3 面向服务的架构"></a>1.3 面向服务的架构</h3><p>SOA(Service-Oriented Architecture, 面向服务的架构)是一种设计方法</p>
<ul>
<li>其中包含多个服务， 而服务之间通过配合最终会提供一系列功能</li>
<li>一个服务通常以独立的形式存在于操作系统进程中</li>
<li>服务之间通过网络调用，而非通过进程内调用的方式进行通信</li>
</ul>
<p>在现实世界中，由于我们对项目的系统和架构有着更好的了解，所以能够更好地实施SOA，而这事实上就是微服务架构。可以认为微服务架构是SOA的一种特定方法</p>
<h3 id="1-4-其他分解技术"><a href="#1-4-其他分解技术" class="headerlink" title="1.4 其他分解技术"></a>1.4 其他分解技术</h3><h4 id="1-4-1-共享库"><a href="#1-4-1-共享库" class="headerlink" title="1.4.1 共享库"></a>1.4.1 共享库</h4><p>基本上所有语言都支持将整个代码库分解为多个库，这是一种非常标准的分解技术。这些库可以由第三方或自己的组织提供</p>
<h4 id="1-4-2-模块"><a href="#1-4-2-模块" class="headerlink" title="1.4.2 模块"></a>1.4.2 模块</h4><p>除了简单的库之外，有些语言提供了自己的模块分解技术。</p>
<ul>
<li>它们允许对模块进行生命周期管理，这样就可以把模块部署到运行的进程中，</li>
<li>并且可以在不停止整个进程的前提下对某个模块进行修改</li>
</ul>
<h3 id="1-5-没有银弹"><a href="#1-5-没有银弹" class="headerlink" title="1.5 没有银弹"></a>1.5 没有银弹</h3><p>微服务不是免费的午餐，更不是银弹。我们需要面对微服务带来的复杂性，需要在部署、测试和监控等方面做很多的工作，还需要考虑如何扩展系统</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/7/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/9/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://i.loli.net/2020/03/21/WAKimNUecFR64uo.jpg" alt="T0UGH(GuiPing Wang)">
            
              <p class="site-author-name" itemprop="name">T0UGH(GuiPing Wang)</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">112</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">26</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">56</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/T0UGH" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="tough.neu.edu@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Friends
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://neusoftware.top/solo" title="ChengYi" target="_blank">ChengYi</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://mike4ellis.github.io/" title="Mike" target="_blank">Mike</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      
    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2019 &mdash; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">T0UGH(GuiPing Wang)</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      人次
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      次
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'E1MH6h0YP3yhA0PJsohNBgiT-gzGzoHsz',
        appKey: 'YOiN6zLq3XGfKmlR0b8vyHtN',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
