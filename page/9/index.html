<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="打怪升级日常">
<meta property="og:url" content="http://yoursite.com/page/9/index.html">
<meta property="og:site_name" content="打怪升级日常">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="打怪升级日常">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/9/">





  <title>打怪升级日常</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>
    <a href="https://github.com/T0UGH" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">打怪升级日常</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">两星炸弹人(╯‵□′)╯炸弹！•••</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/14/Docker-3-Dockerfile详解/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="T0UGH(GuiPing Wang)">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://i.loli.net/2020/03/21/WAKimNUecFR64uo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="打怪升级日常">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/14/Docker-3-Dockerfile详解/" itemprop="url">[Docker][3][Dockerfile详解]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-06-14T16:55:58+08:00">
                2019-06-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Docker/" itemprop="url" rel="index">
                    <span itemprop="name">Docker</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/06/14/Docker-3-Dockerfile详解/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/06/14/Docker-3-Dockerfile详解/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="3-Dockerfile详述"><a href="#3-Dockerfile详述" class="headerlink" title="3 Dockerfile详述"></a>3 Dockerfile详述</h2><p><strong>镜像的定制</strong>实际上就是定制每一层所添加的配置、文件。<strong>如果我们可以把每一层修改、安装、构建、操作的命令都写入一个脚本，用这个脚本来构建、定制镜像</strong>，那么之前提及的无法重复的问题、镜像构建透明性的问题、体积的问题就都会解决。这个脚本就是<code>Dockerfile</code>。</p>
<p><code>Dockerfile</code>是一个文本文件，其内包含了一条条的 <strong>指令</strong>(Instruction)，每一条指令构建一层，因此每一条指令的内容，就是描述该层应当如何构建。</p>
<p>例如<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> nginx</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">echo</span> <span class="string">'&lt;h1&gt;Hello, Docker!&lt;/h1&gt;'</span> &gt; /usr/share/nginx/html/index.html</span></span><br></pre></td></tr></table></figure></p>
<h3 id="3-1-FROM-指定基础镜像"><a href="#3-1-FROM-指定基础镜像" class="headerlink" title="3.1 FROM 指定基础镜像"></a>3.1 FROM 指定基础镜像</h3><h4 id="3-1-1-FROM指令简介"><a href="#3-1-1-FROM指令简介" class="headerlink" title="3.1.1 FROM指令简介"></a>3.1.1 FROM指令简介</h4><p>所谓定制镜像，那一定是以一个镜像为基础，在其上进行定制。就像我们之前运行了一个 nginx 镜像的容器，再进行修改一样，基础镜像是必须指定的。</p>
<p>而 <code>FROM</code> 就是指定基础镜像，因此一个 <code>Dockerfile</code> 中 <code>FROM</code> 是必备的指令，并且必须是第一条指令。</p>
<h4 id="3-1-2-高质量的官方镜像"><a href="#3-1-2-高质量的官方镜像" class="headerlink" title="3.1.2 高质量的官方镜像"></a>3.1.2 高质量的官方镜像</h4><p>在 <code>Docker Hub</code> 上有非常多的高质量的官方镜像，有可以直接拿来使用的<strong>服务类</strong>的镜像，如 <code>nginx</code>、<code>redis</code>、<code>mongo</code>、<code>mysql</code>、<code>httpd</code>、<code>php</code>、<code>tomcat</code> 等；也有一些方便开发、构建、运行各种<strong>语言</strong>应用的镜像，如 <code>node</code>、<code>openjdk</code>、<code>python</code>、<code>ruby</code>、<code>golang</code> 等。可以在其中寻找一个最符合我们最终目标的镜像为基础镜像进行定制。</p>
<p>如果没有找到对应服务的镜像，官方镜像中还提供了一些更为基础的操作系统镜像，如 <code>ubuntu</code>、<code>debian</code>、<code>centos</code>、<code>fedora</code>、<code>alpine</code> 等</p>
<h4 id="3-1-3-Scratch镜像"><a href="#3-1-3-Scratch镜像" class="headerlink" title="3.1.3 Scratch镜像"></a>3.1.3 Scratch镜像</h4><p>除了选择现有镜像为基础镜像外，Docker 还存在一个特殊的镜像，名为 <code>scratch</code>。这个镜像是虚拟的概念，并不实际存在，它表示一个空白的镜像。<strong>使用 Go 语言 开发的应用很多会使用这种方式来制作镜像，这也是为什么有人认为 Go 是特别适合容器微服务架构的语言的原因之一</strong>。</p>
<h3 id="3-2-RUN-执行命令"><a href="#3-2-RUN-执行命令" class="headerlink" title="3.2 RUN 执行命令"></a>3.2 RUN 执行命令</h3><p>RUN 指令是用来执行命令行命令的</p>
<p>Dockerfile 中每一个指令都会建立一层，RUN 也不例外。每一个 RUN 的行为，就和刚才我们手工建立镜像的过程一样：新建立一层，在其上执行这些命令，</p>
<h4 id="3-2-1-RUN指令推荐写法"><a href="#3-2-1-RUN指令推荐写法" class="headerlink" title="3.2.1 RUN指令推荐写法"></a>3.2.1 RUN指令推荐写法</h4><p>执行结束后，commit 这一层的修改，构成新的镜像。所以推荐下面的写法</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> debian:stretch</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> buildDeps=<span class="string">'gcc libc6-dev make wget'</span> \</span></span><br><span class="line"><span class="bash">    &amp;&amp; apt-get update \</span></span><br><span class="line"><span class="bash">    &amp;&amp; apt-get install -y <span class="variable">$buildDeps</span> \</span></span><br><span class="line"><span class="bash">    &amp;&amp; wget -O redis.tar.gz <span class="string">"http://download.redis.io/releases/redis-5.0.3.tar.gz"</span> \</span></span><br><span class="line"><span class="bash">    &amp;&amp; mkdir -p /usr/src/redis \</span></span><br><span class="line"><span class="bash">    &amp;&amp; tar -xzf redis.tar.gz -C /usr/src/redis --strip-components=1 \</span></span><br><span class="line"><span class="bash">    &amp;&amp; make -C /usr/src/redis \</span></span><br><span class="line"><span class="bash">    &amp;&amp; make -C /usr/src/redis install \</span></span><br><span class="line"><span class="bash">    &amp;&amp; rm -rf /var/lib/apt/lists/* \</span></span><br><span class="line"><span class="bash">    &amp;&amp; rm redis.tar.gz \</span></span><br><span class="line"><span class="bash">    &amp;&amp; rm -r /usr/src/redis \</span></span><br><span class="line"><span class="bash">    &amp;&amp; apt-get purge -y --auto-remove <span class="variable">$buildDeps</span></span></span><br></pre></td></tr></table></figure>
<p>这里没有使用很多个 RUN 对一一对应不同的命令，而是仅仅使用一个 RUN 指令，并使用 &amp;&amp; 将各个所需命令串联起来。将之前的 7 层，简化为了 1 层。</p>
<p>Dockerfile 支持 Shell 类的行尾添加 \ 的命令换行方式，以及行首 # 进行注释的格式。</p>
<h3 id="3-3-构建镜像"><a href="#3-3-构建镜像" class="headerlink" title="3.3 构建镜像"></a>3.3 构建镜像</h3><p>在 <code>Dockerfile</code> 文件所在目录执行<code>docker build</code>命令，例如</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ docker build -t nginx:v3 .</span><br><span class="line">Sending build context to Docker daemon 2.048 kB</span><br><span class="line">Step 1 : FROM nginx</span><br><span class="line"> ---&gt; e43d811ce2f4</span><br><span class="line">Step 2 : RUN <span class="built_in">echo</span> <span class="string">'&lt;h1&gt;Hello, Docker!&lt;/h1&gt;'</span> &gt; /usr/share/nginx/html/index.html</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> 9cdc27646c7b</span><br><span class="line"> ---&gt; 44aa4490ce2c</span><br><span class="line">Removing intermediate container 9cdc27646c7b</span><br><span class="line">Successfully built 44aa4490ce2c</span><br></pre></td></tr></table></figure>
<h3 id="3-4-镜像构建上下文"><a href="#3-4-镜像构建上下文" class="headerlink" title="3.4 镜像构建上下文"></a>3.4 镜像构建上下文</h3><h4 id="3-4-1-COPY指令"><a href="#3-4-1-COPY指令" class="headerlink" title="3.4.1 COPY指令"></a>3.4.1 COPY指令</h4><p>假如需要将一些本地文件复制进镜像，可以通过 <code>COPY</code> 指令、<code>ADD</code> 指令等。</p>
<h4 id="3-4-2-为什么需要上下文"><a href="#3-4-2-为什么需要上下文" class="headerlink" title="3.4.2 为什么需要上下文"></a>3.4.2 为什么需要上下文</h4><p>而 <code>docker build</code> 命令构建镜像，其实并非在本地构建，而是在服务端，也就是 Docker 引擎中构建的。那么在这种客户端/服务端的架构中，如何才能让服务端获得本地文件呢？</p>
<p>这就引入了上下文的概念。当构建的时候，用户会指定构建镜像上下文的路径，<code>docker build</code> 命令得知这个路径后，会将路径下的所有内容打包，然后上传给 Docker 引擎。这样 Docker 引擎收到这个上下文包后，展开就会获得构建镜像所需的一切文件。</p>
<h4 id="3-4-3-理解上下文的概念"><a href="#3-4-3-理解上下文的概念" class="headerlink" title="3.4.3 理解上下文的概念"></a>3.4.3 理解上下文的概念</h4><p>例如<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">COPY</span><span class="bash"> ./package.json /app/</span></span><br></pre></td></tr></table></figure></p>
<p>这并不是要复制执行 docker build 命令所在的目录下的 package.json，也不是复制 Dockerfile 所在目录下的 package.json，而是复制 上下文（context） 目录下的 package.json。</p>
<p>因此，COPY 这类指令中的源文件的路径都是相对路径。</p>
<p><code>命令 docker build -t nginx:v3 .</code> 中的这个 <code>.</code>，实际上是在指定上下文的目录，<code>docker build</code> 命令会将该目录下的内容打包交给 <code>Docker</code> 引擎以帮助构建镜像。</p>
<h4 id="3-4-4-使用方式"><a href="#3-4-4-使用方式" class="headerlink" title="3.4.4 使用方式"></a>3.4.4 使用方式</h4><p>一般来说，应该会将 Dockerfile 置于一个空目录下，或者项目根目录下。如果该目录下没有所需文件，那么应该把所需文件复制一份过来。如果目录下有些东西确实不希望构建时传给 Docker 引擎，那么可以用 .gitignore 一样的语法写一个 .dockerignore，该文件是用于剔除不需要作为上下文传递给 Docker 引擎的文件。</p>
<h3 id="3-5-Docker指令详解"><a href="#3-5-Docker指令详解" class="headerlink" title="3.5 Docker指令详解"></a>3.5 Docker指令详解</h3><h4 id="3-5-1-COPY-复制文件"><a href="#3-5-1-COPY-复制文件" class="headerlink" title="3.5.1 COPY 复制文件"></a>3.5.1 COPY 复制文件</h4><p>COPY 指令将从构建上下文目录中 &lt;源路径&gt; 的文件/目录复制到新的一层的镜像内的 &lt;目标路径&gt; 位置。比如：</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">COPY</span><span class="bash"> package.json /usr/src/app/</span></span><br></pre></td></tr></table></figure>
<h4 id="3-5-2-ADD-更高级的复制文件"><a href="#3-5-2-ADD-更高级的复制文件" class="headerlink" title="3.5.2 ADD 更高级的复制文件"></a>3.5.2 ADD 更高级的复制文件</h4><p><code>ADD</code> 指令和 <code>COPY</code> 的格式和性质基本一致。但是在 <code>COPY</code> 基础上增加了一些功能。</p>
<p><code>ADD</code>指令可以接受压缩文件作为参数，并自动解压此文件，如下所示</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> scratch</span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> ubuntu-xenial-core-cloudimg-amd64-root.tar.gz /</span></span><br><span class="line"><span class="bash">...</span></span><br></pre></td></tr></table></figure>
<p>在 <code>COPY</code> 和 <code>ADD</code> 指令中选择的时候，可以遵循这样的原则，所有的文件复制均使用 <code>COPY</code> 指令，仅在需要<strong>自动解压缩</strong>的场合使用 <code>ADD</code>。</p>
<h4 id="3-5-3-CMD-容器启动命令"><a href="#3-5-3-CMD-容器启动命令" class="headerlink" title="3.5.3 CMD 容器启动命令"></a>3.5.3 CMD 容器启动命令</h4><p><code>Docker</code> 不是虚拟机，容器就是进程。既然是进程，那么在启动容器的时候，需要指定所运行的程序及参数。<code>CMD</code> 指令就是用于指定默认的容器主进程的启动命令的。</p>
<p>例如<br><figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CMD</span><span class="bash"> <span class="built_in">echo</span> <span class="variable">$HOME</span></span></span><br></pre></td></tr></table></figure></p>
<p>再例如<br><figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">"mysqld"</span>]</span></span><br></pre></td></tr></table></figure></p>
<h4 id="3-5-4-ENTRYPOINT-入口点"><a href="#3-5-4-ENTRYPOINT-入口点" class="headerlink" title="3.5.4 ENTRYPOINT 入口点"></a>3.5.4 ENTRYPOINT 入口点</h4><p>当指定了 <code>ENTRYPOINT</code> 后，<code>CMD</code> 的含义就发生了改变，不再是直接的运行其命令，而是将 <code>CMD</code> 的内容作为参数传给 <code>ENTRYPOINT</code> 指令，换句话说实际执行时，将变为：</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">ENTRYPOINT</span><span class="bash">&gt; <span class="string">"&lt;CMD&gt;"</span></span></span><br></pre></td></tr></table></figure>
<p>例如</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> ubuntu:<span class="number">18.04</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update \</span></span><br><span class="line"><span class="bash">    &amp;&amp; apt-get install -y curl \</span></span><br><span class="line"><span class="bash">    &amp;&amp; rm -rf /var/lib/apt/lists/*</span></span><br><span class="line"><span class="bash">ENTRYPOINT [ <span class="string">"curl"</span>, <span class="string">"-s"</span>, <span class="string">"https://ip.cn"</span> ]</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ docker run myip</span><br><span class="line">当前 IP：61.148.226.66 来自：北京市 联通</span><br><span class="line"></span><br><span class="line">$ docker run myip -i</span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: nginx/1.8.0</span><br><span class="line">Date: Tue, 22 Nov 2016 05:12:40 GMT</span><br><span class="line">Content-Type: text/html; charset=UTF-8</span><br><span class="line">Vary: Accept-Encoding</span><br><span class="line">X-Powered-By: PHP/5.6.24-1~dotdeb+7.1</span><br><span class="line">X-Cache: MISS from cache-2</span><br><span class="line">X-Cache-Lookup: MISS from cache-2:80</span><br><span class="line">X-Cache: MISS from proxy-2_6</span><br><span class="line">Transfer-Encoding: chunked</span><br><span class="line">Via: 1.1 cache-2:80, 1.1 proxy-2_6:8006</span><br><span class="line">Connection: keep-alive</span><br><span class="line"></span><br><span class="line">当前 IP：61.148.226.66 来自：北京市 联通</span><br></pre></td></tr></table></figure>
<h4 id="3-5-5-ENV-设置环境变量"><a href="#3-5-5-ENV-设置环境变量" class="headerlink" title="3.5.5 ENV 设置环境变量"></a>3.5.5 ENV 设置环境变量</h4><p>这个指令很简单，就是设置环境变量而已，无论是后面的其它指令，如 <code>RUN</code>，还是运行时的应用，都可以直接使用这里定义的环境变量。</p>
<p>例如<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ENV</span> NODE_VERSION <span class="number">7.2</span>.<span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> curl -SLO <span class="string">"https://nodejs.org/dist/v<span class="variable">$NODE_VERSION</span>/node-v<span class="variable">$NODE_VERSION</span>-linux-x64.tar.xz"</span> \</span></span><br><span class="line"><span class="bash">  &amp;&amp; curl -SLO <span class="string">"https://nodejs.org/dist/v<span class="variable">$NODE_VERSION</span>/SHASUMS256.txt.asc"</span> \</span></span><br><span class="line"><span class="bash">  &amp;&amp; gpg --batch --decrypt --output SHASUMS256.txt SHASUMS256.txt.asc \</span></span><br><span class="line"><span class="bash">  &amp;&amp; grep <span class="string">" node-v<span class="variable">$NODE_VERSION</span>-linux-x64.tar.xz\$"</span> SHASUMS256.txt | sha256sum -c - \</span></span><br><span class="line"><span class="bash">  &amp;&amp; tar -xJf <span class="string">"node-v<span class="variable">$NODE_VERSION</span>-linux-x64.tar.xz"</span> -C /usr/<span class="built_in">local</span> --strip-components=1 \</span></span><br><span class="line"><span class="bash">  &amp;&amp; rm <span class="string">"node-v<span class="variable">$NODE_VERSION</span>-linux-x64.tar.xz"</span> SHASUMS256.txt.asc SHASUMS256.txt \</span></span><br><span class="line"><span class="bash">  &amp;&amp; ln -s /usr/<span class="built_in">local</span>/bin/node /usr/<span class="built_in">local</span>/bin/nodejs</span></span><br></pre></td></tr></table></figure></p>
<p>下列指令可以支持环境变量展开：<code>ADD</code>、<code>COPY</code>、<code>ENV</code>、<code>EXPOSE</code>、<code>LABEL</code>、<code>USER</code>、<code>WORKDIR</code>、<code>VOLUME</code>、<code>STOPSIGNAL</code>、<code>ONBUILD</code>。</p>
<h4 id="3-5-7-ARG-构建参数"><a href="#3-5-7-ARG-构建参数" class="headerlink" title="3.5.7 ARG 构建参数"></a>3.5.7 ARG 构建参数</h4><p>略</p>
<h4 id="3-5-8-VOLUME-定义匿名卷"><a href="#3-5-8-VOLUME-定义匿名卷" class="headerlink" title="3.5.8 VOLUME 定义匿名卷"></a>3.5.8 VOLUME 定义匿名卷</h4><p>在 Dockerfile 中，我们可以事先指定某些目录挂载为匿名卷，这样在运行时如果用户不指定挂载，其应用也可以正常运行，不会向容器存储层写入大量数据。</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">VOLUME</span><span class="bash"> /data</span></span><br></pre></td></tr></table></figure>
<p>这里的 <code>/data</code> 目录就会在运行时自动挂载为匿名卷，任何向 <code>/data</code> 中写入的信息都不会记录进容器存储层，从而保证了容器存储层的无状态化。当然，运行时可以覆盖这个挂载设置。比如：</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">run</span><span class="bash"> -d -v mydata:/data xxxx</span></span><br></pre></td></tr></table></figure>
<p>在这行命令中，就使用了 mydata 这个命名卷挂载到了 /data 这个位置，替代了 Dockerfile 中定义的匿名卷的挂载配置。</p>
<h4 id="3-5-9-EXPOSE-声明端口"><a href="#3-5-9-EXPOSE-声明端口" class="headerlink" title="3.5.9 EXPOSE 声明端口"></a>3.5.9 EXPOSE 声明端口</h4><p><code>EXPOSE</code> 指令是声明运行时容器提供服务端口，这只是一个声明，在运行时并不会因为这个声明应用就会开启这个端口的服务。</p>
<p>在 Dockerfile 中写入这样的声明有两个好处，</p>
<ol>
<li><p>一个是帮助镜像使用者理解这个镜像服务的守护端口，以方便配置映射；</p>
</li>
<li><p>另一个用处则是在运行时使用随机端口映射时，也就是 docker run -P 时，会自动随机映射 EXPOSE 的端口。</p>
</li>
</ol>
<h4 id="3-5-10-WORKDIR-指定工作目录"><a href="#3-5-10-WORKDIR-指定工作目录" class="headerlink" title="3.5.10 WORKDIR 指定工作目录"></a>3.5.10 WORKDIR 指定工作目录</h4><p>使用 <code>WORKDIR</code> 指令可以来指定工作目录（或者称为当前目录），以后各层的当前目录就被改为指定的目录，如该目录不存在，<code>WORKDIR</code> 会帮你建立目录。</p>
<p>因此如果需要改变以后各层的工作目录的位置，那么应该使用 <code>WORKDIR</code> 指令。</p>
<h4 id="3-5-11-USER-指定当前用户"><a href="#3-5-11-USER-指定当前用户" class="headerlink" title="3.5.11 USER 指定当前用户"></a>3.5.11 USER 指定当前用户</h4><p><code>USER</code> 指令和 <code>WORKDIR</code> 相似，都是改变环境状态并影响以后的层。<code>WORKDIR</code> 是改变工作目录，<code>USER</code> 则是改变之后层的执行 <code>RUN</code>, <code>CMD</code> 以及 <code>ENTRYPOINT</code> 这类命令的身份。</p>
<h4 id="3-5-12-ONBUILD"><a href="#3-5-12-ONBUILD" class="headerlink" title="3.5.12 ONBUILD"></a>3.5.12 ONBUILD</h4><p>略</p>
<h4 id="3-5-13-HEALTHCHECK-健康检查"><a href="#3-5-13-HEALTHCHECK-健康检查" class="headerlink" title="3.5.13 HEALTHCHECK 健康检查"></a>3.5.13 HEALTHCHECK 健康检查</h4><p>HEALTHCHECK 指令是告诉 Docker 应该如何进行判断容器的状态是否正常，这是 Docker 1.12 引入的新指令。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/05/javascript-11-js模块/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="T0UGH(GuiPing Wang)">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://i.loli.net/2020/03/21/WAKimNUecFR64uo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="打怪升级日常">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/05/javascript-11-js模块/" itemprop="url">[javascript][11][js模块]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-06-05T15:09:05+08:00">
                2019-06-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/06/05/javascript-11-js模块/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/06/05/javascript-11-js模块/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="11-代码模块化"><a href="#11-代码模块化" class="headerlink" title="11 代码模块化"></a>11 代码模块化</h2><p>小的、组织良好的代码远比庞大的代码更容易<strong>理解和维护</strong>。优化程序结构和组织方式的一种方式是将代码拆分为小的、耦合相对松散的片段或模块</p>
<p><strong>模块</strong>是比对象或者函数稍大的、用于组织代码的单元，通过模块可以将程序进行分类</p>
<p><strong>模块化</strong>的好处</p>
<ol>
<li>降低理解成本</li>
<li>模块易于维护</li>
<li>提高代码的重用性</li>
</ol>
<h3 id="11-1-在ES6之前的版本中模块化代码"><a href="#11-1-在ES6之前的版本中模块化代码" class="headerlink" title="11.1 在ES6之前的版本中模块化代码"></a>11.1 在ES6之前的版本中模块化代码</h3><h4 id="11-1-1-使用对象、闭包和立即执行函数实现模块"><a href="#11-1-1-使用对象、闭包和立即执行函数实现模块" class="headerlink" title="11.1.1 使用对象、闭包和立即执行函数实现模块"></a>11.1.1 使用对象、闭包和立即执行函数实现模块</h4><p>ES6之前没有模块，开发者创造性的发挥JS语言现有的特性实现模块化。最流行的方式是使用立即执行函数的闭包实现模块</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MouseCounterModule = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> numClicks = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> handleClick = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        alert(++numClicks);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        countClicks: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">document</span>.addEventListener(<span class="string">"click"</span>, handleClick);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;();</span><br></pre></td></tr></table></figure>
<ol>
<li>在立即执行函数内部，定义模块内部的实现细节，这些细节只能在模块内部访问:局部变量<code>numClicks</code>和局部函数<code>handleClick</code></li>
<li>创建并返回一个对象作为模块的”公共接口”。该接口包括<code>countClicks</code>方法</li>
<li>由于暴露了模块接口，模块内部细节仍然可以通过接口创建的闭包保持活跃</li>
<li>最后，保存代表模块接口的变量，通过立即执行函数返回给变量<code>MouseCounterModule</code></li>
</ol>
<p>这种在JavaScript中通过使用立即执行函数、对象和闭包来创建模块的方式称为<strong>模块模式</strong></p>
<p>模块模式的问题</p>
<ol>
<li>难以扩展</li>
<li>模块模式无法很好的处理对于其他模块的依赖</li>
</ol>
<h4 id="11-1-2-使用AMD模块化JavaScript应用"><a href="#11-1-2-使用AMD模块化JavaScript应用" class="headerlink" title="11.1.2 使用AMD模块化JavaScript应用"></a>11.1.2 使用AMD模块化JavaScript应用</h4><p>AMD的设计理念是明确基于浏览器，而CommonJS的设计是面向通用JavaScript环境，而不局限于浏览器</p>
<p>AMD提供名为<code>define</code>的函数，它接受如下参数</p>
<ul>
<li>先创建模块的<code>id</code>，使用该<code>id</code>，可以在系统的其他部分引入该模块</li>
<li>当前模块依赖的模块<code>id</code>列表</li>
<li>初始化模块的工厂函数，该工厂函数接收依赖的模块列表作为参数</li>
</ul>
<p>AMD定义模块示例<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="string">'MouseCounterModule`, ['</span>jquery<span class="string">'], $ =&gt; &#123;</span></span><br><span class="line"><span class="string">    let numClicks = 0;</span></span><br><span class="line"><span class="string">    const handleClick = () =&gt; &#123;</span></span><br><span class="line"><span class="string">        alert(++numClicks);</span></span><br><span class="line"><span class="string">    &#125;;</span></span><br><span class="line"><span class="string">    return &#123;</span></span><br><span class="line"><span class="string">        countClicks: () =&gt; &#123;</span></span><br><span class="line"><span class="string">            document.addEventListener("click", handleClick);</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;;</span></span><br><span class="line"><span class="string">&#125;);</span></span><br></pre></td></tr></table></figure></p>
<h4 id="11-1-3-使用CommonJS模块化JavaScript应用"><a href="#11-1-3-使用CommonJS模块化JavaScript应用" class="headerlink" title="11.1.3 使用CommonJS模块化JavaScript应用"></a>11.1.3 使用CommonJS模块化JavaScript应用</h4><p>CommonJS提供<code>module</code>变量，通过<code>module.exports</code>对象暴露的对象或函数可以在模块外部访问</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> $ = <span class="built_in">require</span>(<span class="string">"jquery"</span>);</span><br><span class="line"><span class="keyword">let</span> numClicks = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> handleClick = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        alert(++numClicks);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    countClicks: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">document</span>.addEventListener(<span class="string">"click"</span>, handleClick);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MouseCounterModule = <span class="built_in">require</span>(<span class="string">"MouseCounterModule.js"</span>);</span><br><span class="line">MouseCounterModule.countClicks();</span><br></pre></td></tr></table></figure>
<h3 id="11-2-ES6模块"><a href="#11-2-ES6模块" class="headerlink" title="11.2 ES6模块"></a>11.2 ES6模块</h3><p>ES6模块的主要思想是必须显式地使用标识符导出模块，才能从外部访问模块</p>
<p>ES6引入了两个关键字</p>
<ul>
<li>export: 从模块外部指定标识符</li>
<li>import: 导入模块标识符</li>
</ul>
<h4 id="11-2-1-导出和导入功能"><a href="#11-2-1-导出和导入功能" class="headerlink" title="11.2.1 导出和导入功能"></a>11.2.1 导出和导入功能</h4><p>通过在需要导出的标识符(如变量、函数和类)使用关键字<code>export</code>，就可以实现模块导出<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ninja = <span class="string">"Yoshi"</span>;</span><br><span class="line"><span class="comment">//导出变量</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> message = <span class="string">"Hello"</span>;</span><br><span class="line"><span class="comment">//导出函数</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">sayHiToNinja</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> message + <span class="string">" "</span> + ninja;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>使用关键字<code>import</code>将变量和函数导入<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;message, sayHiToNinja&#125; <span class="keyword">from</span> <span class="string">"Ninja.js"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(message);</span><br><span class="line">sayHiToNinja();</span><br></pre></td></tr></table></figure></p>
<p>使用简化符号<code>*</code>可以导入全部标识符<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> ninjaModule <span class="keyword">from</span> <span class="string">"Ninja.js"</span></span><br><span class="line"><span class="built_in">console</span>.log(ninjaModule.message);</span><br><span class="line">ninjaModule.sayHiToNinja();</span><br></pre></td></tr></table></figure></p>
<h4 id="11-2-2-默认导出"><a href="#11-2-2-默认导出" class="headerlink" title="11.2.2 默认导出"></a>11.2.2 默认导出</h4><p>通常我们不需要从模块中导出一组相关的标识符，只需要导出一个标识符来代表整个模块的导出，常见情况为，当模块中包含一个类，只需要导出整个类</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Ninja</span></span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name)&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">compareNinjas</span>(<span class="params">ninja1, ninja2</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ninja1.name === ninja2.name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>导入模块默认导出的内容，不需要使用花括号{},可以任意指定名称<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ImportedNinja <span class="keyword">from</span> <span class="string">"Ninja.js"</span></span><br><span class="line"><span class="keyword">import</span> &#123;compareNinjas&#125; <span class="keyword">from</span> <span class="string">"Ninja.js"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ninja1 = <span class="keyword">new</span> ImportedNinja(<span class="string">"Yoshi"</span>);</span><br><span class="line"><span class="keyword">const</span> ninja2 = <span class="keyword">new</span> ImportedNinja(<span class="string">"Hattori"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(ninja1 === ninja2);</span><br></pre></td></tr></table></figure></p>
<h4 id="11-2-3-模块语法表"><a href="#11-2-3-模块语法表" class="headerlink" title="11.2.3 模块语法表"></a>11.2.3 模块语法表</h4><table>
<thead>
<tr>
<th>代码</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>export const ninja = &quot;Yoshi&quot;</code></td>
<td>导出变量</td>
</tr>
<tr>
<td><code>export function compare()</code></td>
<td>导出函数</td>
</tr>
<tr>
<td><code>export class Ninja()</code></td>
<td>导出类</td>
</tr>
<tr>
<td><code>export default class Ninja()</code></td>
<td>导出默认类</td>
</tr>
<tr>
<td><code>export default function Ninja()</code></td>
<td>导出默认函数</td>
</tr>
<tr>
<td><code>const ninja = &quot;Yoshi&quot;; function compare(){}; export{ninja, compare};</code></td>
<td>导出存在的变量</td>
</tr>
<tr>
<td><code>export {ninja as samurai};</code></td>
<td>使用别名导出变量</td>
</tr>
<tr>
<td><code>import Ninja from &quot;Ninja.js&quot;</code></td>
<td>导入默认导出</td>
</tr>
<tr>
<td><code>import {ninja} from &quot;Ninja.js&quot;</code></td>
<td>导入命名导出</td>
</tr>
<tr>
<td><code>import * as Ninja from &quot;Ninja.js&quot;</code></td>
<td>导入模块声明的全部导出内容</td>
</tr>
<tr>
<td><code>import {ninja as iNinja from &quot;Ninja.js&quot;</code></td>
<td>通过别名导入模块中声明的全部导出内容</td>
</tr>
</tbody>
</table>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/28/github-2-github相关/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="T0UGH(GuiPing Wang)">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://i.loli.net/2020/03/21/WAKimNUecFR64uo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="打怪升级日常">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/28/github-2-github相关/" itemprop="url">[github][2][github相关]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-28T17:00:51+08:00">
                2019-05-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/GitHub/" itemprop="url" rel="index">
                    <span itemprop="name">GitHub</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/28/github-2-github相关/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/05/28/github-2-github相关/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="2-github相关"><a href="#2-github相关" class="headerlink" title="2 github相关"></a>2 github相关</h2><h3 id="2-2-Issue"><a href="#2-2-Issue" class="headerlink" title="2.2 Issue"></a>2.2 Issue</h3><p>开发者为了跟踪bug并进行软件相关讨论，进而方便管理，创建了Issue</p>
<ul>
<li><p>GitHub的Issue和评论可以使用GFM语法进行描述</p>
</li>
<li><p>Issue可以通过添加标签(Label)来进行整理，标签可以自由创建</p>
</li>
<li><p>可以通过添加里程碑来管理Issue，设置里程碑就可以通过Issue来管理任务</p>
</li>
<li><p>只要按照特定的格式描述提交信息，就可以像一般BTS带有的功能那样对Issue进行操作</p>
<ul>
<li>每个Issue标题下面都分配了一个诸如”#24”一样的序号，只要在提交信息的描述中加入”#24”，就可以在Issue中显示相关信息</li>
<li>当一个处于<code>open</code>状态的<code>Issue</code>处理完毕，只要在该提交中以下列任意一种格式描述提交信息，对应的<code>Issue</code>就会被<code>close</code>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">fix #24</span><br><span class="line">fixes #24</span><br><span class="line">fixed #24</span><br><span class="line">close #24</span><br><span class="line">closes #24</span><br><span class="line">closed #24</span><br><span class="line">resolve #24</span><br><span class="line">resolves #24</span><br><span class="line">resolved #24</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="2-2-发送-Pull-Request"><a href="#2-2-发送-Pull-Request" class="headerlink" title="2.2 发送 Pull Request"></a>2.2 发送 Pull Request</h3><ul>
<li><p>Pull Request是自己修改源代码后，请求对方仓库采纳该修改时采取的一种行为</p>
</li>
<li><p>在Github上发送Pull Request后，接收方的仓库会创建一个附带源代码的Issue，我们在这个Issue中记录详细内容。这就是Pull Request</p>
</li>
<li><p>发送过来的Pull Request是否被采纳，要由接收方仓库的管理者进行判断</p>
</li>
<li><p>一般说来，在Github上修改对方的代码，需要先将仓库fork到本地，然后再修改代码，发送Pull Request。但是，如果用户对该仓库有编辑权限，则可以直接创建分支，从分支上发送Pull Request。利用这一设计，团队开发时不妨为每一个成员赋予编辑权限，免去<code>fork</code>仓库的麻烦。这样，成员在有需要时就可以创建自己的分支，然后直接向master分支等发送Pull Request</p>
</li>
</ul>
<h3 id="2-3-接收-Pull-Request"><a href="#2-3-接收-Pull-Request" class="headerlink" title="2.3 接收 Pull Request"></a>2.3 接收 Pull Request</h3><p>有两种Pull Request方式:</p>
<ol>
<li>直接在github上接受此次Pull Request</li>
<li>拉取到本地，然后校验，校验之后，执行<code>git merge</code>，解决冲突后，push到远端</li>
</ol>
<h3 id="2-4-团队开发的步骤"><a href="#2-4-团队开发的步骤" class="headerlink" title="2.4 团队开发的步骤"></a>2.4 团队开发的步骤</h3><p>自己总结的开发流程</p>
<ol>
<li>git pull 更新本地</li>
<li>从master新建分支并切换到该分支，以开发新功能</li>
<li>开发新功能</li>
<li>将此分支推送到远程仓库</li>
<li>在github上发送pull request请求</li>
<li>管理员将此分支拉取到本地</li>
<li>在本地将此分支合并到master分支并消除冲突</li>
</ol>
<p>Github Flow的开发流程</p>
<ol>
<li>令master分支时常保持可以部署的状态</li>
<li>进行新的工作时要从master分支创建新分支，新分支名称要具有描述性</li>
<li>在<code>2</code>新建的本地仓库分支中进行提交</li>
<li>在Github端仓库创建同名分支，定期push</li>
<li>需要帮助或者反馈时创建Pull Request，以Pull Request进行交流和讨论</li>
<li>让其他开发者进行审查，确定作业完成后与master分支合并</li>
<li>与master分支合并后立即部署</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/28/github-1-git命令/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="T0UGH(GuiPing Wang)">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://i.loli.net/2020/03/21/WAKimNUecFR64uo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="打怪升级日常">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/28/github-1-git命令/" itemprop="url">[github][1][git命令]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-28T16:56:20+08:00">
                2019-05-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/GitHub/" itemprop="url" rel="index">
                    <span itemprop="name">GitHub</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/28/github-1-git命令/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/05/28/github-1-git命令/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-通过实际操作学习Git"><a href="#1-通过实际操作学习Git" class="headerlink" title="1 通过实际操作学习Git"></a>1 通过实际操作学习Git</h2><p><a href="https://learngitbranching.js.org/" target="_blank" rel="noopener">一个很好的git学习网站</a></p>
<h3 id="1-1-基本操作"><a href="#1-1-基本操作" class="headerlink" title="1.1 基本操作"></a>1.1 基本操作</h3><h4 id="1-1-1-git-init-初始化仓库"><a href="#1-1-1-git-init-初始化仓库" class="headerlink" title="1.1.1 git init-初始化仓库"></a>1.1.1 git init-初始化仓库</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git init</span><br></pre></td></tr></table></figure>
<p>执行<code>git init</code>命令后会生成<code>.git</code>目录，这个目录中存储了管理当前目录内容所需的仓库数据</p>
<p>我们当前所在的目录称为”附属于该仓库的工作树”，在工作树中对文件进行编辑，然后记录到仓库中，以此管理文件的历史快照。若想要将文件恢复到之前的状态，可从仓库中调取之前的快照，在工作树种打开</p>
<h4 id="1-1-2-git-status-查看仓库的状态"><a href="#1-1-2-git-status-查看仓库的状态" class="headerlink" title="1.1.2 git status-查看仓库的状态"></a>1.1.2 git status-查看仓库的状态</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br></pre></td></tr></table></figure>
<p><img src="/2019/05/28/github-1-git命令/0523_0.png" alt=""></p>
<h4 id="1-1-3-git-add-向暂存区中添加文件"><a href="#1-1-3-git-add-向暂存区中添加文件" class="headerlink" title="1.1.3 git add-向暂存区中添加文件"></a>1.1.3 git add-向暂存区中添加文件</h4><p>假如只是在工作树中创建了文件，那么该文件不会被记入Git仓库的版本管理对象</p>
<p>要想让文件成为Git仓库的管理对象，需要用<code>git add</code>命令将其假如暂存区(Stage或Index)中，暂存区是提交之前的临时区域</p>
<p><img src="/2019/05/28/github-1-git命令/0523_1.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git add README.md</span><br></pre></td></tr></table></figure>
<h4 id="1-1-4-git-commit-保存仓库中的历史记录"><a href="#1-1-4-git-commit-保存仓库中的历史记录" class="headerlink" title="1.1.4 git commit-保存仓库中的历史记录"></a>1.1.4 git commit-保存仓库中的历史记录</h4><p>git commit 命令可以将当前暂存区中的文件实际保存到仓库的历史记录中。通过这些记录，可以在工作树中复原文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -m &quot;first commit&quot;</span><br></pre></td></tr></table></figure>
<h4 id="1-1-5-git-log-查看提交日志"><a href="#1-1-5-git-log-查看提交日志" class="headerlink" title="1.1.5 git log-查看提交日志"></a>1.1.5 git log-查看提交日志</h4><p><img src="/2019/05/28/github-1-git命令/0523_2.png" alt=""></p>
<ul>
<li><p><code>git log</code>:查看以往仓库中提交的日志</p>
</li>
<li><p><code>git log --pretty=short</code>:只显示提交日志的第一行</p>
</li>
<li><p><code>git log -p</code>:显示提交后文件的改动</p>
</li>
</ul>
<h4 id="1-1-6-git-diff-查看更改前后的区别"><a href="#1-1-6-git-diff-查看更改前后的区别" class="headerlink" title="1.1.6 git diff-查看更改前后的区别"></a>1.1.6 git diff-查看更改前后的区别</h4><p><code>git diff</code>命令可以查看工作树、暂存区、最新提交之间的差别</p>
<ul>
<li><p><code>git diff</code>:查看当前工作树和暂存区的区别</p>
</li>
<li><p><code>git add</code>:使用此指令将工作树中的文件加入暂存区，此时工作树和暂存区没有区别</p>
</li>
<li><p><code>git diff HEAD</code>:查看暂存区与最新提交的区别</p>
</li>
</ul>
<h3 id="1-2-分支的操作"><a href="#1-2-分支的操作" class="headerlink" title="1.2 分支的操作"></a>1.2 分支的操作</h3><p>在进行多个并行作业时，我们会用到分支。在这类分支中往往同时存在多个最新代码状态。</p>
<p>master分支是Git默认创建的分支，因此基本上所有开发都是以这个分支为中心进行的</p>
<h4 id="1-2-1-git-branch-展示分支一览表"><a href="#1-2-1-git-branch-展示分支一览表" class="headerlink" title="1.2.1 git branch-展示分支一览表"></a>1.2.1 git branch-展示分支一览表</h4><p><img src="/2019/05/28/github-1-git命令/0523_3.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch</span><br></pre></td></tr></table></figure>
<p>分支左侧的星号，表示我们当前所在的分支</p>
<h4 id="1-2-2-git-checkout-b-创建、切换分支"><a href="#1-2-2-git-checkout-b-创建、切换分支" class="headerlink" title="1.2.2 git checkout -b-创建、切换分支"></a>1.2.2 git checkout -b-创建、切换分支</h4><p><code>git checkout -b feature-A</code>:创建并切换到feature-A分支</p>
<p><code>git checkout -</code>:切换回上一分支</p>
<p><img src="/2019/05/28/github-1-git命令/0523_4.png" alt=""></p>
<h4 id="1-2-3-特性分支"><a href="#1-2-3-特性分支" class="headerlink" title="1.2.3 特性分支"></a>1.2.3 特性分支</h4><p>特性分支是集中实现单一特性(功能)，除此之外不进行任何作业的分支。日常开发中往往会创建数个特性分支，并保留一个稳定分支，一般是master分支担当</p>
<p>基于特性的工作在特性分支中进行，特性完成后再与master合并。这样可以保证master分支随时供人查看和创建新的特性分支</p>
<h4 id="1-2-4-git-merge-合并分支"><a href="#1-2-4-git-merge-合并分支" class="headerlink" title="1.2.4 git merge-合并分支"></a>1.2.4 git merge-合并分支</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git merge --no-ff feature-A</span><br></pre></td></tr></table></figure>
<p><img src="/2019/05/28/github-1-git命令/0523_5.png" alt=""></p>
<h4 id="1-2-5-git-log-–graph-以图表形式查看分支"><a href="#1-2-5-git-log-–graph-以图表形式查看分支" class="headerlink" title="1.2.5 git log –graph-以图表形式查看分支"></a>1.2.5 git log –graph-以图表形式查看分支</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git log --graph</span><br></pre></td></tr></table></figure>
<p><img src="/2019/05/28/github-1-git命令/0523_6.png" alt=""></p>
<h4 id="1-2-6-git-reset-回溯历史版本"><a href="#1-2-6-git-reset-回溯历史版本" class="headerlink" title="1.2.6 git reset-回溯历史版本"></a>1.2.6 git reset-回溯历史版本</h4><p>借助分散仓库的优势，可以在不影响其他仓库的前提下对历史版本进行操作</p>
<p><code>git reset --hard</code>根据目标时间点的哈希值，将当前仓库回溯到指定状态<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git reset --hard fd0cbcsdfa</span><br><span class="line">HEAD is now at fd0cbf0 Add index</span><br></pre></td></tr></table></figure></p>
<p><code>git reflog</code>查看当前仓库的操作日志，可以在日志中找到对应的哈希值</p>
<h4 id="1-2-7-git-commit-–amend-修改提交信息"><a href="#1-2-7-git-commit-–amend-修改提交信息" class="headerlink" title="1.2.7 git commit –amend-修改提交信息"></a>1.2.7 git commit –amend-修改提交信息</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git commit --amend</span><br></pre></td></tr></table></figure>
<p>此命令可以修改上一条提交信息</p>
<h3 id="1-3-合并冲突"><a href="#1-3-合并冲突" class="headerlink" title="1.3 合并冲突"></a>1.3 合并冲突</h3><p>此处合并时发生了冲突</p>
<p><img src="/2019/05/28/github-1-git命令/0523_7.png" alt=""></p>
<ol>
<li><p>查看冲突部分并解决</p>
</li>
<li><p>冲突解决后，使用<code>git add</code>和<code>git commit</code>命令，将合并的处理结果提交</p>
</li>
</ol>
<p><img src="/2019/05/28/github-1-git命令/0523_8.png" alt=""></p>
<h3 id="1-4-推送到远程仓库"><a href="#1-4-推送到远程仓库" class="headerlink" title="1.4 推送到远程仓库"></a>1.4 推送到远程仓库</h3><p>远程仓库，是与本地仓库相对独立的另一个仓库，主要部署在github上</p>
<h4 id="1-4-1-在github上创建远程仓库"><a href="#1-4-1-在github上创建远程仓库" class="headerlink" title="1.4.1 在github上创建远程仓库"></a>1.4.1 在github上创建远程仓库</h4><h4 id="1-4-2-git-remote-add-添加远程仓库"><a href="#1-4-2-git-remote-add-添加远程仓库" class="headerlink" title="1.4.2 git remote add-添加远程仓库"></a>1.4.2 git remote add-添加远程仓库</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add origin git@github.com:t0ugh/git-tutorial.git</span><br></pre></td></tr></table></figure>
<h4 id="1-4-3-git-push-推送到远程仓库"><a href="#1-4-3-git-push-推送到远程仓库" class="headerlink" title="1.4.3 git push 推送到远程仓库"></a>1.4.3 git push 推送到远程仓库</h4><ol>
<li><p>推送到<code>master</code>分支</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push -u origin master</span><br></pre></td></tr></table></figure>
<ul>
<li><code>-u</code>参数可以在推送的同时将<code>origin</code>仓库的<code>master</code>分支设置为本地仓库当前分支的<code>upstream</code></li>
</ul>
</li>
<li><p>推送到<code>master</code>之外的分支</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b feature-D</span><br><span class="line">$ git push -u origin feature-D</span><br></pre></td></tr></table></figure>
<ul>
<li>我们在本地仓库中创建<code>feature-D</code>分支，然后将它<code>push</code>给远程仓库并保持分支名称不变</li>
<li>现在，在远程仓库的GitHub页面就可以查看到<code>feature-D</code>分支S</li>
</ul>
</li>
</ol>
<h3 id="1-5-从远程仓库获取"><a href="#1-5-从远程仓库获取" class="headerlink" title="1.5 从远程仓库获取"></a>1.5 从远程仓库获取</h3><h4 id="1-5-1-git-clone-获取远程仓库"><a href="#1-5-1-git-clone-获取远程仓库" class="headerlink" title="1.5.1 git clone-获取远程仓库"></a>1.5.1 git clone-获取远程仓库</h4><h5 id="1-获取远程仓库"><a href="#1-获取远程仓库" class="headerlink" title="1 获取远程仓库"></a>1 获取远程仓库</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone git@github.com:t0ugh/git-tutorial.git</span><br></pre></td></tr></table></figure>
<p>执行<code>git clone</code>命令后，我们会默认位于<code>master</code>分支下，同时系统将<code>origin</code>设置为该远程仓库的标识符</p>
<p>也就是说当前本地仓库的<code>master</code>分支与Github端远程仓库(<code>origin</code>)的<code>master</code>分支在内容上完全相同</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -a</span><br><span class="line">* master</span><br><span class="line">  remotes/origin/HEAD -&gt; origin/master</span><br><span class="line">  remotes/origin/feature-D</span><br><span class="line">  remotes/origin/master</span><br></pre></td></tr></table></figure>
<h5 id="2-获取远程的feature-D分支"><a href="#2-获取远程的feature-D分支" class="headerlink" title="2 获取远程的feature-D分支"></a>2 获取远程的feature-D分支</h5><p>将feature-D分支获取到本地仓库<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b feature-D origin/feature-D</span><br></pre></td></tr></table></figure></p>
<h5 id="3-修改并推送feature-D分支"><a href="#3-修改并推送feature-D分支" class="headerlink" title="3 修改并推送feature-D分支"></a>3 修改并推送feature-D分支</h5><p>以名为origin的feature-D分支为来源，在本地创建feature-D分支</p>
<p>对本地内容进行修改和提交，提交后，推送到远程的feature-D分支</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push</span><br></pre></td></tr></table></figure>
<h4 id="1-5-2-git-pull-获取最新的远程仓库分支"><a href="#1-5-2-git-pull-获取最新的远程仓库分支" class="headerlink" title="1.5.2 git pull-获取最新的远程仓库分支"></a>1.5.2 git pull-获取最新的远程仓库分支</h4><p>使用git pull命令，将本地的feature-D分支更新到最新状态</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git pull origin feature-D</span><br></pre></td></tr></table></figure>
<p>如果两人同时修改了同一部分的源代码，push很容易发生冲突。所以多名开发者在同一个分支中进行工作时，为减少冲突情况的发生，建议更频繁的进行push和pull操作</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/22/Docker-2-核心技术/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="T0UGH(GuiPing Wang)">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://i.loli.net/2020/03/21/WAKimNUecFR64uo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="打怪升级日常">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/22/Docker-2-核心技术/" itemprop="url">[Docker][2][核心技术]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-22T23:19:50+08:00">
                2019-05-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Docker/" itemprop="url" rel="index">
                    <span itemprop="name">Docker</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/22/Docker-2-核心技术/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/05/22/Docker-2-核心技术/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="2-核心技术"><a href="#2-核心技术" class="headerlink" title="2 核心技术"></a>2 核心技术</h2><h3 id="2-1-Docker镜像"><a href="#2-1-Docker镜像" class="headerlink" title="2.1 Docker镜像"></a>2.1 Docker镜像</h3><h4 id="2-1-1-Docker镜像"><a href="#2-1-1-Docker镜像" class="headerlink" title="2.1.1 Docker镜像"></a>2.1.1 Docker镜像</h4><ul>
<li><p>Docker镜像就像停止运行的容器</p>
</li>
<li><p>可以从镜像仓库服务中拉取镜像，拉取操作会将镜像下载到本地Docker主机</p>
</li>
<li><p>使用镜像可以启动多个容器</p>
</li>
<li><p>镜像由很多层组成，每层叠加之后，在外部看就像一个独立的对象。</p>
</li>
<li><p>镜像内部是一个精简的操作系统，其中包含应用运行所必须的文件和依赖包</p>
</li>
</ul>
<h4 id="2-1-2-镜像与容器"><a href="#2-1-2-镜像与容器" class="headerlink" title="2.1.2 镜像与容器"></a>2.1.2 镜像与容器</h4><ul>
<li><p>镜像可以启动一个或多个容器</p>
</li>
<li><p>一旦容器从镜像启动后，二者就是相互依赖的，并且在镜像上启动的容器全部停止之前，镜像是无法被删除的</p>
</li>
</ul>
<h4 id="2-1-3-镜像通常较小"><a href="#2-1-3-镜像通常较小" class="headerlink" title="2.1.3 镜像通常较小"></a>2.1.3 镜像通常较小</h4><ul>
<li><p>镜像中包含了应用/服务运行时必须的操作系统和应用文件</p>
</li>
<li><p>构建镜像时通常要剪裁掉不必要的部分，保持较小的体积</p>
</li>
<li><p>镜像不包含内核，共享操作系统内核</p>
</li>
</ul>
<h4 id="2-1-4-镜像拉取和镜像仓库"><a href="#2-1-4-镜像拉取和镜像仓库" class="headerlink" title="2.1.4 镜像拉取和镜像仓库"></a>2.1.4 镜像拉取和镜像仓库</h4><ul>
<li><p>通过 <code>docker pull</code>可将镜像拉取到本地主机</p>
</li>
<li><p>Docker镜像存储在镜像仓库服务中。镜像仓库服务包含了多个镜像仓库。同样，一个镜像仓库包含多个镜像</p>
</li>
<li><p>官方仓库中的镜像是安全可靠的，大多数流行的操作系统和应用在Docker Hub的官方仓库中都有其对应得镜像</p>
</li>
</ul>
<h4 id="2-1-5-镜像命名和标签"><a href="#2-1-5-镜像命名和标签" class="headerlink" title="2.1.5 镜像命名和标签"></a>2.1.5 镜像命名和标签</h4><ul>
<li><p>只需要给出镜像的名字和标签，就可以从官方仓库定位一个镜像，例如<code>alpine:latest</code></p>
</li>
<li><p>从非官方仓库拉取镜像，需要在仓库名称面前加上对应作者Docker Hub的用户名，例如:<code>tough/test:v1</code></p>
</li>
</ul>
<h4 id="2-1-6-镜像与分层"><a href="#2-1-6-镜像与分层" class="headerlink" title="2.1.6 镜像与分层"></a>2.1.6 镜像与分层</h4><ul>
<li><p>Docker镜像由一些松耦合的只读镜像层组成</p>
</li>
<li><p>Docker负责堆叠这些镜像层，并且表示为单个统一的对象</p>
</li>
<li><p>所有的Docker镜像都起始于一个基础镜像层，当进行修改或增加新的内容时，就会在当前的镜像层之上创建新的镜像层，如下图所示</p>
<p>  <img src="/2019/05/22/Docker-2-核心技术/0521_0.jpg" alt=""></p>
</li>
<li>docker通过存储引擎的方式来实现镜像层堆叠，并对外展示为统一的文件系统</li>
</ul>
<h4 id="2-1-7-共享镜像层"><a href="#2-1-7-共享镜像层" class="headerlink" title="2.1.7 共享镜像层"></a>2.1.7 共享镜像层</h4><ul>
<li><p>Docker可以识别出要拉取的镜像中，哪几层已经在本地存在了，然后共享这几层，可以有效节省空间并提升性能</p>
</li>
<li><p>每个存储引擎都有自己的镜像分层、镜像层共享以及写时复制</p>
</li>
</ul>
<h4 id="2-1-8-镜像散列值-摘要"><a href="#2-1-8-镜像散列值-摘要" class="headerlink" title="2.1.8 镜像散列值(摘要)"></a>2.1.8 镜像散列值(摘要)</h4><ul>
<li><p>内容散列: 散列值与镜像中所有文件的内容有关，修改镜像的配置或者修改任意的镜像层，都会导致加密散列值的变化</p>
</li>
<li><p>内容寻址模型极大提升了安全性，提供了一种方式来保证镜像和镜像层数据是一致的</p>
</li>
</ul>
<h3 id="2-2-Docker容器"><a href="#2-2-Docker容器" class="headerlink" title="2.2 Docker容器"></a>2.2 Docker容器</h3><h4 id="2-2-1-Docker容器"><a href="#2-2-1-Docker容器" class="headerlink" title="2.2.1 Docker容器"></a>2.2.1 Docker容器</h4><ul>
<li><p>容器是镜像的运行时实例，可以从单个镜像上启动一个或多个容器</p>
</li>
<li><p>容器会随着其中运行应用的退出而终止</p>
</li>
<li><p>常用命令</p>
<ul>
<li>使用<code>docker run</code>命令可以启动容器</li>
<li>使用<code>docker stop</code>命令可以暂停容器</li>
<li>使用<code>docker start</code>命令可以重启容器</li>
<li>使用<code>docker rm</code>命令可以删除容器</li>
</ul>
</li>
</ul>
<h4 id="2-2-2-容器vs虚拟机"><a href="#2-2-2-容器vs虚拟机" class="headerlink" title="2.2.2 容器vs虚拟机"></a>2.2.2 容器vs虚拟机</h4><ul>
<li><p>容器和虚拟机都依赖于宿主机才能运行</p>
</li>
<li><p>容器模型</p>
<ol>
<li>首先，OS也占用全部硬件资源</li>
<li>在OS层之上要安装容器引擎，容器引擎可以获得系统资源，</li>
<li>接着把资源分割为安全的互相隔离的资源结构，称之为容器</li>
<li>每个容器看起来像一个真实的操作系统，在其内部可以运行应用</li>
</ol>
</li>
<li><p>更多的</p>
<ul>
<li>Hypervisor是硬件虚拟化(Hardware Virtualization)将硬件物理资源划分为虚拟资源</li>
<li>容器是操作系统虚拟化，将操作系统资源划分为虚拟资源</li>
</ul>
</li>
</ul>
<h4 id="2-2-3-虚拟机的额外开销"><a href="#2-2-3-虚拟机的额外开销" class="headerlink" title="2.2.3 虚拟机的额外开销"></a>2.2.3 虚拟机的额外开销</h4><ul>
<li><p>每个虚拟机都有一份OS损耗，而容器只有一份OS损耗</p>
</li>
<li><p>虚拟机因为需要启动操作系统，启动速度慢，容器只需要启动位于下层操作系统的共享内核，启动速度快</p>
</li>
</ul>
<h4 id="2-2-4-容器进程"><a href="#2-2-4-容器进程" class="headerlink" title="2.2.4 容器进程"></a>2.2.4 容器进程</h4><ul>
<li><p>容器中的进程是精简的，比普通操作系统要少</p>
</li>
<li><p>杀死容器中的主进程，则容器也会被杀死，这个主进程一般是<code>pid</code>为<code>1</code>的进程，但是这种进程一般是杀不死的</p>
</li>
</ul>
<h4 id="2-2-5-容器生命周期"><a href="#2-2-5-容器生命周期" class="headerlink" title="2.2.5 容器生命周期"></a>2.2.5 容器生命周期</h4><p>生命周期</p>
<ol>
<li><p><code>docker run</code> 启动容器</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run --name percy -it ubuntu:latest:/bin/bash</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>docker stop</code> 停止容器</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker stop percy</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>docker start</code> 重启容器</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker start percy</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除容器需要两步，先停止容器再删除容器</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker stop percy</span><br><span class="line">$ docker rm percy</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>其他</p>
<ul>
<li>直到明确删除容器前，容器的数据都不会丢弃</li>
<li>就算删除了容器，如果将容器数据存储到卷中，数据也会被保存</li>
<li>尽量使用两步来删除容器，让容器有机会正常停止手头的工作</li>
</ul>
<h4 id="2-2-6-重启策略"><a href="#2-2-6-重启策略" class="headerlink" title="2.2.6 重启策略"></a>2.2.6 重启策略</h4><ol>
<li><p><code>always</code>: 除非容器被明确停止，否则该策略会一直尝试重启处于停止状态的容器</p>
</li>
<li><p><code>unless-stopped</code>: 哪些处于Stopped状态的容器，不会在Docker daemon 重启的时候重启</p>
</li>
<li><p><code>on-failure</code>: 在退出容器且返回值不是0的时候，重启容器</p>
</li>
</ol>
<h4 id="2-2-7-docker-run的一些参数"><a href="#2-2-7-docker-run的一些参数" class="headerlink" title="2.2.7 docker run的一些参数"></a>2.2.7 <code>docker run</code>的一些参数</h4><p>例如<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d --name webserver -p 80:8080 nige/dock</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p><code>-d</code>：表示后台模式，告知容器在后台运行</p>
</li>
<li><p><code>-p</code>将Docker主机的端口映射到容器内，这里是将Docker主机的80端口映射到容器内的8080端口，这意味着当有流量访问主机的80端口时，流量会直接映射到容器的8080端口</p>
</li>
</ul>
<h3 id="2-3-应用的容器化"><a href="#2-3-应用的容器化" class="headerlink" title="2.3 应用的容器化"></a>2.3 应用的容器化</h3><ul>
<li>Docker的核心思想就是如何将应用整合到容器中，并且能在容器中实际运行，这个过程称为容器化</li>
</ul>
<h4 id="2-3-1-容器化简介"><a href="#2-3-1-容器化简介" class="headerlink" title="2.3.1 容器化简介"></a>2.3.1 容器化简介</h4><ul>
<li><p>容器是为应用而生</p>
</li>
<li><p>容器化的步骤</p>
<ol>
<li>编写应用代码</li>
<li>创建一个<code>Dockerfile</code>，其中包括当前应用的描述、依赖以及该如何运行这个应用</li>
<li>对该<code>Dockerfile</code>执行<code>docker image build</code>命令</li>
<li>等待Docker将应用程序构建到<code>Docker</code>镜像中</li>
<li>运行，从镜像中产生容器</li>
</ol>
</li>
<li><p>容器化的基本过程<br>  <img src="/2019/05/22/Docker-2-核心技术/0522_2.jpg" alt=""></p>
</li>
</ul>
<h4 id="2-3-2-单体应用容器化"><a href="#2-3-2-单体应用容器化" class="headerlink" title="2.3.2 单体应用容器化"></a>2.3.2 单体应用容器化</h4><h5 id="1-获取应用代码"><a href="#1-获取应用代码" class="headerlink" title="1 获取应用代码"></a>1 获取应用代码</h5><ul>
<li><p>这里先介绍如何完成单节点应用的容器化，也可以使用Docker Compose完成多节点应用容器化</p>
</li>
<li><p><a href="https://github.com/nigelpoulton/psweb" target="_blank" rel="noopener">应用代码地址</a></p>
</li>
</ul>
<h5 id="2-分析Docker文件"><a href="#2-分析Docker文件" class="headerlink" title="2 分析Docker文件"></a>2 分析Docker文件</h5><ul>
<li><p>源码</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># Test web-app to use with Pluralsight courses and Docker Deep Dive book</span><br><span class="line"># Linux x64</span><br><span class="line">FROM alpine</span><br><span class="line"></span><br><span class="line">LABEL maintainer=&quot;nigelpoulton@hotmail.com&quot;</span><br><span class="line"></span><br><span class="line"># Install Node and NPM</span><br><span class="line">RUN apk add --update nodejs nodejs-npm</span><br><span class="line"></span><br><span class="line"># Copy app to /src</span><br><span class="line">COPY . /src</span><br><span class="line"></span><br><span class="line">WORKDIR /src</span><br><span class="line"></span><br><span class="line"># Install dependencies</span><br><span class="line">RUN  npm install</span><br><span class="line"></span><br><span class="line">EXPOSE 8080</span><br><span class="line"></span><br><span class="line">ENTRYPOINT [&quot;node&quot;, &quot;./app.js&quot;]</span><br></pre></td></tr></table></figure>
</li>
<li><p>Dockerfile通常放到构建上下文的根目录</p>
</li>
<li><p>Dockerfile的主要用途</p>
<ul>
<li>Dockerfile对当前应用及其依赖有个清晰的描述</li>
<li>可以指导Docker完成应用的容器化</li>
</ul>
</li>
<li><p>上述docker文件的步骤</p>
<ol>
<li>以alpine镜像为当前镜像基础<ul>
<li>每个Dockerfile的第一行都是<code>FROM</code>指令</li>
<li><code>FROM</code>指令指定的镜像，会作为当前镜像的一个基础镜像</li>
</ul>
</li>
<li>指定维护者，使用<code>LABEL</code>标签</li>
<li>安装Node.js和NPM<ul>
<li><code>RUN apk add --update nodejs nodejs-npm</code>指令使用alpine中的apk包管理器将nodejs和npm安装到当前镜像中</li>
<li><code>RUN</code>指令会在<code>FROM</code>指定的alpine基础镜像之上，新建一个镜像层来存储这些安装内容</li>
</ul>
</li>
<li>将应用的代码复制到镜像当中<ul>
<li><code>COPY . /src</code>指令将应用相关文件从构建上下文复制到当前镜像中，并新建一个镜像层来存储</li>
</ul>
</li>
<li>设置新的工作目录<ul>
<li>Dockerfile通过<code>WORKDIR</code>命令，为Dockerfile中尚未执行的指令设置工作目录</li>
</ul>
</li>
<li>安装依赖包<ul>
<li><code>npm install</code>用来安装当前应用的相关依赖包，并且新建镜像层来保存相关的依赖文件</li>
</ul>
</li>
<li>配置应用的网络端口<ul>
<li><code>EXPOSE 8080</code>指令可以完成相应端口的设置</li>
<li>这个配置信息会作为镜像的元数据保存，不会产生新的镜像层</li>
</ul>
</li>
<li>将<code>app.js</code>设置为默认运行的应用<ul>
<li>通过<code>ENTRYPOINT</code>指令指定当前镜像的入口程序。</li>
<li>这个配置信息会作为镜像的元数据保存，不会产生新的镜像层</li>
</ul>
</li>
</ol>
</li>
</ul>
<h5 id="3-构建镜像"><a href="#3-构建镜像" class="headerlink" title="3 构建镜像"></a>3 构建镜像</h5><ul>
<li><p>执行如下指令</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker image build -t web:latest .</span><br></pre></td></tr></table></figure>
</li>
<li><p>其中，命令最后的<code>.</code>表示Docker在构建过程中，使用当前目录作为上下文</p>
</li>
</ul>
<h5 id="4-推送镜像到仓库"><a href="#4-推送镜像到仓库" class="headerlink" title="4 推送镜像到仓库"></a>4 推送镜像到仓库</h5><ul>
<li><p>可以将镜像保存在一个镜像仓库服务，这样存储比较安全，且可以被其他人访问到</p>
</li>
<li><p>需要为镜像打标签，且置于自己用户名的二级目录下，例如</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker image tag web:latest t0ugh/web:latest</span><br></pre></td></tr></table></figure>
</li>
<li><p>通过执行如下命令，将镜像推到仓库</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker image push t0ugh/web:latest</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="5-运行应用程序"><a href="#5-运行应用程序" class="headerlink" title="5 运行应用程序"></a>5 运行应用程序</h5><ul>
<li><p>运行如下指令，基于上述镜像启动容器</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d --name -c1 -p 80:8080 web:latest</span><br></pre></td></tr></table></figure>
</li>
<li><p>这个命令会把容器内部的8080端口映射到Docker主机的80端口</p>
</li>
</ul>
<h5 id="6-其他"><a href="#6-其他" class="headerlink" title="6 其他"></a>6 其他</h5><ul>
<li><p>Dockerfile中的注释，使用<code>#</code>开头</p>
</li>
<li><p>除了注释之外，都是指令</p>
</li>
<li><p><code>Docker image build</code>命令会按行解析Dockerfile中的指令并且顺序执行</p>
</li>
<li><p>如果指令的作用是向镜像中增添新的文件或者程序，那么这条指令就会新建镜像层；如果只是告诉Docker如何完成构建或者如何运行程序，那么只会增加镜像的元数据</p>
</li>
<li><p><code>docker image history</code>查看构建过程中的历史</p>
</li>
<li><p><code>docker image inspect</code>查看镜像元数据</p>
</li>
</ul>
<h4 id="2-3-3-生产环境中的多阶段构建"><a href="#2-3-3-生产环境中的多阶段构建" class="headerlink" title="2.3.3 生产环境中的多阶段构建"></a>2.3.3 生产环境中的多阶段构建</h4><ul>
<li><p>背景：如前所示，正常的构建过程有可能引入大量并不必须的内容，比如，下载完对应的包后，就不再需要NPM或者Maven。再比如，用webpack打包完js文件后，就不再需要node了</p>
</li>
<li><p>多阶段构建可以解决这个问题，让镜像的体积更小</p>
</li>
<li><p>它可以从之前的构建阶段中仅复制生产环境相关的应用代码，而不复制生产环境不需要的构件</p>
</li>
</ul>
<h4 id="2-3-4-其他"><a href="#2-3-4-其他" class="headerlink" title="2.3.4 其他"></a>2.3.4 其他</h4><ol>
<li><p>利用构建缓存</p>
</li>
<li><p>合并镜像</p>
</li>
<li><p>使用no-install-recommends:它可以保证使用API包管理器时，只安装核心依赖</p>
</li>
<li><p>不要安装MSI包</p>
</li>
</ol>
<h3 id="2-4-使用Docker-Compose部署应用"><a href="#2-4-使用Docker-Compose部署应用" class="headerlink" title="2.4 使用Docker Compose部署应用"></a>2.4 使用Docker Compose部署应用</h3><h4 id="2-4-1-简介"><a href="#2-4-1-简介" class="headerlink" title="2.4.1 简介"></a>2.4.1 简介</h4><ul>
<li><p>Docker Compose主要用于部署分布在多容器中的应用</p>
</li>
<li><p>它是一个需要在Docker主机上进行安装的Python工具，使用时需要编写定义多容器应用的<code>YAML</code>文件，然后将其交给<code>docker-compose</code>命令处理，<code>docker-compose</code>会基于Docker引擎API完成应用的部署</p>
</li>
<li><p>还提供了一系列命令来管理应用的完整生命周期</p>
</li>
<li><p>可以将Docker Compose的配置文件置于版本管理系统中管理</p>
<p>  <img src="/2019/05/22/Docker-2-核心技术/0522_0.png" alt=""></p>
</li>
</ul>
<h4 id="2-4-2-在Linux上安装Docker-Compose"><a href="#2-4-2-在Linux上安装Docker-Compose" class="headerlink" title="2.4.2 在Linux上安装Docker Compose"></a>2.4.2 在Linux上安装Docker Compose</h4><ol>
<li><p>使用curl命令下载二进制文件</p>
</li>
<li><p>使用chmod命令将其置为可运行</p>
</li>
</ol>
<h4 id="2-4-3-解读Compose文件"><a href="#2-4-3-解读Compose文件" class="headerlink" title="2.4.3 解读Compose文件"></a>2.4.3 解读Compose文件</h4><ul>
<li><p>Docker Compose使用YAML文件来定义多服务的应用</p>
</li>
<li><p>示例: docker-compose.yml</p>
  <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">"3.5"</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"><span class="attr">    web-fe:</span></span><br><span class="line"><span class="attr">        build:</span> <span class="string">.</span></span><br><span class="line"><span class="attr">        command:</span> <span class="string">python</span> <span class="string">app.py</span></span><br><span class="line"><span class="attr">        ports:</span></span><br><span class="line"><span class="attr">            - target:</span> <span class="number">5000</span></span><br><span class="line"><span class="attr">            - published:</span> <span class="number">5000</span></span><br><span class="line"><span class="attr">        networks:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">counter-net</span></span><br><span class="line"><span class="attr">        volumes:</span></span><br><span class="line"><span class="attr">            - type:</span> <span class="string">volume</span></span><br><span class="line"><span class="attr">              source:</span> <span class="string">conter-val</span></span><br><span class="line"><span class="attr">              target:</span> <span class="string">/code</span></span><br><span class="line"><span class="attr">        redis:</span></span><br><span class="line"><span class="attr">            image:</span> <span class="string">"redis:alpine"</span></span><br><span class="line"><span class="attr">            networks:</span></span><br><span class="line"><span class="attr">                counter-net:</span></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line"><span class="attr">    counter-net:</span></span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line"><span class="attr">    counter-vol:</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>version是必须要指定的，而且要放到文件的第一行</p>
</li>
<li><p>services用来定义不同的应用服务</p>
<ul>
<li>每个Service会部署到一个容器中</li>
<li>会使用key来作为容器名字的一部分</li>
</ul>
</li>
</ul>
<h4 id="2-4-3-常用指令"><a href="#2-4-3-常用指令" class="headerlink" title="2.4.3 常用指令"></a>2.4.3 常用指令</h4><ul>
<li><p><code>docker-compose up</code>: 用来部署一个Compose应用。默认情况下该命令会读取名为<code>docker-compose.yml</code>或<code>docker-compose.yaml</code>的文件</p>
</li>
<li><p><code>docker-compose stop</code>命令会停止Compose应用相关的所有容器，但不会删除它们</p>
</li>
<li><p><code>docker-compose rm</code>命令用来删除已停止的Compose应用，它会删除容器和网络，但不会删除卷和镜像</p>
</li>
<li><p><code>docker-compose restart</code>命令会重启已停止的<code>Compose</code>应用。如果用户在停止之后对该应用进行了变更。变更的内容不会反映到重启后的应用中</p>
</li>
<li><p><code>docker-compose ps</code>列出<code>Compose</code>应用中的各个容器。输出内容包括当前的状态、容器运行的命令以及网络端口</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/22/Docker-1-简介/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="T0UGH(GuiPing Wang)">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://i.loli.net/2020/03/21/WAKimNUecFR64uo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="打怪升级日常">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/22/Docker-1-简介/" itemprop="url">[Docker][1][简介]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-22T23:19:36+08:00">
                2019-05-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Docker/" itemprop="url" rel="index">
                    <span itemprop="name">Docker</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/22/Docker-1-简介/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/05/22/Docker-1-简介/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-简介"><a href="#1-简介" class="headerlink" title="1 简介"></a>1 简介</h2><p>点此进入<a href="https://labs.play-with-docker.com/" target="_blank" rel="noopener">play with docker</a></p>
<h3 id="1-1-容器发展之路"><a href="#1-1-容器发展之路" class="headerlink" title="1.1 容器发展之路"></a>1.1 容器发展之路</h3><ol>
<li><p>曾经，每个服务器只能运行单一应用。Windows和Linux操作系统都没有相应的技术手段来保证在一台服务器上稳定运行多个应用</p>
</li>
<li><p>VM技术是一种允许多应用能够稳定、安全同时运行在一个服务器上的技术</p>
</li>
<li><p>虚拟机缺点是依靠其专用的操作系统，OS会额外消耗资源</p>
</li>
<li><p>容器模型与虚拟机模型的区别是容器的运行不会独占操作系统</p>
</li>
<li><p>容器的优点是启动快且便于迁移</p>
</li>
<li><p>Kubernetes是Docker之上的一个平台，现在采用Docker实现其底层容器相关的操作</p>
</li>
</ol>
<h3 id="1-2-走进Docker"><a href="#1-2-走进Docker" class="headerlink" title="1.2 走进Docker"></a>1.2 走进Docker</h3><ul>
<li><p>Docker是一种运行于Linux和Windows上的软件，用于创建、管理和编排容器</p>
</li>
<li><p>Docker一词源于英国口语，意为码头工人，即从船上装卸货物的人</p>
</li>
<li><p>Moby是Github上Docker的开源项目</p>
</li>
<li><p>许多Docker内置的组件都是可拔插的，即可以替换为第三方的组件</p>
</li>
<li><p>OCI(开放容器计划)是一个旨在对容器基础架构中的基础组件进行标准化的机构。目前已经制订了镜像规范和运行时规范，将容器生态团结起来</p>
</li>
</ul>
<h3 id="1-3-Docker安装"><a href="#1-3-Docker安装" class="headerlink" title="1.3 Docker安装"></a>1.3 Docker安装</h3><ul>
<li><p>win10专业版，进bios开虚拟化，启动Hyper-x，去<a href="https://hub.docker.com/editions/community/docker-ce-desktop-windows" target="_blank" rel="noopener">这里</a>现在Docker for Windows版</p>
</li>
<li><p>每个Docker容器都有一个本地存储空间，本地存储是通过存储驱动(Storage Driver)进行管理的</p>
</li>
</ul>
<h3 id="1-4-纵观Docker"><a href="#1-4-纵观Docker" class="headerlink" title="1.4 纵观Docker"></a>1.4 纵观Docker</h3><h4 id="1-4-1-运维视角"><a href="#1-4-1-运维视角" class="headerlink" title="1.4.1 运维视角"></a>1.4.1 运维视角</h4><ul>
<li><p>Docker有两个主要组件:Docker客户端和Docker deamon(服务端或者引擎)</p>
</li>
<li><p>镜像</p>
<ul>
<li>可将镜像理解为一个包含基础操作系统，以及应用程序运行所需的代码和依赖包</li>
<li>实际等价于未运行的容器</li>
<li>Docker的每个镜像都有自己唯一的id</li>
</ul>
</li>
<li><p>容器</p>
<ul>
<li>可以从容器来启动镜像</li>
<li><code>docker run</code>可以运行镜像</li>
<li><code>Ctrl-PQ</code>组合键可以在退出容器的同时保证容器运行</li>
<li><code>docker ls</code>列出系统内部处于运行状态的容器</li>
</ul>
</li>
</ul>
<h4 id="1-4-2-开发角度"><a href="#1-4-2-开发角度" class="headerlink" title="1.4.2 开发角度"></a>1.4.2 开发角度</h4><ul>
<li><p>容器即应用</p>
</li>
<li><p>每个仓库都有一个名为<code>Dockerfile</code>的文件。<code>Dockerfile</code>是一个纯文本文件，其中描述了如何将应用构建到<code>Docker</code>镜像中</p>
</li>
<li><p>使用<code>docker image build</code>命令可以根据Dockerfile中的指令来创建新的镜像</p>
</li>
</ul>
<h3 id="1-5-Docker引擎"><a href="#1-5-Docker引擎" class="headerlink" title="1.5 Docker引擎"></a>1.5 Docker引擎</h3><ul>
<li><p>Docker引擎是用来运行和管理容器的核心软件</p>
</li>
<li><p>Docker引擎可以进行模块化，有很多可交换的组件组成</p>
</li>
<li><p>runc: 用于创建容器的组件</p>
</li>
<li><p>containerd: 用于容器生命周期管理</p>
</li>
<li><p>daemon:之前Docker的服务器，目前其中的越来越多功能被拆解出来</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/22/敏捷开发-4-Scrum计划和集体承诺/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="T0UGH(GuiPing Wang)">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://i.loli.net/2020/03/21/WAKimNUecFR64uo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="打怪升级日常">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/22/敏捷开发-4-Scrum计划和集体承诺/" itemprop="url">[敏捷开发][4][Scrum计划和集体承诺]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-22T23:16:12+08:00">
                2019-05-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/敏捷开发/" itemprop="url" rel="index">
                    <span itemprop="name">敏捷开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/22/敏捷开发-4-Scrum计划和集体承诺/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/05/22/敏捷开发-4-Scrum计划和集体承诺/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="4-Scrum计划和集体承诺"><a href="#4-Scrum计划和集体承诺" class="headerlink" title="4 Scrum计划和集体承诺"></a>4 Scrum计划和集体承诺</h2><p>本章要点</p>
<ul>
<li>Scrum团队所使用的计划冲刺的方法</li>
<li>用户故事如何帮助你确切了解用户需求</li>
<li>将使用故事点和项目速度来估计你的团队在一次冲刺中能完成</li>
<li>学习两个有价值的可视化工具(燃尽图和任务板)</li>
</ul>
<h3 id="4-1-以用户故事构建用户真正会用到的功能"><a href="#4-1-以用户故事构建用户真正会用到的功能" class="headerlink" title="4.1 以用户故事构建用户真正会用到的功能"></a>4.1 以用户故事构建用户真正会用到的功能</h3><p>简介</p>
<ul>
<li><p>用户故事是描述用户使用软件某一特定功能时的一个简明工具</p>
</li>
<li><p>作为一个<code>&lt;用户类型&gt;</code>，我要<code>&lt;要执行的某个具体的动作&gt;</code>以便<code>&lt;要达到的某种目的&gt;</code></p>
</li>
<li><p>一个用户故事的例子</p>
<p>  <img src="/2019/05/22/敏捷开发-4-Scrum计划和集体承诺/0520_1.jpg" alt=""></p>
</li>
</ul>
<p>用户故事的使用</p>
<ul>
<li>要开始一个冲刺的时候，产品所有者和开发团队可以从积压工作表中抽出一些用户故事，并把它们作为</li>
</ul>
<h3 id="4-2-满意条件"><a href="#4-2-满意条件" class="headerlink" title="4.2 满意条件"></a>4.2 满意条件</h3><p>简介</p>
<ul>
<li><p>一般满意条件是针对每个用户故事定义的，编写完用户故事后，再把用户使用该软件能够做的一些具体的事情也写出来，形成<strong>满意条件</strong></p>
</li>
<li><p>一个满意条件的例子<br><img src="/2019/05/22/敏捷开发-4-Scrum计划和集体承诺/0520_2.jpg" alt=""></p>
</li>
<li><p>满意条件用来给<strong>完成</strong>下一个具体的<strong>定义</strong>，这就给团队和产品所有者一个具体的、没有歧义的方式来确定一个用户故事完成了没有</p>
</li>
</ul>
<h3 id="4-3-故事点和速度"><a href="#4-3-故事点和速度" class="headerlink" title="4.3 故事点和速度"></a>4.3 故事点和速度</h3><p>故事点</p>
<ul>
<li><p>所谓<strong>故事点</strong>，就是通过给每个用户故事<strong>分配</strong>一定的<strong>点数</strong>，用以表示开发这个用户故事需要付出多大努力。</p>
</li>
<li><p>通常这些点数是通过将当前用户故事和<strong>过去开发的用户故事</strong>进行<strong>比较</strong>得到的</p>
</li>
</ul>
<p>项目速度</p>
<ul>
<li>随着故事点的分配，你的团队就会开始发现他们能够在一次冲刺中完成相当于多少个故事点的用户故事，</li>
<li>我们用<code>点数/每周期</code>作为<strong>项目的速度</strong></li>
</ul>
<p>一次使用故事点方法的冲刺计划会议</p>
<ol>
<li><p>从<strong>产品积压工作表</strong>中<strong>最有价值</strong>的那些用户故事开始</p>
</li>
<li><p>从中选择一个用户故事，从<strong>过去的冲刺</strong>中选一个工作量相当的用户故事，将后者的故事点数赋给前者</p>
</li>
<li><p>跟<strong>团队讨论</strong>，看这个估计是否准确</p>
</li>
<li><p>如此循环，直到<strong>积累</strong>够一次冲刺的故事点</p>
</li>
</ol>
<h3 id="4-4-燃尽图"><a href="#4-4-燃尽图" class="headerlink" title="4.4 燃尽图"></a>4.4 燃尽图</h3><p>简介</p>
<ul>
<li>燃尽图是一种让任何人都可以一眼看出<strong>当前的冲刺与团队过去的速度</strong>相比如何的方法</li>
</ul>
<p>燃尽图的使用方式</p>
<ol>
<li><p>以空白的折线图开始。X轴为日期，Y轴是故事点数。将起点和终点连接就得到了所谓的“<strong>指导线</strong>”</p>
</li>
<li><p>一旦第一个用户故事<strong>完成</strong>并移动到任务板的”已完成”一栏，就在图中画下下一个点</p>
</li>
<li><p>可能在每日例会中发现需要<strong>增加</strong>新的工作，当把新的任务卡添加到任务板时，团队一起对新增任务进行工时估计并加入到燃尽图中</p>
</li>
<li><p>在项目的尾声，留意你的真实进度与指导线之间的差距，如果你的真实进度曲线总是高于指导线一大截，就需要适当<strong>移除</strong>一些用户故事了</p>
</li>
</ol>
<h3 id="4-5-通过用户故事、故事点、任务和任务板来计划并实施冲刺"><a href="#4-5-通过用户故事、故事点、任务和任务板来计划并实施冲刺" class="headerlink" title="4.5 通过用户故事、故事点、任务和任务板来计划并实施冲刺"></a>4.5 通过用户故事、故事点、任务和任务板来计划并实施冲刺</h3><p>常见的作法</p>
<ol>
<li><p>Scrum主管主持第二次冲刺计划会议，从第一个用户故事开始，逐个<strong>讨论每个用户故事需要做哪些具体的工作</strong>。</p>
<ul>
<li>大家一起得出一个<strong>任务列表</strong>，列表中的每个任务都是大家认为可以在一天以内完成的。</li>
<li>每个任务都要有一张<strong>任务卡</strong>，和对应的故事卡放到一起<br><img src="/2019/05/22/敏捷开发-4-Scrum计划和集体承诺/0521_6.jpg" alt=""></li>
</ul>
</li>
<li><p>用户<strong>故事卡和任务卡</strong>被放到一起，并添加到任务板的”待处理”一栏</p>
</li>
</ol>
<pre><code>![](敏捷开发-4-Scrum计划和集体承诺/0521_5.jpg)
</code></pre><ol start="3">
<li><p>团队成员完成了一个任务并准备开始下一个任务时，他就把已完成任务的任务卡移到”<strong>已完成</strong>“一栏，然后把接下来要处理的任务放到”<strong>处理中</strong>“一栏</p>
<p> <img src="/2019/05/22/敏捷开发-4-Scrum计划和集体承诺/0521_4.jpg" alt=""></p>
</li>
<li><p>假如发现某个用户故事需要<strong>添加额外</strong>的任务卡，就把新增的任务添加到任务板</p>
</li>
<li><p>一旦一个团队成员完成了某用户故事的最后一个任务，他就把对应的故事卡从任务板上揭下来，<strong>确认所有的满意条件都已达到</strong>，然后把该故事卡移到”<strong>已完成</strong>“一栏</p>
<p> <img src="/2019/05/22/敏捷开发-4-Scrum计划和集体承诺/0521_3.jpg" alt=""></p>
</li>
<li><p>一旦冲刺结束，将<strong>待处理和处理中</strong>两栏中的用户故事重新放回产品积压工作表</p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/22/敏捷开发-3-Scrum和自组织团队/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="T0UGH(GuiPing Wang)">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://i.loli.net/2020/03/21/WAKimNUecFR64uo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="打怪升级日常">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/22/敏捷开发-3-Scrum和自组织团队/" itemprop="url">[敏捷开发][3][Scrum和自组织团队]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-22T23:13:55+08:00">
                2019-05-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/敏捷开发/" itemprop="url" rel="index">
                    <span itemprop="name">敏捷开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/22/敏捷开发-3-Scrum和自组织团队/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/05/22/敏捷开发-3-Scrum和自组织团队/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="3-Scrum和自组织团队"><a href="#3-Scrum和自组织团队" class="headerlink" title="3 Scrum和自组织团队"></a>3 Scrum和自组织团队</h2><h3 id="3-1-Scrum基本模式"><a href="#3-1-Scrum基本模式" class="headerlink" title="3.1 Scrum基本模式"></a>3.1 Scrum基本模式</h3><ul>
<li><p>Scrum中有3种主要的<strong>角色</strong>：产品所有者、Scrum主管和团队成员</p>
</li>
<li><p><strong>产品所有者</strong>和团队成员一起工作，负责维护<strong>产品积压工作表</strong>(production backlog)，并对表中的项指定优先级</p>
</li>
<li><p>软件在多轮时间限定的迭代中完成开发，这些迭代称为<strong>冲刺</strong>。在每一轮冲刺开始，团队进行<strong>冲刺规划</strong>，从积压工作表中选择本轮要开发的特性。所确定的列表成为<strong>冲刺挤压工作表</strong></p>
</li>
<li><p>团队每天碰面，开一个短会，更新成员各自的进度，并讨论遇到的问题。称为<strong>每日Scrum会议</strong>。每个成员回答三个问题</p>
<ol>
<li>自上一次每日Scrum会议以来，我都<strong>做了什么</strong></li>
<li>从现在起到下一次每日Scrum会议的时间内我<strong>要做什么</strong></li>
<li>我遇到了什么<strong>困难</strong></li>
</ol>
</li>
<li><p><strong>Scrum主管</strong>要和整个团队一同工作，帮助团队成员克服困难，保证项目正常运转。在每轮冲刺结束的时候，会有一次<strong>冲刺评审</strong>，向产品所有者和其他利益干系人展示可工作的软件。团队还会召开<strong>回顾会议</strong>，找出要从这一轮冲刺中吸取的经验。</p>
</li>
</ul>
<p><img src="/2019/05/22/敏捷开发-3-Scrum和自组织团队/0520_0.jpg" alt=""></p>
<h3 id="3-2-Scrum的规则"><a href="#3-2-Scrum的规则" class="headerlink" title="3.2 Scrum的规则"></a>3.2 Scrum的规则</h3><ul>
<li><p>每个冲刺<strong>开始时</strong>，需要进行<strong>冲刺启动会</strong>。会议开始前，产品所有者要提前准备好一份按照优先级排序的<strong>产品积压工作表</strong>。在会议的前半部分，产品所有者和团队<strong>一起选择出要在这一轮冲刺结束时交付的特性</strong>，时长为4小时。在会议的后半部分，团队成员在产品所有者的帮助下<strong>整理出实现这些特性要用到的具体任务</strong>，时长为4小时。</p>
</li>
<li><p>团队<strong>每天召开Scrum会议</strong>。所有成员必须参加，会议时长15分钟，所有人回答三个问题</p>
<ol>
<li>自上一次每日Scrum会议以来，我都<strong>做了什么</strong></li>
<li>从现在起到下一次每日Scrum会议的时间内我<strong>要做什么</strong></li>
<li>我遇到了什么<strong>困难</strong></li>
</ol>
</li>
<li><p>冲刺要<strong>限定在规划的时间</strong>内，一般为30个自然日</p>
</li>
<li><p>冲刺结束后，团队召开<strong>冲刺评审会</strong>，向客户和利益干系人展示可工作的软件。团队不能展示中间产物。</p>
</li>
<li><p>冲刺结束后，召开<strong>冲刺回顾会议</strong>，讨论可以改进工作方式的地方。团队和Scrum主管参会(产品所有者也可以参加)。每个人回答两个问题</p>
<ol>
<li>在这一轮冲刺中有哪些事情做得不错</li>
<li>未来有哪些事情可以改进</li>
</ol>
</li>
</ul>
<h3 id="3-3-Scrum中的成员角色"><a href="#3-3-Scrum中的成员角色" class="headerlink" title="3.3 Scrum中的成员角色"></a>3.3 Scrum中的成员角色</h3><h4 id="3-3-1-Scrum主管指导团队的决策"><a href="#3-3-1-Scrum主管指导团队的决策" class="headerlink" title="3.3.1 Scrum主管指导团队的决策"></a>3.3.1 Scrum主管指导团队的决策</h4><ul>
<li>Scrum项目中<strong>没有单独负责计划的人</strong></li>
<li>因为如果团队中负责计划和负责执行的人不同，那么一旦遇到麻烦，成员很容易互相指责</li>
<li>Scrum主管并不负责计划，他可以<strong>帮助团队制订计划</strong></li>
<li>更重要的，他会指导团队使用Scrum及其相关实践，<strong>让所有人觉得计划是大家一起制订的</strong></li>
</ul>
<h4 id="3-3-2-产品所有者帮助团队了解软件的价值"><a href="#3-3-2-产品所有者帮助团队了解软件的价值" class="headerlink" title="3.3.2 产品所有者帮助团队了解软件的价值"></a>3.3.2 产品所有者帮助团队了解软件的价值</h4><ul>
<li>在Scrum团队中，产品所有者就是<strong>对公司做出承诺</strong>的人</li>
<li>这个人必须站出来，保证在项目结束时能交付某个具体的东西</li>
<li>产品所有者要<strong>对积压工作表负责</strong>并制订优先级，还要让大家理解一项挤压工作表怎么就算完成了</li>
<li>在冲刺的过程中，产品所有者每天都会与团队成员一起工作，回答大量的细节问题，<strong>向团队成员就软件以及用户体验回答具体问题</strong>，还会<strong>做出很多关于产品工作方式的小决策</strong></li>
<li>Scrum依赖产品所有者<strong>对业务的决策能力</strong>，产品所有者要花时间<strong>与用户和利益干系人沟通</strong>，以获得开发人员需要的答案并负责让产品积压工作表反应公司需求的最新变化</li>
<li>产品所有者并<strong>不一定了解技术细节</strong>，但没有问题</li>
</ul>
<h4 id="3-3-3-每个人都对项目负责"><a href="#3-3-3-每个人都对项目负责" class="headerlink" title="3.3.3 每个人都对项目负责"></a>3.3.3 每个人都对项目负责</h4><ul>
<li>Scrum要求: 冲刺的时候，<strong>让项目成功这件事情比你的其他任何职业目标都要重要</strong></li>
</ul>
<h3 id="3-4-Scrum的价值观"><a href="#3-4-Scrum的价值观" class="headerlink" title="3.4 Scrum的价值观"></a>3.4 Scrum的价值观</h3><h4 id="3-4-1-每一位成员都承诺实现项目的目标"><a href="#3-4-1-每一位成员都承诺实现项目的目标" class="headerlink" title="3.4.1 每一位成员都承诺实现项目的目标"></a>3.4.1 每一位成员都承诺实现项目的目标</h4><ul>
<li><p>只有在团队、Scrum主管以及产品所有者能够作出决策的时候才能真正做到这一点</p>
</li>
<li><p>他们不需要层层官僚审批就可以做出这样的决策</p>
</li>
</ul>
<h4 id="3-4-2-团队成员互相尊重"><a href="#3-4-2-团队成员互相尊重" class="headerlink" title="3.4.2 团队成员互相尊重"></a>3.4.2 团队成员互相尊重</h4><ul>
<li><p>很多程序员，特别是技术水平很高的程序员，往往纯粹根据技术能力建立尊重，这是高效采用Scrum的一个障碍</p>
</li>
<li><p>好的Scrum主管会让程序员指导产品所有者对用户思考方式以及公司的需求有着深入的理解</p>
</li>
</ul>
<h4 id="3-4-3-所有人都专注于工作"><a href="#3-4-3-所有人都专注于工作" class="headerlink" title="3.4.3 所有人都专注于工作"></a>3.4.3 所有人都专注于工作</h4><ul>
<li><p>当团队中所有成员都专注于冲刺目标并且有足够的自由完成满足这些目标所需要的工作，那么整个团队就能够发生自组织，在需求变化的时候很轻松地调整方向</p>
</li>
<li><p>因为背景切换需要消耗大量的认知，所以执行多任务没有什么意义</p>
</li>
<li><p>好的Scrum团队有权忽略被要求参加的无关会议、各种不相干的组织等让人分心的事情，而不用担心影响自己的事业或晋升</p>
</li>
</ul>
<h4 id="3-4-4-团队重视开放"><a href="#3-4-4-团队重视开放" class="headerlink" title="3.4.4 团队重视开放"></a>3.4.4 团队重视开放</h4><ul>
<li><p>在Scrum团队工作的时候，团队中的其他所有人都应该了解你当前正在做的工作是如何朝着当前目标前进的</p>
</li>
<li><p>通过任务板，大家可以看到其他所有人要做的工作，以及还没有完成的工作量</p>
</li>
<li><p>通过燃尽图，大家可以自己度量冲刺达成目标的速度</p>
</li>
<li><p>高效的每日Scrum会议是纯粹的开放性实践，每个人都会分享自己的任务、遇到的困难以及当前的进度，让整个团队都了解这些事项</p>
</li>
<li><p>缺乏透明的组织更容易要求团队去达成一个不切实际的目标，并迫使团队加班</p>
</li>
</ul>
<h4 id="3-4-5-团队成员有勇气全力支持项目"><a href="#3-4-5-团队成员有勇气全力支持项目" class="headerlink" title="3.4.5 团队成员有勇气全力支持项目"></a>3.4.5 团队成员有勇气全力支持项目</h4><ul>
<li><p>要应对与Scrum以及敏捷价值观冲突的公司阻力是需要勇气的</p>
</li>
<li><p>每个人都要相信，交付有价值的软件可以帮助自己克服针对这些价值观的阻力</p>
</li>
</ul>
<h3 id="3-5-Scrum的实践"><a href="#3-5-Scrum的实践" class="headerlink" title="3.5 Scrum的实践"></a>3.5 Scrum的实践</h3><h4 id="3-5-1-每日Scrum例会"><a href="#3-5-1-每日Scrum例会" class="headerlink" title="3.5.1 每日Scrum例会"></a>3.5.1 每日Scrum例会</h4><p>“可见” - “检查” - “调整”周期</p>
<ul>
<li>“可见”:每个人每天讲述手头的工作</li>
<li>“检查”:全体成员倾听讲述</li>
<li>“调整”:同事给出某些方面的改进建议</li>
</ul>
<p>最后责任时刻</p>
<ul>
<li>在最后责任时刻做出决策可以保留灵活的选择权，更容易针对变化进行调整</li>
<li>任务分配</li>
</ul>
<p>在每日Scrum例会中，每一位团队成员都要<strong>回答三个问题</strong>：从上一次例会到现在我都干了些什么？到下一次例会前我要干什么？什么事情阻碍了我的进度？</p>
<p><strong>团队每天都通过这些问题集体检查项目的计划</strong>，并且针对项目中发生的变化进行调整。在某个项目中，这些问题的答案给团队提供了持续的反馈</p>
<p>Scrum团队<strong>在最终责任时刻作出决策</strong>，这样可以保留灵活的选择权，更容易针对变化进行调整</p>
<p>每日Scrum例会是<strong>整个团队的事情</strong>，并不只限于Scrum主管和产品所有者，所有人都要平等参会</p>
<p>召开有效的每日Scrum会议</p>
<ul>
<li>表现得像猪一样</li>
<li>细节会后讨论</li>
<li>轮流先行</li>
<li>不要当作例行公事</li>
<li>所有人都要参与</li>
<li>不要开成最新状态汇报会</li>
<li>检查每一项任务</li>
<li>计划需要则改变</li>
</ul>
<h4 id="3-5-2-冲刺、计划和回顾会议"><a href="#3-5-2-冲刺、计划和回顾会议" class="headerlink" title="3.5.2 冲刺、计划和回顾会议"></a>3.5.2 冲刺、计划和回顾会议</h4><p>Scrum既是<strong>增量式</strong>的也是<strong>迭代式</strong>的</p>
<ul>
<li>增量是指Scrum把任务分解为连续的冲刺</li>
<li>迭代是在于团队在每一轮新的冲刺中都会根据项目中发生的变化进行调整</li>
</ul>
<p>当真正的Scrum团队说他们被“<strong>交付价值</strong>”所激励的时候。他们的意思是说他们最重要的目标是开发出改善用户生活的软件</p>
<p><strong>产品所有者</strong>的职责是<strong>帮助团队理解他们的用户</strong>、理解用户所做的工作以及理解用户如何使用软件，通过这种方式可以让团队能一直受到交付价值的激励</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/22/敏捷开发-2-敏捷原则/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="T0UGH(GuiPing Wang)">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://i.loli.net/2020/03/21/WAKimNUecFR64uo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="打怪升级日常">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/22/敏捷开发-2-敏捷原则/" itemprop="url">[敏捷开发][2][敏捷原则]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-22T23:12:35+08:00">
                2019-05-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/敏捷开发/" itemprop="url" rel="index">
                    <span itemprop="name">敏捷开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/22/敏捷开发-2-敏捷原则/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/05/22/敏捷开发-2-敏捷原则/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="2-敏捷原则"><a href="#2-敏捷原则" class="headerlink" title="2 敏捷原则"></a>2 敏捷原则</h2><p>敏捷宣言的签订者很快对4则价值观达成共识，但是他们在宣言的<strong>12条附加原则</strong>上耗费的时间较长。</p>
<p>我们把这些原则分为四个<strong>类别</strong>：交付、沟通、执行和改进</p>
<p><strong>客户不总是对的</strong>，要向人们提供真正需要的东西，而不是提供他们要求的东西</p>
<p>为了考虑变化，团队应当在项目中的很多时间点<strong>快速地改变</strong>自己的方向。“预先指定大计划”的瀑布流开发方式限制了团队响应这些变化的灵活性</p>
<h3 id="2-1-交付项目"><a href="#2-1-交付项目" class="headerlink" title="2.1 交付项目"></a>2.1 交付项目</h3><h4 id="2-1-1-原则1：最优先要做的是尽早、持续地交付有价值的软件，让客户满意"><a href="#2-1-1-原则1：最优先要做的是尽早、持续地交付有价值的软件，让客户满意" class="headerlink" title="2.1.1 原则1：最优先要做的是尽早、持续地交付有价值的软件，让客户满意"></a>2.1.1 原则1：最优先要做的是尽早、持续地交付有价值的软件，让客户满意</h4><p>这条原则包含三个<strong>独立概念</strong></p>
<ul>
<li>尽早发布软件</li>
<li>持续交付价值</li>
<li>让客户满意</li>
</ul>
<p>既然客户只有在看到了可工作的软件之后才能给你真实有信息量的反馈，那么<strong>获得反馈</strong>的最佳方式就是<strong>尽早交付</strong></p>
<p>敏捷团队选择出能交付最大价值的特性和需求，并据此计划项目的迭代，来<strong>持续交付有价值的软件</strong></p>
<h4 id="2-1-2-原则2：欣然面对需求变化，即使是在开发后期。敏捷过程利用变化位用户维持竞争优势"><a href="#2-1-2-原则2：欣然面对需求变化，即使是在开发后期。敏捷过程利用变化位用户维持竞争优势" class="headerlink" title="2.1.2 原则2：欣然面对需求变化，即使是在开发后期。敏捷过程利用变化位用户维持竞争优势"></a>2.1.2 原则2：欣然面对需求变化，即使是在开发后期。敏捷过程利用变化位用户维持竞争优势</h4><blockquote>
<p>大多数软件工程师都是在<strong>技术自豪感</strong>的驱动下工作的：我们交付的产品我们能负责，而且能满足用户的需求。而项目中发生的<strong>变化</strong>则对这种自豪感产生了<strong>威胁</strong>，因为变化意味着质疑你采用的方法和设想</p>
</blockquote>
<p>可以尝试<strong>从客户的角度</strong>看问题，客户无法预测未来，所以肯定会发生变化，理想的客户是不存在的</p>
<p>欣然面对变化意味着</p>
<ul>
<li>不要认为有变化就会有人<strong>倒霉</strong>。</li>
<li>我们是一条绳子上的蚂蚱。<strong>团队中的每个成员</strong>，包括客户都要对需求和需求的变化<strong>负责</strong>。</li>
<li>我们<strong>不把变化拖到最后</strong>。</li>
<li>我们<strong>不要再把变化当成犯错</strong>。考虑到当时掌握的信息，我们已经做出了最好的决策，这个决策本身没有错误。</li>
<li>我们通过变化<strong>学到东西</strong></li>
</ul>
<h4 id="2-1-3-原则3：频繁交付可工作的软件，从数周到数月，交付周期越短越好"><a href="#2-1-3-原则3：频繁交付可工作的软件，从数周到数月，交付周期越短越好" class="headerlink" title="2.1.3 原则3：频繁交付可工作的软件，从数周到数月，交付周期越短越好"></a>2.1.3 原则3：频繁交付可工作的软件，从数周到数月，交付周期越短越好</h4><p>传统的<strong>应对变化</strong>的方式：<strong>命令-控制</strong>模式</p>
<ul>
<li><strong>命令</strong>指的是项目经理给团队分配任务的方式，项目经理可以控制所有人的任务分配</li>
<li><strong>控制</strong>指的是项目经理管理变化的方式。项目经理不断监控这些变化的发生并更新项目计划，来引入变化</li>
</ul>
<p>敏捷中<strong>应对变化</strong>的方式：<strong>频繁发布可工作的软件</strong></p>
<ul>
<li><p>团队通过<strong>迭代</strong>将项目分割至定期的截止时间。在每一轮迭代中，团队都要发布可工作软件</p>
</li>
<li><p>可预测的<strong>进度安排</strong>(每日站立会议和迭代启动会议)和<strong>持续检查</strong>(回顾会议)可以帮助团队尽早掌握变化，并且大家一起制订解决这些变化的方式</p>
</li>
</ul>
<h3 id="2-2-沟通和合作"><a href="#2-2-沟通和合作" class="headerlink" title="2.2 沟通和合作"></a>2.2 沟通和合作</h3><p>在传统观念中，人们把软件文档看作是一种<strong>必须的文档管理系统</strong>。如果这个系统具有可以跟踪性，可以理清所有信息之间的所有关系，那么需要的产品、测试，以及部署和维护方式便<strong>一目了然</strong></p>
<p>对于敏捷团队来说：只需要写<strong>够项目开发</strong>用的文档就行。敏捷并不是完全放弃文档，但是如果一种文档<strong>不能给团队开发软件带来帮助</strong>，那么<strong>就没有写下来的必要</strong>。</p>
<h4 id="2-2-1-原则4：在团队内外，面对面交谈是最有效、也是最高效的沟通方式"><a href="#2-2-1-原则4：在团队内外，面对面交谈是最有效、也是最高效的沟通方式" class="headerlink" title="2.2.1 原则4：在团队内外，面对面交谈是最有效、也是最高效的沟通方式"></a>2.2.1 原则4：在团队内外，面对面交谈是最有效、也是最高效的沟通方式</h4><p>在软件团队中，<strong>面对面的沟通方式</strong>几乎总是优于文档沟通。敏捷沟通实践更关注个人与个人的沟通，而文档则用于记录那些以后需要回忆具体细节的复杂信息</p>
<p>团队沟通的终极目标是形成一种<strong>集体意识</strong>，在成员之间建立不必直说就能领悟的共同知识</p>
<h4 id="2-2-2-原则5：在整个项目过程中，业务人员和开发人员必须每天都在一起工作"><a href="#2-2-2-原则5：在整个项目过程中，业务人员和开发人员必须每天都在一起工作" class="headerlink" title="2.2.2 原则5：在整个项目过程中，业务人员和开发人员必须每天都在一起工作"></a>2.2.2 原则5：在整个项目过程中，业务人员和开发人员必须每天都在一起工作</h4><p>为了出色地完成软件开发，<strong>开发团队需要与业务人员进行大量面对面的讨论</strong>。业务人员了解需要什么软件，而开发团队可以通过讨论了解这些。</p>
<p>当业务人员和开发人员同在团队中开发软件的时候，最有效的方式就是让他们<strong>在项目完整周期内每天坐在一起工作</strong>。这样可以<strong>尽早处理变化</strong>。</p>
<p>而开发团队应该<strong>把最有价值的特性优先开发</strong>，这样的话，业务人员可以第一时间<strong>享用</strong>这些价值。</p>
<h4 id="2-2-3-原则6：以受激励的个体为核心构建项目，为他们提供环境和支持，相信他们可以把工作做好"><a href="#2-2-3-原则6：以受激励的个体为核心构建项目，为他们提供环境和支持，相信他们可以把工作做好" class="headerlink" title="2.2.3 原则6：以受激励的个体为核心构建项目，为他们提供环境和支持，相信他们可以把工作做好"></a>2.2.3 原则6：以受激励的个体为核心构建项目，为他们提供环境和支持，相信他们可以把工作做好</h4><p>所有人的绩效应该根据<strong>团队交付的成果</strong>来评定，而不是根据每个人自己的角色来判定</p>
<h3 id="2-3-项目实施"><a href="#2-3-项目实施" class="headerlink" title="2.3 项目实施"></a>2.3 项目实施</h3><h4 id="2-3-1-原则7：可工作的软件是衡量进度的首要标准"><a href="#2-3-1-原则7：可工作的软件是衡量进度的首要标准" class="headerlink" title="2.3.1 原则7：可工作的软件是衡量进度的首要标准"></a>2.3.1 原则7：可工作的软件是衡量进度的首要标准</h4><p><strong>可工作的软件</strong>可以更好的给所有人<strong>汇报项目最新进展</strong>，因为这是团队用来交流当前已经完成工作的最好方式</p>
<h4 id="2-3-2-原则8：敏捷过程倡导可持续开发。赞助商、开发人员和用户要能够共同、长期维持其步调"><a href="#2-3-2-原则8：敏捷过程倡导可持续开发。赞助商、开发人员和用户要能够共同、长期维持其步调" class="headerlink" title="2.3.2 原则8：敏捷过程倡导可持续开发。赞助商、开发人员和用户要能够共同、长期维持其步调"></a>2.3.2 原则8：敏捷过程倡导可持续开发。赞助商、开发人员和用户要能够共同、长期维持其步调</h4><p>敏捷团队信奉的是<strong>维持可持续的开发节奏</strong>。他们会<strong>针对预留的时间制订切实可完成的计划</strong>。通过迭代式的开发，这种计划的可行性很高，因为预估接下来的两周、四周或六周的工作量远比预估未来一年半的工作量要简单的多。</p>
<h4 id="2-3-3-原则9：坚持不懈地追求技术卓越和设计优越，以此增强敏捷的能力"><a href="#2-3-3-原则9：坚持不懈地追求技术卓越和设计优越，以此增强敏捷的能力" class="headerlink" title="2.3.3 原则9：坚持不懈地追求技术卓越和设计优越，以此增强敏捷的能力"></a>2.3.3 原则9：坚持不懈地追求技术卓越和设计优越，以此增强敏捷的能力</h4><p>设计良好并很好实现的软件可以最快交付，因为这种软件修改起来很容易。</p>
<p>敏捷开发人员会培养起很好的编程习惯，从而帮助自己编写设计良好的代码</p>
<h3 id="2-4-持续改进"><a href="#2-4-持续改进" class="headerlink" title="2.4 持续改进"></a>2.4 持续改进</h3><h4 id="2-4-1-原则10：简单是尽最大可能减少不必要工作的艺术，是敏捷的根本"><a href="#2-4-1-原则10：简单是尽最大可能减少不必要工作的艺术，是敏捷的根本" class="headerlink" title="2.4.1 原则10：简单是尽最大可能减少不必要工作的艺术，是敏捷的根本"></a>2.4.1 原则10：简单是尽最大可能减少不必要工作的艺术，是敏捷的根本</h4><p>采用<strong>迭代式</strong>开发以及在项目初期将<strong>文档量控制</strong>到最小，可以避免交付不必要的软件</p>
<p>敏捷团队<strong>避免开发不必要的特性</strong>以及<strong>过于复杂</strong>的软件，保证给出的解决方案尽可能简单</p>
<h4 id="2-4-2-原则11：最好的架构、需求和设计来自自组织的团队"><a href="#2-4-2-原则11：最好的架构、需求和设计来自自组织的团队" class="headerlink" title="2.4.2 原则11：最好的架构、需求和设计来自自组织的团队"></a>2.4.2 原则11：最好的架构、需求和设计来自自组织的团队</h4><p>在敏捷团队中，所有人都对<strong>架构</strong>负责</p>
<p>自组织团队并没有明确的<strong>需求</strong>和<strong>设计</strong>环节。自组织团队不依赖某个负责计划的人，会用合作的方式对项目进行规划。他们先把<strong>项目分解为</strong>多个<strong>用户故事</strong>，从能够给公司带来最大价值的用户故事着手，<strong>然后再考虑</strong>详细的需求、设计和架构。</p>
<h4 id="2-4-3-原则12：团队定期反思如何提升效率，并依次调整"><a href="#2-4-3-原则12：团队定期反思如何提升效率，并依次调整" class="headerlink" title="2.4.3 原则12：团队定期反思如何提升效率，并依次调整"></a>2.4.3 原则12：团队定期反思如何提升效率，并依次调整</h4><p>敏捷团队再每一轮迭代结束的时候和项目结束的时候会花时间总结过去，讨论总结经验，提高开发软件的能力</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/22/敏捷开发-1-敏捷宣言/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="T0UGH(GuiPing Wang)">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://i.loli.net/2020/03/21/WAKimNUecFR64uo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="打怪升级日常">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/22/敏捷开发-1-敏捷宣言/" itemprop="url">[敏捷开发][1][敏捷宣言]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-22T23:10:55+08:00">
                2019-05-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/敏捷开发/" itemprop="url" rel="index">
                    <span itemprop="name">敏捷开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/22/敏捷开发-1-敏捷宣言/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/05/22/敏捷开发-1-敏捷宣言/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-敏捷宣言"><a href="#1-敏捷宣言" class="headerlink" title="1 敏捷宣言"></a>1 敏捷宣言</h3><p>敏捷软件开发宣言也称<a href="http://www.agilemanifesto.org" target="_blank" rel="noopener">敏捷宣言</a>，由17位志同道合的IT人于2001年在犹他州盐湖城外群山中的Snowbirt Retreat旅馆写就。</p>
<p>下面是宣言的完整内容</p>
<blockquote>
<p>我们一直在实践中探寻更好的软件开发方法，身体力行的同时也帮助他人<br>由此我们建立了如下价值观<br><strong>个体和互动</strong>高于<em>流程和工具</em><br><strong>可工作的软件</strong>高于<em>详细的文档</em><br><strong>客户协作</strong>高于<em>合同谈判</em><br><strong>响应变化</strong>高于<em>遵循计划</em><br>也就是说，虽然右项有其价值，但是我们更重视左项的价值</p>
</blockquote>
<h4 id="1-1-个体和互动高于流程和工具"><a href="#1-1-个体和互动高于流程和工具" class="headerlink" title="1.1 个体和互动高于流程和工具"></a>1.1 个体和互动高于流程和工具</h4><p>有很多支持个体和互动的<strong>敏捷实践</strong>，例如每日站立会议和回顾会议。</p>
<p>在<strong>回顾会议</strong>上，大家讨论当前项目或迭代的进展情况，以及可以吸取的教训。</p>
<p><strong>用户故事</strong>也是这样一种实践，故事本身并不重要，重要的是这些故事可以帮助团队一起讨论故事代表的真正意义</p>
<h4 id="1-2-可工作的软件高于详细的文档"><a href="#1-2-可工作的软件高于详细的文档" class="headerlink" title="1.2 可工作的软件高于详细的文档"></a>1.2 可工作的软件高于详细的文档</h4><p><strong>可工作的软件</strong>是可以给公司组织带来<em>价值</em>的软件。可以是公司出售的软件，也可以是帮助公司员工提高工作效率的软件</p>
<p><strong>文档</strong>还是要写的，但是通常撰写文档的人通常就是编写软件的人</p>
<p><strong>测试驱动开发</strong>就是这样一种敏捷实践</p>
<ul>
<li>程序员首先开发自动化的<strong>单元测试</strong>，再开发被测试的模块</li>
<li>自动化的测试代码和软件本身的代码并列保存</li>
<li>自动化的测试可以<strong>当作文档使用</strong>，因为测试可以帮助程序员记录代码应该完成的功能</li>
</ul>
<h4 id="1-3-客户协作高于合同谈判"><a href="#1-3-客户协作高于合同谈判" class="headerlink" title="1.3 客户协作高于合同谈判"></a>1.3 客户协作高于合同谈判</h4><p>如果程序员、测试员、产品所有者和项目经理<em>在不同团队中工作</em>，而且<em>不是真正</em>朝着交付可工作软件这个单一目标努力，他们的工作方式就好像是<strong>互相遵照合约合作</strong></p>
<p>敏捷团队落实这项价值观的一种方法是在团队中安置一名<strong>产品所有者</strong>。</p>
<ul>
<li>这位产品所有者<strong>可能不参与代码</strong>的开发，但是他会参加会议，贡献想法。</li>
<li>最重要的是，他要把<strong>最终的产品当作自己的东西</strong>。</li>
<li>产品所有者通常通过<strong>用户故事</strong>与团队中的其他成员合作</li>
</ul>
<h4 id="1-4-响应变化高于遵循计划"><a href="#1-4-响应变化高于遵循计划" class="headerlink" title="1.4 响应变化高于遵循计划"></a>1.4 响应变化高于遵循计划</h4><p>开发团队需要<strong>不断地发现变化</strong>，当用户需求发生变化，或者软件构建方式需要变化地时候，团队要保证正确地<strong>响应变化</strong></p>
<p>制定计划的人<strong>抗拒变化</strong>是很常见的事情，因为改变计划需要<em>耗费精力</em></p>
<p><strong>任务板</strong>是一种良好的实践，可以帮助团队做出响应变化的正确决策。</p>
<ul>
<li>他们会把任务或用户故事写在<strong>索引卡</strong>上</li>
<li>然后根据项目的进展<strong>移动卡片</strong></li>
<li>很多团队还在任务板上<strong>画图</strong>跟踪进度</li>
</ul>
<h4 id="1-5-原则高于实践"><a href="#1-5-原则高于实践" class="headerlink" title="1.5 原则高于实践"></a>1.5 原则高于实践</h4><blockquote>
<p>没有具体的实践，原则是瘠薄的；但是如果缺乏原则，实践则是没有生命、没有个性、没有勇气。伟大的产品来自伟大的团队，而伟大的团队有原则、有个性、有勇气、有坚持、有胆量。<br>[Jim Highsmith, 《敏捷项目管理》]</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/10/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://i.loli.net/2020/03/21/WAKimNUecFR64uo.jpg" alt="T0UGH(GuiPing Wang)">
            
              <p class="site-author-name" itemprop="name">T0UGH(GuiPing Wang)</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">112</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">26</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">56</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/T0UGH" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="tough.neu.edu@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Friends
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://neusoftware.top/solo" title="ChengYi" target="_blank">ChengYi</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://mike4ellis.github.io/" title="Mike" target="_blank">Mike</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      
    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2019 &mdash; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">T0UGH(GuiPing Wang)</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      人次
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      次
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'E1MH6h0YP3yhA0PJsohNBgiT-gzGzoHsz',
        appKey: 'YOiN6zLq3XGfKmlR0b8vyHtN',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
